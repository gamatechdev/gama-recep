(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))l(d);new MutationObserver(d=>{for(const h of d)if(h.type==="childList")for(const m of h.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&l(m)}).observe(document,{childList:!0,subtree:!0});function r(d){const h={};return d.integrity&&(h.integrity=d.integrity),d.referrerPolicy&&(h.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?h.credentials="include":d.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function l(d){if(d.ep)return;d.ep=!0;const h=r(d);fetch(d.href,h)}})();function Xm(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Fc={exports:{}},nr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cm;function pp(){if(cm)return nr;cm=1;var i=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function r(l,d,h){var m=null;if(h!==void 0&&(m=""+h),d.key!==void 0&&(m=""+d.key),"key"in d){h={};for(var g in d)g!=="key"&&(h[g]=d[g])}else h=d;return d=h.ref,{$$typeof:i,type:l,key:m,ref:d!==void 0?d:null,props:h}}return nr.Fragment=n,nr.jsx=r,nr.jsxs=r,nr}var um;function yp(){return um||(um=1,Fc.exports=pp()),Fc.exports}var u=yp(),eu={exports:{}},Oe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dm;function vp(){if(dm)return Oe;dm=1;var i=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),m=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),T=Symbol.iterator;function E(w){return w===null||typeof w!="object"?null:(w=T&&w[T]||w["@@iterator"],typeof w=="function"?w:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,D={};function Y(w,B,P){this.props=w,this.context=B,this.refs=D,this.updater=P||S}Y.prototype.isReactComponent={},Y.prototype.setState=function(w,B){if(typeof w!="object"&&typeof w!="function"&&w!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,w,B,"setState")},Y.prototype.forceUpdate=function(w){this.updater.enqueueForceUpdate(this,w,"forceUpdate")};function K(){}K.prototype=Y.prototype;function H(w,B,P){this.props=w,this.context=B,this.refs=D,this.updater=P||S}var I=H.prototype=new K;I.constructor=H,A(I,Y.prototype),I.isPureReactComponent=!0;var le=Array.isArray;function ne(){}var X={H:null,A:null,T:null,S:null},G=Object.prototype.hasOwnProperty;function F(w,B,P){var te=P.ref;return{$$typeof:i,type:w,key:B,ref:te!==void 0?te:null,props:P}}function Se(w,B){return F(w.type,B,w.props)}function ge(w){return typeof w=="object"&&w!==null&&w.$$typeof===i}function de(w){var B={"=":"=0",":":"=2"};return"$"+w.replace(/[=:]/g,function(P){return B[P]})}var we=/\/+/g;function Ee(w,B){return typeof w=="object"&&w!==null&&w.key!=null?de(""+w.key):B.toString(36)}function Ne(w){switch(w.status){case"fulfilled":return w.value;case"rejected":throw w.reason;default:switch(typeof w.status=="string"?w.then(ne,ne):(w.status="pending",w.then(function(B){w.status==="pending"&&(w.status="fulfilled",w.value=B)},function(B){w.status==="pending"&&(w.status="rejected",w.reason=B)})),w.status){case"fulfilled":return w.value;case"rejected":throw w.reason}}throw w}function U(w,B,P,te,je){var Ce=typeof w;(Ce==="undefined"||Ce==="boolean")&&(w=null);var Me=!1;if(w===null)Me=!0;else switch(Ce){case"bigint":case"string":case"number":Me=!0;break;case"object":switch(w.$$typeof){case i:case n:Me=!0;break;case b:return Me=w._init,U(Me(w._payload),B,P,te,je)}}if(Me)return je=je(w),Me=te===""?"."+Ee(w,0):te,le(je)?(P="",Me!=null&&(P=Me.replace(we,"$&/")+"/"),U(je,B,P,"",function(La){return La})):je!=null&&(ge(je)&&(je=Se(je,P+(je.key==null||w&&w.key===je.key?"":(""+je.key).replace(we,"$&/")+"/")+Me)),B.push(je)),1;Me=0;var jt=te===""?".":te+":";if(le(w))for(var Ze=0;Ze<w.length;Ze++)te=w[Ze],Ce=jt+Ee(te,Ze),Me+=U(te,B,P,Ce,je);else if(Ze=E(w),typeof Ze=="function")for(w=Ze.call(w),Ze=0;!(te=w.next()).done;)te=te.value,Ce=jt+Ee(te,Ze++),Me+=U(te,B,P,Ce,je);else if(Ce==="object"){if(typeof w.then=="function")return U(Ne(w),B,P,te,je);throw B=String(w),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.")}return Me}function Q(w,B,P){if(w==null)return w;var te=[],je=0;return U(w,te,"","",function(Ce){return B.call(P,Ce,je++)}),te}function ae(w){if(w._status===-1){var B=w._result;B=B(),B.then(function(P){(w._status===0||w._status===-1)&&(w._status=1,w._result=P)},function(P){(w._status===0||w._status===-1)&&(w._status=2,w._result=P)}),w._status===-1&&(w._status=0,w._result=B)}if(w._status===1)return w._result.default;throw w._result}var ue=typeof reportError=="function"?reportError:function(w){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var B=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof w=="object"&&w!==null&&typeof w.message=="string"?String(w.message):String(w),error:w});if(!window.dispatchEvent(B))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",w);return}console.error(w)},ve={map:Q,forEach:function(w,B,P){Q(w,function(){B.apply(this,arguments)},P)},count:function(w){var B=0;return Q(w,function(){B++}),B},toArray:function(w){return Q(w,function(B){return B})||[]},only:function(w){if(!ge(w))throw Error("React.Children.only expected to receive a single React element child.");return w}};return Oe.Activity=j,Oe.Children=ve,Oe.Component=Y,Oe.Fragment=r,Oe.Profiler=d,Oe.PureComponent=H,Oe.StrictMode=l,Oe.Suspense=y,Oe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=X,Oe.__COMPILER_RUNTIME={__proto__:null,c:function(w){return X.H.useMemoCache(w)}},Oe.cache=function(w){return function(){return w.apply(null,arguments)}},Oe.cacheSignal=function(){return null},Oe.cloneElement=function(w,B,P){if(w==null)throw Error("The argument must be a React element, but you passed "+w+".");var te=A({},w.props),je=w.key;if(B!=null)for(Ce in B.key!==void 0&&(je=""+B.key),B)!G.call(B,Ce)||Ce==="key"||Ce==="__self"||Ce==="__source"||Ce==="ref"&&B.ref===void 0||(te[Ce]=B[Ce]);var Ce=arguments.length-2;if(Ce===1)te.children=P;else if(1<Ce){for(var Me=Array(Ce),jt=0;jt<Ce;jt++)Me[jt]=arguments[jt+2];te.children=Me}return F(w.type,je,te)},Oe.createContext=function(w){return w={$$typeof:m,_currentValue:w,_currentValue2:w,_threadCount:0,Provider:null,Consumer:null},w.Provider=w,w.Consumer={$$typeof:h,_context:w},w},Oe.createElement=function(w,B,P){var te,je={},Ce=null;if(B!=null)for(te in B.key!==void 0&&(Ce=""+B.key),B)G.call(B,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(je[te]=B[te]);var Me=arguments.length-2;if(Me===1)je.children=P;else if(1<Me){for(var jt=Array(Me),Ze=0;Ze<Me;Ze++)jt[Ze]=arguments[Ze+2];je.children=jt}if(w&&w.defaultProps)for(te in Me=w.defaultProps,Me)je[te]===void 0&&(je[te]=Me[te]);return F(w,Ce,je)},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(w){return{$$typeof:g,render:w}},Oe.isValidElement=ge,Oe.lazy=function(w){return{$$typeof:b,_payload:{_status:-1,_result:w},_init:ae}},Oe.memo=function(w,B){return{$$typeof:p,type:w,compare:B===void 0?null:B}},Oe.startTransition=function(w){var B=X.T,P={};X.T=P;try{var te=w(),je=X.S;je!==null&&je(P,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(ne,ue)}catch(Ce){ue(Ce)}finally{B!==null&&P.types!==null&&(B.types=P.types),X.T=B}},Oe.unstable_useCacheRefresh=function(){return X.H.useCacheRefresh()},Oe.use=function(w){return X.H.use(w)},Oe.useActionState=function(w,B,P){return X.H.useActionState(w,B,P)},Oe.useCallback=function(w,B){return X.H.useCallback(w,B)},Oe.useContext=function(w){return X.H.useContext(w)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(w,B){return X.H.useDeferredValue(w,B)},Oe.useEffect=function(w,B){return X.H.useEffect(w,B)},Oe.useEffectEvent=function(w){return X.H.useEffectEvent(w)},Oe.useId=function(){return X.H.useId()},Oe.useImperativeHandle=function(w,B,P){return X.H.useImperativeHandle(w,B,P)},Oe.useInsertionEffect=function(w,B){return X.H.useInsertionEffect(w,B)},Oe.useLayoutEffect=function(w,B){return X.H.useLayoutEffect(w,B)},Oe.useMemo=function(w,B){return X.H.useMemo(w,B)},Oe.useOptimistic=function(w,B){return X.H.useOptimistic(w,B)},Oe.useReducer=function(w,B,P){return X.H.useReducer(w,B,P)},Oe.useRef=function(w){return X.H.useRef(w)},Oe.useState=function(w){return X.H.useState(w)},Oe.useSyncExternalStore=function(w,B,P){return X.H.useSyncExternalStore(w,B,P)},Oe.useTransition=function(){return X.H.useTransition()},Oe.version="19.2.4",Oe}var hm;function Su(){return hm||(hm=1,eu.exports=vp()),eu.exports}var V=Su();const bp=Xm(V);var tu={exports:{}},sr={},au={exports:{}},nu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fm;function xp(){return fm||(fm=1,(function(i){function n(U,Q){var ae=U.length;U.push(Q);e:for(;0<ae;){var ue=ae-1>>>1,ve=U[ue];if(0<d(ve,Q))U[ue]=Q,U[ae]=ve,ae=ue;else break e}}function r(U){return U.length===0?null:U[0]}function l(U){if(U.length===0)return null;var Q=U[0],ae=U.pop();if(ae!==Q){U[0]=ae;e:for(var ue=0,ve=U.length,w=ve>>>1;ue<w;){var B=2*(ue+1)-1,P=U[B],te=B+1,je=U[te];if(0>d(P,ae))te<ve&&0>d(je,P)?(U[ue]=je,U[te]=ae,ue=te):(U[ue]=P,U[B]=ae,ue=B);else if(te<ve&&0>d(je,ae))U[ue]=je,U[te]=ae,ue=te;else break e}}return Q}function d(U,Q){var ae=U.sortIndex-Q.sortIndex;return ae!==0?ae:U.id-Q.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;i.unstable_now=function(){return h.now()}}else{var m=Date,g=m.now();i.unstable_now=function(){return m.now()-g}}var y=[],p=[],b=1,j=null,T=3,E=!1,S=!1,A=!1,D=!1,Y=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;function I(U){for(var Q=r(p);Q!==null;){if(Q.callback===null)l(p);else if(Q.startTime<=U)l(p),Q.sortIndex=Q.expirationTime,n(y,Q);else break;Q=r(p)}}function le(U){if(A=!1,I(U),!S)if(r(y)!==null)S=!0,ne||(ne=!0,de());else{var Q=r(p);Q!==null&&Ne(le,Q.startTime-U)}}var ne=!1,X=-1,G=5,F=-1;function Se(){return D?!0:!(i.unstable_now()-F<G)}function ge(){if(D=!1,ne){var U=i.unstable_now();F=U;var Q=!0;try{e:{S=!1,A&&(A=!1,K(X),X=-1),E=!0;var ae=T;try{t:{for(I(U),j=r(y);j!==null&&!(j.expirationTime>U&&Se());){var ue=j.callback;if(typeof ue=="function"){j.callback=null,T=j.priorityLevel;var ve=ue(j.expirationTime<=U);if(U=i.unstable_now(),typeof ve=="function"){j.callback=ve,I(U),Q=!0;break t}j===r(y)&&l(y),I(U)}else l(y);j=r(y)}if(j!==null)Q=!0;else{var w=r(p);w!==null&&Ne(le,w.startTime-U),Q=!1}}break e}finally{j=null,T=ae,E=!1}Q=void 0}}finally{Q?de():ne=!1}}}var de;if(typeof H=="function")de=function(){H(ge)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,Ee=we.port2;we.port1.onmessage=ge,de=function(){Ee.postMessage(null)}}else de=function(){Y(ge,0)};function Ne(U,Q){X=Y(function(){U(i.unstable_now())},Q)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(U){U.callback=null},i.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<U?Math.floor(1e3/U):5},i.unstable_getCurrentPriorityLevel=function(){return T},i.unstable_next=function(U){switch(T){case 1:case 2:case 3:var Q=3;break;default:Q=T}var ae=T;T=Q;try{return U()}finally{T=ae}},i.unstable_requestPaint=function(){D=!0},i.unstable_runWithPriority=function(U,Q){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var ae=T;T=U;try{return Q()}finally{T=ae}},i.unstable_scheduleCallback=function(U,Q,ae){var ue=i.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?ue+ae:ue):ae=ue,U){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=ae+ve,U={id:b++,callback:Q,priorityLevel:U,startTime:ae,expirationTime:ve,sortIndex:-1},ae>ue?(U.sortIndex=ae,n(p,U),r(y)===null&&U===r(p)&&(A?(K(X),X=-1):A=!0,Ne(le,ae-ue))):(U.sortIndex=ve,n(y,U),S||E||(S=!0,ne||(ne=!0,de()))),U},i.unstable_shouldYield=Se,i.unstable_wrapCallback=function(U){var Q=T;return function(){var ae=T;T=Q;try{return U.apply(this,arguments)}finally{T=ae}}}})(nu)),nu}var mm;function wp(){return mm||(mm=1,au.exports=xp()),au.exports}var su={exports:{}},qt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gm;function _p(){if(gm)return qt;gm=1;var i=Su();function n(y){var p="https://react.dev/errors/"+y;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+y+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var l={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},d=Symbol.for("react.portal");function h(y,p,b){var j=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:j==null?null:""+j,children:y,containerInfo:p,implementation:b}}var m=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(y,p){if(y==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return qt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,qt.createPortal=function(y,p){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(n(299));return h(y,p,null,b)},qt.flushSync=function(y){var p=m.T,b=l.p;try{if(m.T=null,l.p=2,y)return y()}finally{m.T=p,l.p=b,l.d.f()}},qt.preconnect=function(y,p){typeof y=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,l.d.C(y,p))},qt.prefetchDNS=function(y){typeof y=="string"&&l.d.D(y)},qt.preinit=function(y,p){if(typeof y=="string"&&p&&typeof p.as=="string"){var b=p.as,j=g(b,p.crossOrigin),T=typeof p.integrity=="string"?p.integrity:void 0,E=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;b==="style"?l.d.S(y,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:j,integrity:T,fetchPriority:E}):b==="script"&&l.d.X(y,{crossOrigin:j,integrity:T,fetchPriority:E,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},qt.preinitModule=function(y,p){if(typeof y=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var b=g(p.as,p.crossOrigin);l.d.M(y,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&l.d.M(y)},qt.preload=function(y,p){if(typeof y=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var b=p.as,j=g(b,p.crossOrigin);l.d.L(y,b,{crossOrigin:j,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},qt.preloadModule=function(y,p){if(typeof y=="string")if(p){var b=g(p.as,p.crossOrigin);l.d.m(y,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else l.d.m(y)},qt.requestFormReset=function(y){l.d.r(y)},qt.unstable_batchedUpdates=function(y,p){return y(p)},qt.useFormState=function(y,p,b){return m.H.useFormState(y,p,b)},qt.useFormStatus=function(){return m.H.useHostTransitionStatus()},qt.version="19.2.4",qt}var pm;function Sp(){if(pm)return su.exports;pm=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(n){console.error(n)}}return i(),su.exports=_p(),su.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ym;function jp(){if(ym)return sr;ym=1;var i=wp(),n=Su(),r=Sp();function l(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function h(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function m(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function y(e){if(h(e)!==e)throw Error(l(188))}function p(e){var t=e.alternate;if(!t){if(t=h(e),t===null)throw Error(l(188));return t!==e?null:e}for(var a=e,s=t;;){var o=a.return;if(o===null)break;var c=o.alternate;if(c===null){if(s=o.return,s!==null){a=s;continue}break}if(o.child===c.child){for(c=o.child;c;){if(c===a)return y(o),e;if(c===s)return y(o),t;c=c.sibling}throw Error(l(188))}if(a.return!==s.return)a=o,s=c;else{for(var f=!1,v=o.child;v;){if(v===a){f=!0,a=o,s=c;break}if(v===s){f=!0,s=o,a=c;break}v=v.sibling}if(!f){for(v=c.child;v;){if(v===a){f=!0,a=c,s=o;break}if(v===s){f=!0,s=c,a=o;break}v=v.sibling}if(!f)throw Error(l(189))}}if(a.alternate!==s)throw Error(l(190))}if(a.tag!==3)throw Error(l(188));return a.stateNode.current===a?e:t}function b(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=b(e),t!==null)return t;e=e.sibling}return null}var j=Object.assign,T=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),K=Symbol.for("react.consumer"),H=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),ne=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),Se=Symbol.for("react.memo_cache_sentinel"),ge=Symbol.iterator;function de(e){return e===null||typeof e!="object"?null:(e=ge&&e[ge]||e["@@iterator"],typeof e=="function"?e:null)}var we=Symbol.for("react.client.reference");function Ee(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===we?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case A:return"Fragment";case Y:return"Profiler";case D:return"StrictMode";case le:return"Suspense";case ne:return"SuspenseList";case F:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case S:return"Portal";case H:return e.displayName||"Context";case K:return(e._context.displayName||"Context")+".Consumer";case I:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case X:return t=e.displayName||null,t!==null?t:Ee(e.type)||"Memo";case G:t=e._payload,e=e._init;try{return Ee(e(t))}catch{}}return null}var Ne=Array.isArray,U=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},ue=[],ve=-1;function w(e){return{current:e}}function B(e){0>ve||(e.current=ue[ve],ue[ve]=null,ve--)}function P(e,t){ve++,ue[ve]=e.current,e.current=t}var te=w(null),je=w(null),Ce=w(null),Me=w(null);function jt(e,t){switch(P(Ce,t),P(je,e),P(te,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Rf(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Rf(t),e=Df(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}B(te),P(te,e)}function Ze(){B(te),B(je),B(Ce)}function La(e){e.memoizedState!==null&&P(Me,e);var t=te.current,a=Df(t,e.type);t!==a&&(P(je,e),P(te,a))}function Ca(e){je.current===e&&(B(te),B(je)),Me.current===e&&(B(Me),Fi._currentValue=ae)}var Yn,Kn;function vt(e){if(Yn===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);Yn=t&&t[1]||"",Kn=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Yn+e+Kn}var xa=!1;function un(e,t){if(!e||xa)return"";xa=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var $=function(){throw Error()};if(Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(z){var R=z}Reflect.construct(e,[],$)}else{try{$.call()}catch(z){R=z}e.call($.prototype)}}else{try{throw Error()}catch(z){R=z}($=e())&&typeof $.catch=="function"&&$.catch(function(){})}}catch(z){if(z&&R&&typeof z.stack=="string")return[z.stack,R.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var c=s.DetermineComponentFrameRoot(),f=c[0],v=c[1];if(f&&v){var x=f.split(`
`),k=v.split(`
`);for(o=s=0;s<x.length&&!x[s].includes("DetermineComponentFrameRoot");)s++;for(;o<k.length&&!k[o].includes("DetermineComponentFrameRoot");)o++;if(s===x.length||o===k.length)for(s=x.length-1,o=k.length-1;1<=s&&0<=o&&x[s]!==k[o];)o--;for(;1<=s&&0<=o;s--,o--)if(x[s]!==k[o]){if(s!==1||o!==1)do if(s--,o--,0>o||x[s]!==k[o]){var L=`
`+x[s].replace(" at new "," at ");return e.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",e.displayName)),L}while(1<=s&&0<=o);break}}}finally{xa=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?vt(a):""}function di(e,t){switch(e.tag){case 26:case 27:case 5:return vt(e.type);case 16:return vt("Lazy");case 13:return e.child!==t&&t!==null?vt("Suspense Fallback"):vt("Suspense");case 19:return vt("SuspenseList");case 0:case 15:return un(e.type,!1);case 11:return un(e.type.render,!1);case 1:return un(e.type,!0);case 31:return vt("Activity");default:return""}}function wa(e){try{var t="",a=null;do t+=di(e,a),a=e,e=e.return;while(e);return t}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var Ba=Object.prototype.hasOwnProperty,ca=i.unstable_scheduleCallback,qa=i.unstable_cancelCallback,bs=i.unstable_shouldYield,xs=i.unstable_requestPaint,ht=i.unstable_now,Wt=i.unstable_getCurrentPriorityLevel,Ha=i.unstable_ImmediatePriority,ka=i.unstable_UserBlockingPriority,M=i.unstable_NormalPriority,he=i.unstable_LowPriority,ie=i.unstable_IdlePriority,be=i.log,Ae=i.unstable_setDisableYieldValue,Te=null,J=null;function _e(e){if(typeof be=="function"&&Ae(e),J&&typeof J.setStrictMode=="function")try{J.setStrictMode(Te,e)}catch{}}var xe=Math.clz32?Math.clz32:rt,Et=Math.log,ot=Math.LN2;function rt(e){return e>>>=0,e===0?32:31-(Et(e)/ot|0)|0}var He=256,De=262144,st=4194304;function et(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ua(e,t,a){var s=e.pendingLanes;if(s===0)return 0;var o=0,c=e.suspendedLanes,f=e.pingedLanes;e=e.warmLanes;var v=s&134217727;return v!==0?(s=v&~c,s!==0?o=et(s):(f&=v,f!==0?o=et(f):a||(a=v&~e,a!==0&&(o=et(a))))):(v=s&~c,v!==0?o=et(v):f!==0?o=et(f):a||(a=s&~e,a!==0&&(o=et(a)))),o===0?0:t!==0&&t!==o&&(t&c)===0&&(c=o&-o,a=t&-t,c>=a||c===32&&(a&4194048)!==0)?t:o}function da(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function dn(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _a(){var e=st;return st<<=1,(st&62914560)===0&&(st=4194304),e}function Ft(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Vt(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function In(e,t,a,s,o,c){var f=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var v=e.entanglements,x=e.expirationTimes,k=e.hiddenUpdates;for(a=f&~a;0<a;){var L=31-xe(a),$=1<<L;v[L]=0,x[L]=-1;var R=k[L];if(R!==null)for(k[L]=null,L=0;L<R.length;L++){var z=R[L];z!==null&&(z.lane&=-536870913)}a&=~$}s!==0&&$a(e,s,0),c!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=c&~(f&~t))}function $a(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-xe(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|a&261930}function Ga(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var s=31-xe(a),o=1<<s;o&t|e[s]&t&&(e[s]|=t),a&=~o}}function Nt(e,t){var a=t&-t;return a=(a&42)!==0?1:Yt(a),(a&(e.suspendedLanes|t))!==0?0:a}function Yt(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ht(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Tt(){var e=Q.p;return e!==0?e:(e=window.event,e===void 0?32:am(e.type))}function Pe(e,t){var a=Q.p;try{return Q.p=e,t()}finally{Q.p=a}}var We=Math.random().toString(36).slice(2),lt="__reactFiber$"+We,ft="__reactProps$"+We,Ra="__reactContainer$"+We,Xn="__reactEvents$"+We,Yl="__reactListeners$"+We,Kl="__reactHandles$"+We,yr="__reactResources$"+We,Qn="__reactMarker$"+We;function hi(e){delete e[lt],delete e[ft],delete e[Xn],delete e[Yl],delete e[Kl]}function hn(e){var t=e[lt];if(t)return t;for(var a=e.parentNode;a;){if(t=a[Ra]||a[lt]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=Hf(e);e!==null;){if(a=e[lt])return a;e=Hf(e)}return t}e=a,a=e.parentNode}return null}function fn(e){if(e=e[lt]||e[Ra]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Jn(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(l(33))}function mn(e){var t=e[yr];return t||(t=e[yr]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function mt(e){e[Qn]=!0}var fi=new Set,O={};function Z(e,t){ye(e,t),ye(e+"Capture",t)}function ye(e,t){for(O[e]=t,e=0;e<t.length;e++)fi.add(t[e])}var Ve=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),gt={},Va={};function gn(e){return Ba.call(Va,e)?!0:Ba.call(gt,e)?!1:Ve.test(e)?Va[e]=!0:(gt[e]=!0,!1)}function Zn(e,t,a){if(gn(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function pn(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function Sa(e,t,a,s){if(s===null)e.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+s)}}function $t(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Il(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function vr(e,t,a){var s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var o=s.get,c=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(f){a=""+f,c.call(this,f)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(f){a=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function yn(e){if(!e._valueTracker){var t=Il(e)?"checked":"value";e._valueTracker=vr(e,t,""+e[t])}}function Ct(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),s="";return e&&(s=Il(e)?e.checked?"true":"false":e.value),e=s,e!==a?(t.setValue(e),!0):!1}function Rt(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Xl=/[\n"\\]/g;function Kt(e){return e.replace(Xl,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function mi(e,t,a,s,o,c,f,v){e.name="",f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"?e.type=f:e.removeAttribute("type"),t!=null?f==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+$t(t)):e.value!==""+$t(t)&&(e.value=""+$t(t)):f!=="submit"&&f!=="reset"||e.removeAttribute("value"),t!=null?gi(e,f,$t(t)):a!=null?gi(e,f,$t(a)):s!=null&&e.removeAttribute("value"),o==null&&c!=null&&(e.defaultChecked=!!c),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.name=""+$t(v):e.removeAttribute("name")}function br(e,t,a,s,o,c,f,v){if(c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"&&(e.type=c),t!=null||a!=null){if(!(c!=="submit"&&c!=="reset"||t!=null)){yn(e);return}a=a!=null?""+$t(a):"",t=t!=null?""+$t(t):a,v||t===e.value||(e.value=t),e.defaultValue=t}s=s??o,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=v?e.checked:!!s,e.defaultChecked=!!s,f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.name=f),yn(e)}function gi(e,t,a){t==="number"&&Rt(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function ee(e,t,a,s){if(e=e.options,t){t={};for(var o=0;o<a.length;o++)t["$"+a[o]]=!0;for(a=0;a<e.length;a++)o=t.hasOwnProperty("$"+e[a].value),e[a].selected!==o&&(e[a].selected=o),o&&s&&(e[a].defaultSelected=!0)}else{for(a=""+$t(a),t=null,o=0;o<e.length;o++){if(e[o].value===a){e[o].selected=!0,s&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Nu(e,t,a){if(t!=null&&(t=""+$t(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+$t(a):""}function Tu(e,t,a,s){if(t==null){if(s!=null){if(a!=null)throw Error(l(92));if(Ne(s)){if(1<s.length)throw Error(l(93));s=s[0]}a=s}a==null&&(a=""),t=a}a=$t(t),e.defaultValue=a,s=e.textContent,s===a&&s!==""&&s!==null&&(e.value=s),yn(e)}function ws(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var dg=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Au(e,t,a){var s=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,a):typeof a!="number"||a===0||dg.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function Ou(e,t,a){if(t!=null&&typeof t!="object")throw Error(l(62));if(e=e.style,a!=null){for(var s in a)!a.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var o in t)s=t[o],t.hasOwnProperty(o)&&a[o]!==s&&Au(e,o,s)}else for(var c in t)t.hasOwnProperty(c)&&Au(e,c,t[c])}function Ql(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xr(e){return fg.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Ya(){}var Jl=null;function Zl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var _s=null,Ss=null;function Cu(e){var t=fn(e);if(t&&(e=t.stateNode)){var a=e[ft]||null;e:switch(e=t.stateNode,t.type){case"input":if(mi(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Kt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var s=a[t];if(s!==e&&s.form===e.form){var o=s[ft]||null;if(!o)throw Error(l(90));mi(s,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<a.length;t++)s=a[t],s.form===e.form&&Ct(s)}break e;case"textarea":Nu(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&ee(e,!!a.multiple,t,!1)}}}var Pl=!1;function ku(e,t,a){if(Pl)return e(t,a);Pl=!0;try{var s=e(t);return s}finally{if(Pl=!1,(_s!==null||Ss!==null)&&(ll(),_s&&(t=_s,e=Ss,Ss=_s=null,Cu(t),e)))for(t=0;t<e.length;t++)Cu(e[t])}}function pi(e,t){var a=e.stateNode;if(a===null)return null;var s=a[ft]||null;if(s===null)return null;a=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(l(231,t,typeof a));return a}var Ka=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wl=!1;if(Ka)try{var yi={};Object.defineProperty(yi,"passive",{get:function(){Wl=!0}}),window.addEventListener("test",yi,yi),window.removeEventListener("test",yi,yi)}catch{Wl=!1}var vn=null,Fl=null,wr=null;function Ru(){if(wr)return wr;var e,t=Fl,a=t.length,s,o="value"in vn?vn.value:vn.textContent,c=o.length;for(e=0;e<a&&t[e]===o[e];e++);var f=a-e;for(s=1;s<=f&&t[a-s]===o[c-s];s++);return wr=o.slice(e,1<s?1-s:void 0)}function _r(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Sr(){return!0}function Du(){return!1}function It(e){function t(a,s,o,c,f){this._reactName=a,this._targetInst=o,this.type=s,this.nativeEvent=c,this.target=f,this.currentTarget=null;for(var v in e)e.hasOwnProperty(v)&&(a=e[v],this[v]=a?a(c):c[v]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?Sr:Du,this.isPropagationStopped=Du,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Sr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Sr)},persist:function(){},isPersistent:Sr}),t}var Pn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jr=It(Pn),vi=j({},Pn,{view:0,detail:0}),mg=It(vi),eo,to,bi,Er=j({},vi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:no,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==bi&&(bi&&e.type==="mousemove"?(eo=e.screenX-bi.screenX,to=e.screenY-bi.screenY):to=eo=0,bi=e),eo)},movementY:function(e){return"movementY"in e?e.movementY:to}}),Uu=It(Er),gg=j({},Er,{dataTransfer:0}),pg=It(gg),yg=j({},vi,{relatedTarget:0}),ao=It(yg),vg=j({},Pn,{animationName:0,elapsedTime:0,pseudoElement:0}),bg=It(vg),xg=j({},Pn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wg=It(xg),_g=j({},Pn,{data:0}),zu=It(_g),Sg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Eg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ng(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Eg[e])?!!t[e]:!1}function no(){return Ng}var Tg=j({},vi,{key:function(e){if(e.key){var t=Sg[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=_r(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?jg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:no,charCode:function(e){return e.type==="keypress"?_r(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?_r(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ag=It(Tg),Og=j({},Er,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mu=It(Og),Cg=j({},vi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:no}),kg=It(Cg),Rg=j({},Pn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dg=It(Rg),Ug=j({},Er,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),zg=It(Ug),Mg=j({},Pn,{newState:0,oldState:0}),Lg=It(Mg),Bg=[9,13,27,32],so=Ka&&"CompositionEvent"in window,xi=null;Ka&&"documentMode"in document&&(xi=document.documentMode);var qg=Ka&&"TextEvent"in window&&!xi,Lu=Ka&&(!so||xi&&8<xi&&11>=xi),Bu=" ",qu=!1;function Hu(e,t){switch(e){case"keyup":return Bg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $u(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var js=!1;function Hg(e,t){switch(e){case"compositionend":return $u(t);case"keypress":return t.which!==32?null:(qu=!0,Bu);case"textInput":return e=t.data,e===Bu&&qu?null:e;default:return null}}function $g(e,t){if(js)return e==="compositionend"||!so&&Hu(e,t)?(e=Ru(),wr=Fl=vn=null,js=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Lu&&t.locale!=="ko"?null:t.data;default:return null}}var Gg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Gg[e.type]:t==="textarea"}function Vu(e,t,a,s){_s?Ss?Ss.push(s):Ss=[s]:_s=s,t=ml(t,"onChange"),0<t.length&&(a=new jr("onChange","change",null,a,s),e.push({event:a,listeners:t}))}var wi=null,_i=null;function Vg(e){Nf(e,0)}function Nr(e){var t=Jn(e);if(Ct(t))return e}function Yu(e,t){if(e==="change")return t}var Ku=!1;if(Ka){var io;if(Ka){var ro="oninput"in document;if(!ro){var Iu=document.createElement("div");Iu.setAttribute("oninput","return;"),ro=typeof Iu.oninput=="function"}io=ro}else io=!1;Ku=io&&(!document.documentMode||9<document.documentMode)}function Xu(){wi&&(wi.detachEvent("onpropertychange",Qu),_i=wi=null)}function Qu(e){if(e.propertyName==="value"&&Nr(_i)){var t=[];Vu(t,_i,e,Zl(e)),ku(Vg,t)}}function Yg(e,t,a){e==="focusin"?(Xu(),wi=t,_i=a,wi.attachEvent("onpropertychange",Qu)):e==="focusout"&&Xu()}function Kg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Nr(_i)}function Ig(e,t){if(e==="click")return Nr(t)}function Xg(e,t){if(e==="input"||e==="change")return Nr(t)}function Qg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ea=typeof Object.is=="function"?Object.is:Qg;function Si(e,t){if(ea(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(s=0;s<a.length;s++){var o=a[s];if(!Ba.call(t,o)||!ea(e[o],t[o]))return!1}return!0}function Ju(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Zu(e,t){var a=Ju(e);e=0;for(var s;a;){if(a.nodeType===3){if(s=e+a.textContent.length,e<=t&&s>=t)return{node:a,offset:t-e};e=s}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ju(a)}}function Pu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Pu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Wu(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Rt(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=Rt(e.document)}return t}function lo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Jg=Ka&&"documentMode"in document&&11>=document.documentMode,Es=null,oo=null,ji=null,co=!1;function Fu(e,t,a){var s=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;co||Es==null||Es!==Rt(s)||(s=Es,"selectionStart"in s&&lo(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),ji&&Si(ji,s)||(ji=s,s=ml(oo,"onSelect"),0<s.length&&(t=new jr("onSelect","select",null,t,a),e.push({event:t,listeners:s}),t.target=Es)))}function Wn(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var Ns={animationend:Wn("Animation","AnimationEnd"),animationiteration:Wn("Animation","AnimationIteration"),animationstart:Wn("Animation","AnimationStart"),transitionrun:Wn("Transition","TransitionRun"),transitionstart:Wn("Transition","TransitionStart"),transitioncancel:Wn("Transition","TransitionCancel"),transitionend:Wn("Transition","TransitionEnd")},uo={},ed={};Ka&&(ed=document.createElement("div").style,"AnimationEvent"in window||(delete Ns.animationend.animation,delete Ns.animationiteration.animation,delete Ns.animationstart.animation),"TransitionEvent"in window||delete Ns.transitionend.transition);function Fn(e){if(uo[e])return uo[e];if(!Ns[e])return e;var t=Ns[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in ed)return uo[e]=t[a];return e}var td=Fn("animationend"),ad=Fn("animationiteration"),nd=Fn("animationstart"),Zg=Fn("transitionrun"),Pg=Fn("transitionstart"),Wg=Fn("transitioncancel"),sd=Fn("transitionend"),id=new Map,ho="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ho.push("scrollEnd");function ja(e,t){id.set(e,t),Z(t,[e])}var Tr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},ha=[],Ts=0,fo=0;function Ar(){for(var e=Ts,t=fo=Ts=0;t<e;){var a=ha[t];ha[t++]=null;var s=ha[t];ha[t++]=null;var o=ha[t];ha[t++]=null;var c=ha[t];if(ha[t++]=null,s!==null&&o!==null){var f=s.pending;f===null?o.next=o:(o.next=f.next,f.next=o),s.pending=o}c!==0&&rd(a,o,c)}}function Or(e,t,a,s){ha[Ts++]=e,ha[Ts++]=t,ha[Ts++]=a,ha[Ts++]=s,fo|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function mo(e,t,a,s){return Or(e,t,a,s),Cr(e)}function es(e,t){return Or(e,null,null,t),Cr(e)}function rd(e,t,a){e.lanes|=a;var s=e.alternate;s!==null&&(s.lanes|=a);for(var o=!1,c=e.return;c!==null;)c.childLanes|=a,s=c.alternate,s!==null&&(s.childLanes|=a),c.tag===22&&(e=c.stateNode,e===null||e._visibility&1||(o=!0)),e=c,c=c.return;return e.tag===3?(c=e.stateNode,o&&t!==null&&(o=31-xe(a),e=c.hiddenUpdates,s=e[o],s===null?e[o]=[t]:s.push(t),t.lane=a|536870912),c):null}function Cr(e){if(50<Ii)throw Ii=0,Sc=null,Error(l(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var As={};function Fg(e,t,a,s){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ta(e,t,a,s){return new Fg(e,t,a,s)}function go(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ia(e,t){var a=e.alternate;return a===null?(a=ta(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function ld(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function kr(e,t,a,s,o,c){var f=0;if(s=e,typeof e=="function")go(e)&&(f=1);else if(typeof e=="string")f=sp(e,a,te.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case F:return e=ta(31,a,t,o),e.elementType=F,e.lanes=c,e;case A:return ts(a.children,o,c,t);case D:f=8,o|=24;break;case Y:return e=ta(12,a,t,o|2),e.elementType=Y,e.lanes=c,e;case le:return e=ta(13,a,t,o),e.elementType=le,e.lanes=c,e;case ne:return e=ta(19,a,t,o),e.elementType=ne,e.lanes=c,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case H:f=10;break e;case K:f=9;break e;case I:f=11;break e;case X:f=14;break e;case G:f=16,s=null;break e}f=29,a=Error(l(130,e===null?"null":typeof e,"")),s=null}return t=ta(f,a,t,o),t.elementType=e,t.type=s,t.lanes=c,t}function ts(e,t,a,s){return e=ta(7,e,s,t),e.lanes=a,e}function po(e,t,a){return e=ta(6,e,null,t),e.lanes=a,e}function od(e){var t=ta(18,null,null,0);return t.stateNode=e,t}function yo(e,t,a){return t=ta(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var cd=new WeakMap;function fa(e,t){if(typeof e=="object"&&e!==null){var a=cd.get(e);return a!==void 0?a:(t={value:e,source:t,stack:wa(t)},cd.set(e,t),t)}return{value:e,source:t,stack:wa(t)}}var Os=[],Cs=0,Rr=null,Ei=0,ma=[],ga=0,bn=null,Da=1,Ua="";function Xa(e,t){Os[Cs++]=Ei,Os[Cs++]=Rr,Rr=e,Ei=t}function ud(e,t,a){ma[ga++]=Da,ma[ga++]=Ua,ma[ga++]=bn,bn=e;var s=Da;e=Ua;var o=32-xe(s)-1;s&=~(1<<o),a+=1;var c=32-xe(t)+o;if(30<c){var f=o-o%5;c=(s&(1<<f)-1).toString(32),s>>=f,o-=f,Da=1<<32-xe(t)+o|a<<o|s,Ua=c+e}else Da=1<<c|a<<o|s,Ua=e}function vo(e){e.return!==null&&(Xa(e,1),ud(e,1,0))}function bo(e){for(;e===Rr;)Rr=Os[--Cs],Os[Cs]=null,Ei=Os[--Cs],Os[Cs]=null;for(;e===bn;)bn=ma[--ga],ma[ga]=null,Ua=ma[--ga],ma[ga]=null,Da=ma[--ga],ma[ga]=null}function dd(e,t){ma[ga++]=Da,ma[ga++]=Ua,ma[ga++]=bn,Da=t.id,Ua=t.overflow,bn=e}var Dt=null,at=null,qe=!1,xn=null,pa=!1,xo=Error(l(519));function wn(e){var t=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ni(fa(t,e)),xo}function hd(e){var t=e.stateNode,a=e.type,s=e.memoizedProps;switch(t[lt]=e,t[ft]=s,a){case"dialog":ze("cancel",t),ze("close",t);break;case"iframe":case"object":case"embed":ze("load",t);break;case"video":case"audio":for(a=0;a<Qi.length;a++)ze(Qi[a],t);break;case"source":ze("error",t);break;case"img":case"image":case"link":ze("error",t),ze("load",t);break;case"details":ze("toggle",t);break;case"input":ze("invalid",t),br(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":ze("invalid",t);break;case"textarea":ze("invalid",t),Tu(t,s.value,s.defaultValue,s.children)}a=s.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||s.suppressHydrationWarning===!0||Cf(t.textContent,a)?(s.popover!=null&&(ze("beforetoggle",t),ze("toggle",t)),s.onScroll!=null&&ze("scroll",t),s.onScrollEnd!=null&&ze("scrollend",t),s.onClick!=null&&(t.onclick=Ya),t=!0):t=!1,t||wn(e,!0)}function fd(e){for(Dt=e.return;Dt;)switch(Dt.tag){case 5:case 31:case 13:pa=!1;return;case 27:case 3:pa=!0;return;default:Dt=Dt.return}}function ks(e){if(e!==Dt)return!1;if(!qe)return fd(e),qe=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Bc(e.type,e.memoizedProps)),a=!a),a&&at&&wn(e),fd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));at=qf(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));at=qf(e)}else t===27?(t=at,zn(e.type)?(e=Vc,Vc=null,at=e):at=t):at=Dt?va(e.stateNode.nextSibling):null;return!0}function as(){at=Dt=null,qe=!1}function wo(){var e=xn;return e!==null&&(Zt===null?Zt=e:Zt.push.apply(Zt,e),xn=null),e}function Ni(e){xn===null?xn=[e]:xn.push(e)}var _o=w(null),ns=null,Qa=null;function _n(e,t,a){P(_o,t._currentValue),t._currentValue=a}function Ja(e){e._currentValue=_o.current,B(_o)}function So(e,t,a){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===a)break;e=e.return}}function jo(e,t,a,s){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var c=o.dependencies;if(c!==null){var f=o.child;c=c.firstContext;e:for(;c!==null;){var v=c;c=o;for(var x=0;x<t.length;x++)if(v.context===t[x]){c.lanes|=a,v=c.alternate,v!==null&&(v.lanes|=a),So(c.return,a,e),s||(f=null);break e}c=v.next}}else if(o.tag===18){if(f=o.return,f===null)throw Error(l(341));f.lanes|=a,c=f.alternate,c!==null&&(c.lanes|=a),So(f,a,e),f=null}else f=o.child;if(f!==null)f.return=o;else for(f=o;f!==null;){if(f===e){f=null;break}if(o=f.sibling,o!==null){o.return=f.return,f=o;break}f=f.return}o=f}}function Rs(e,t,a,s){e=null;for(var o=t,c=!1;o!==null;){if(!c){if((o.flags&524288)!==0)c=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var f=o.alternate;if(f===null)throw Error(l(387));if(f=f.memoizedProps,f!==null){var v=o.type;ea(o.pendingProps.value,f.value)||(e!==null?e.push(v):e=[v])}}else if(o===Me.current){if(f=o.alternate,f===null)throw Error(l(387));f.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(Fi):e=[Fi])}o=o.return}e!==null&&jo(t,e,a,s),t.flags|=262144}function Dr(e){for(e=e.firstContext;e!==null;){if(!ea(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ss(e){ns=e,Qa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ut(e){return md(ns,e)}function Ur(e,t){return ns===null&&ss(e),md(e,t)}function md(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},Qa===null){if(e===null)throw Error(l(308));Qa=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Qa=Qa.next=t;return a}var e0=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},t0=i.unstable_scheduleCallback,a0=i.unstable_NormalPriority,bt={$$typeof:H,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Eo(){return{controller:new e0,data:new Map,refCount:0}}function Ti(e){e.refCount--,e.refCount===0&&t0(a0,function(){e.controller.abort()})}var Ai=null,No=0,Ds=0,Us=null;function n0(e,t){if(Ai===null){var a=Ai=[];No=0,Ds=Oc(),Us={status:"pending",value:void 0,then:function(s){a.push(s)}}}return No++,t.then(gd,gd),t}function gd(){if(--No===0&&Ai!==null){Us!==null&&(Us.status="fulfilled");var e=Ai;Ai=null,Ds=0,Us=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function s0(e,t){var a=[],s={status:"pending",value:null,reason:null,then:function(o){a.push(o)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var o=0;o<a.length;o++)(0,a[o])(t)},function(o){for(s.status="rejected",s.reason=o,o=0;o<a.length;o++)(0,a[o])(void 0)}),s}var pd=U.S;U.S=function(e,t){Fh=ht(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&n0(e,t),pd!==null&&pd(e,t)};var is=w(null);function To(){var e=is.current;return e!==null?e:Fe.pooledCache}function zr(e,t){t===null?P(is,is.current):P(is,t.pool)}function yd(){var e=To();return e===null?null:{parent:bt._currentValue,pool:e}}var zs=Error(l(460)),Ao=Error(l(474)),Mr=Error(l(542)),Lr={then:function(){}};function vd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function bd(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(Ya,Ya),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,wd(e),e;default:if(typeof t.status=="string")t.then(Ya,Ya);else{if(e=Fe,e!==null&&100<e.shellSuspendCounter)throw Error(l(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var o=t;o.status="fulfilled",o.value=s}},function(s){if(t.status==="pending"){var o=t;o.status="rejected",o.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,wd(e),e}throw ls=t,zs}}function rs(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ls=a,zs):a}}var ls=null;function xd(){if(ls===null)throw Error(l(459));var e=ls;return ls=null,e}function wd(e){if(e===zs||e===Mr)throw Error(l(483))}var Ms=null,Oi=0;function Br(e){var t=Oi;return Oi+=1,Ms===null&&(Ms=[]),bd(Ms,e,t)}function Ci(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function qr(e,t){throw t.$$typeof===T?Error(l(525)):(e=Object.prototype.toString.call(t),Error(l(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function _d(e){function t(N,_){if(e){var C=N.deletions;C===null?(N.deletions=[_],N.flags|=16):C.push(_)}}function a(N,_){if(!e)return null;for(;_!==null;)t(N,_),_=_.sibling;return null}function s(N){for(var _=new Map;N!==null;)N.key!==null?_.set(N.key,N):_.set(N.index,N),N=N.sibling;return _}function o(N,_){return N=Ia(N,_),N.index=0,N.sibling=null,N}function c(N,_,C){return N.index=C,e?(C=N.alternate,C!==null?(C=C.index,C<_?(N.flags|=67108866,_):C):(N.flags|=67108866,_)):(N.flags|=1048576,_)}function f(N){return e&&N.alternate===null&&(N.flags|=67108866),N}function v(N,_,C,q){return _===null||_.tag!==6?(_=po(C,N.mode,q),_.return=N,_):(_=o(_,C),_.return=N,_)}function x(N,_,C,q){var ce=C.type;return ce===A?L(N,_,C.props.children,q,C.key):_!==null&&(_.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===G&&rs(ce)===_.type)?(_=o(_,C.props),Ci(_,C),_.return=N,_):(_=kr(C.type,C.key,C.props,null,N.mode,q),Ci(_,C),_.return=N,_)}function k(N,_,C,q){return _===null||_.tag!==4||_.stateNode.containerInfo!==C.containerInfo||_.stateNode.implementation!==C.implementation?(_=yo(C,N.mode,q),_.return=N,_):(_=o(_,C.children||[]),_.return=N,_)}function L(N,_,C,q,ce){return _===null||_.tag!==7?(_=ts(C,N.mode,q,ce),_.return=N,_):(_=o(_,C),_.return=N,_)}function $(N,_,C){if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return _=po(""+_,N.mode,C),_.return=N,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case E:return C=kr(_.type,_.key,_.props,null,N.mode,C),Ci(C,_),C.return=N,C;case S:return _=yo(_,N.mode,C),_.return=N,_;case G:return _=rs(_),$(N,_,C)}if(Ne(_)||de(_))return _=ts(_,N.mode,C,null),_.return=N,_;if(typeof _.then=="function")return $(N,Br(_),C);if(_.$$typeof===H)return $(N,Ur(N,_),C);qr(N,_)}return null}function R(N,_,C,q){var ce=_!==null?_.key:null;if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return ce!==null?null:v(N,_,""+C,q);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case E:return C.key===ce?x(N,_,C,q):null;case S:return C.key===ce?k(N,_,C,q):null;case G:return C=rs(C),R(N,_,C,q)}if(Ne(C)||de(C))return ce!==null?null:L(N,_,C,q,null);if(typeof C.then=="function")return R(N,_,Br(C),q);if(C.$$typeof===H)return R(N,_,Ur(N,C),q);qr(N,C)}return null}function z(N,_,C,q,ce){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return N=N.get(C)||null,v(_,N,""+q,ce);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case E:return N=N.get(q.key===null?C:q.key)||null,x(_,N,q,ce);case S:return N=N.get(q.key===null?C:q.key)||null,k(_,N,q,ce);case G:return q=rs(q),z(N,_,C,q,ce)}if(Ne(q)||de(q))return N=N.get(C)||null,L(_,N,q,ce,null);if(typeof q.then=="function")return z(N,_,C,Br(q),ce);if(q.$$typeof===H)return z(N,_,C,Ur(_,q),ce);qr(_,q)}return null}function se(N,_,C,q){for(var ce=null,$e=null,re=_,Re=_=0,Be=null;re!==null&&Re<C.length;Re++){re.index>Re?(Be=re,re=null):Be=re.sibling;var Ge=R(N,re,C[Re],q);if(Ge===null){re===null&&(re=Be);break}e&&re&&Ge.alternate===null&&t(N,re),_=c(Ge,_,Re),$e===null?ce=Ge:$e.sibling=Ge,$e=Ge,re=Be}if(Re===C.length)return a(N,re),qe&&Xa(N,Re),ce;if(re===null){for(;Re<C.length;Re++)re=$(N,C[Re],q),re!==null&&(_=c(re,_,Re),$e===null?ce=re:$e.sibling=re,$e=re);return qe&&Xa(N,Re),ce}for(re=s(re);Re<C.length;Re++)Be=z(re,N,Re,C[Re],q),Be!==null&&(e&&Be.alternate!==null&&re.delete(Be.key===null?Re:Be.key),_=c(Be,_,Re),$e===null?ce=Be:$e.sibling=Be,$e=Be);return e&&re.forEach(function(Hn){return t(N,Hn)}),qe&&Xa(N,Re),ce}function fe(N,_,C,q){if(C==null)throw Error(l(151));for(var ce=null,$e=null,re=_,Re=_=0,Be=null,Ge=C.next();re!==null&&!Ge.done;Re++,Ge=C.next()){re.index>Re?(Be=re,re=null):Be=re.sibling;var Hn=R(N,re,Ge.value,q);if(Hn===null){re===null&&(re=Be);break}e&&re&&Hn.alternate===null&&t(N,re),_=c(Hn,_,Re),$e===null?ce=Hn:$e.sibling=Hn,$e=Hn,re=Be}if(Ge.done)return a(N,re),qe&&Xa(N,Re),ce;if(re===null){for(;!Ge.done;Re++,Ge=C.next())Ge=$(N,Ge.value,q),Ge!==null&&(_=c(Ge,_,Re),$e===null?ce=Ge:$e.sibling=Ge,$e=Ge);return qe&&Xa(N,Re),ce}for(re=s(re);!Ge.done;Re++,Ge=C.next())Ge=z(re,N,Re,Ge.value,q),Ge!==null&&(e&&Ge.alternate!==null&&re.delete(Ge.key===null?Re:Ge.key),_=c(Ge,_,Re),$e===null?ce=Ge:$e.sibling=Ge,$e=Ge);return e&&re.forEach(function(gp){return t(N,gp)}),qe&&Xa(N,Re),ce}function Je(N,_,C,q){if(typeof C=="object"&&C!==null&&C.type===A&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case E:e:{for(var ce=C.key;_!==null;){if(_.key===ce){if(ce=C.type,ce===A){if(_.tag===7){a(N,_.sibling),q=o(_,C.props.children),q.return=N,N=q;break e}}else if(_.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===G&&rs(ce)===_.type){a(N,_.sibling),q=o(_,C.props),Ci(q,C),q.return=N,N=q;break e}a(N,_);break}else t(N,_);_=_.sibling}C.type===A?(q=ts(C.props.children,N.mode,q,C.key),q.return=N,N=q):(q=kr(C.type,C.key,C.props,null,N.mode,q),Ci(q,C),q.return=N,N=q)}return f(N);case S:e:{for(ce=C.key;_!==null;){if(_.key===ce)if(_.tag===4&&_.stateNode.containerInfo===C.containerInfo&&_.stateNode.implementation===C.implementation){a(N,_.sibling),q=o(_,C.children||[]),q.return=N,N=q;break e}else{a(N,_);break}else t(N,_);_=_.sibling}q=yo(C,N.mode,q),q.return=N,N=q}return f(N);case G:return C=rs(C),Je(N,_,C,q)}if(Ne(C))return se(N,_,C,q);if(de(C)){if(ce=de(C),typeof ce!="function")throw Error(l(150));return C=ce.call(C),fe(N,_,C,q)}if(typeof C.then=="function")return Je(N,_,Br(C),q);if(C.$$typeof===H)return Je(N,_,Ur(N,C),q);qr(N,C)}return typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint"?(C=""+C,_!==null&&_.tag===6?(a(N,_.sibling),q=o(_,C),q.return=N,N=q):(a(N,_),q=po(C,N.mode,q),q.return=N,N=q),f(N)):a(N,_)}return function(N,_,C,q){try{Oi=0;var ce=Je(N,_,C,q);return Ms=null,ce}catch(re){if(re===zs||re===Mr)throw re;var $e=ta(29,re,null,N.mode);return $e.lanes=q,$e.return=N,$e}finally{}}}var os=_d(!0),Sd=_d(!1),Sn=!1;function Oo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Co(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function jn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function En(e,t,a){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(Ye&2)!==0){var o=s.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),s.pending=t,t=Cr(e),rd(e,null,a),t}return Or(e,s,t,a),Cr(e)}function ki(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,a|=s,t.lanes=a,Ga(e,a)}}function ko(e,t){var a=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,a===s)){var o=null,c=null;if(a=a.firstBaseUpdate,a!==null){do{var f={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};c===null?o=c=f:c=c.next=f,a=a.next}while(a!==null);c===null?o=c=t:c=c.next=t}else o=c=t;a={baseState:s.baseState,firstBaseUpdate:o,lastBaseUpdate:c,shared:s.shared,callbacks:s.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var Ro=!1;function Ri(){if(Ro){var e=Us;if(e!==null)throw e}}function Di(e,t,a,s){Ro=!1;var o=e.updateQueue;Sn=!1;var c=o.firstBaseUpdate,f=o.lastBaseUpdate,v=o.shared.pending;if(v!==null){o.shared.pending=null;var x=v,k=x.next;x.next=null,f===null?c=k:f.next=k,f=x;var L=e.alternate;L!==null&&(L=L.updateQueue,v=L.lastBaseUpdate,v!==f&&(v===null?L.firstBaseUpdate=k:v.next=k,L.lastBaseUpdate=x))}if(c!==null){var $=o.baseState;f=0,L=k=x=null,v=c;do{var R=v.lane&-536870913,z=R!==v.lane;if(z?(Le&R)===R:(s&R)===R){R!==0&&R===Ds&&(Ro=!0),L!==null&&(L=L.next={lane:0,tag:v.tag,payload:v.payload,callback:null,next:null});e:{var se=e,fe=v;R=t;var Je=a;switch(fe.tag){case 1:if(se=fe.payload,typeof se=="function"){$=se.call(Je,$,R);break e}$=se;break e;case 3:se.flags=se.flags&-65537|128;case 0:if(se=fe.payload,R=typeof se=="function"?se.call(Je,$,R):se,R==null)break e;$=j({},$,R);break e;case 2:Sn=!0}}R=v.callback,R!==null&&(e.flags|=64,z&&(e.flags|=8192),z=o.callbacks,z===null?o.callbacks=[R]:z.push(R))}else z={lane:R,tag:v.tag,payload:v.payload,callback:v.callback,next:null},L===null?(k=L=z,x=$):L=L.next=z,f|=R;if(v=v.next,v===null){if(v=o.shared.pending,v===null)break;z=v,v=z.next,z.next=null,o.lastBaseUpdate=z,o.shared.pending=null}}while(!0);L===null&&(x=$),o.baseState=x,o.firstBaseUpdate=k,o.lastBaseUpdate=L,c===null&&(o.shared.lanes=0),Cn|=f,e.lanes=f,e.memoizedState=$}}function jd(e,t){if(typeof e!="function")throw Error(l(191,e));e.call(t)}function Ed(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)jd(a[e],t)}var Ls=w(null),Hr=w(0);function Nd(e,t){e=sn,P(Hr,e),P(Ls,t),sn=e|t.baseLanes}function Do(){P(Hr,sn),P(Ls,Ls.current)}function Uo(){sn=Hr.current,B(Ls),B(Hr)}var aa=w(null),ya=null;function Nn(e){var t=e.alternate;P(pt,pt.current&1),P(aa,e),ya===null&&(t===null||Ls.current!==null||t.memoizedState!==null)&&(ya=e)}function zo(e){P(pt,pt.current),P(aa,e),ya===null&&(ya=e)}function Td(e){e.tag===22?(P(pt,pt.current),P(aa,e),ya===null&&(ya=e)):Tn()}function Tn(){P(pt,pt.current),P(aa,aa.current)}function na(e){B(aa),ya===e&&(ya=null),B(pt)}var pt=w(0);function $r(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||$c(a)||Gc(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Za=0,ke=null,Xe=null,xt=null,Gr=!1,Bs=!1,cs=!1,Vr=0,Ui=0,qs=null,i0=0;function ct(){throw Error(l(321))}function Mo(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!ea(e[a],t[a]))return!1;return!0}function Lo(e,t,a,s,o,c){return Za=c,ke=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,U.H=e===null||e.memoizedState===null?uh:Wo,cs=!1,c=a(s,o),cs=!1,Bs&&(c=Od(t,a,s,o)),Ad(e),c}function Ad(e){U.H=Li;var t=Xe!==null&&Xe.next!==null;if(Za=0,xt=Xe=ke=null,Gr=!1,Ui=0,qs=null,t)throw Error(l(300));e===null||wt||(e=e.dependencies,e!==null&&Dr(e)&&(wt=!0))}function Od(e,t,a,s){ke=e;var o=0;do{if(Bs&&(qs=null),Ui=0,Bs=!1,25<=o)throw Error(l(301));if(o+=1,xt=Xe=null,e.updateQueue!=null){var c=e.updateQueue;c.lastEffect=null,c.events=null,c.stores=null,c.memoCache!=null&&(c.memoCache.index=0)}U.H=dh,c=t(a,s)}while(Bs);return c}function r0(){var e=U.H,t=e.useState()[0];return t=typeof t.then=="function"?zi(t):t,e=e.useState()[0],(Xe!==null?Xe.memoizedState:null)!==e&&(ke.flags|=1024),t}function Bo(){var e=Vr!==0;return Vr=0,e}function qo(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function Ho(e){if(Gr){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Gr=!1}Za=0,xt=Xe=ke=null,Bs=!1,Ui=Vr=0,qs=null}function Gt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?ke.memoizedState=xt=e:xt=xt.next=e,xt}function yt(){if(Xe===null){var e=ke.alternate;e=e!==null?e.memoizedState:null}else e=Xe.next;var t=xt===null?ke.memoizedState:xt.next;if(t!==null)xt=t,Xe=e;else{if(e===null)throw ke.alternate===null?Error(l(467)):Error(l(310));Xe=e,e={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},xt===null?ke.memoizedState=xt=e:xt=xt.next=e}return xt}function Yr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function zi(e){var t=Ui;return Ui+=1,qs===null&&(qs=[]),e=bd(qs,e,t),t=ke,(xt===null?t.memoizedState:xt.next)===null&&(t=t.alternate,U.H=t===null||t.memoizedState===null?uh:Wo),e}function Kr(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return zi(e);if(e.$$typeof===H)return Ut(e)}throw Error(l(438,String(e)))}function $o(e){var t=null,a=ke.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var s=ke.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(o){return o.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Yr(),ke.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),s=0;s<e;s++)a[s]=Se;return t.index++,a}function Pa(e,t){return typeof t=="function"?t(e):t}function Ir(e){var t=yt();return Go(t,Xe,e)}function Go(e,t,a){var s=e.queue;if(s===null)throw Error(l(311));s.lastRenderedReducer=a;var o=e.baseQueue,c=s.pending;if(c!==null){if(o!==null){var f=o.next;o.next=c.next,c.next=f}t.baseQueue=o=c,s.pending=null}if(c=e.baseState,o===null)e.memoizedState=c;else{t=o.next;var v=f=null,x=null,k=t,L=!1;do{var $=k.lane&-536870913;if($!==k.lane?(Le&$)===$:(Za&$)===$){var R=k.revertLane;if(R===0)x!==null&&(x=x.next={lane:0,revertLane:0,gesture:null,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null}),$===Ds&&(L=!0);else if((Za&R)===R){k=k.next,R===Ds&&(L=!0);continue}else $={lane:0,revertLane:k.revertLane,gesture:null,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null},x===null?(v=x=$,f=c):x=x.next=$,ke.lanes|=R,Cn|=R;$=k.action,cs&&a(c,$),c=k.hasEagerState?k.eagerState:a(c,$)}else R={lane:$,revertLane:k.revertLane,gesture:k.gesture,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null},x===null?(v=x=R,f=c):x=x.next=R,ke.lanes|=$,Cn|=$;k=k.next}while(k!==null&&k!==t);if(x===null?f=c:x.next=v,!ea(c,e.memoizedState)&&(wt=!0,L&&(a=Us,a!==null)))throw a;e.memoizedState=c,e.baseState=f,e.baseQueue=x,s.lastRenderedState=c}return o===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function Vo(e){var t=yt(),a=t.queue;if(a===null)throw Error(l(311));a.lastRenderedReducer=e;var s=a.dispatch,o=a.pending,c=t.memoizedState;if(o!==null){a.pending=null;var f=o=o.next;do c=e(c,f.action),f=f.next;while(f!==o);ea(c,t.memoizedState)||(wt=!0),t.memoizedState=c,t.baseQueue===null&&(t.baseState=c),a.lastRenderedState=c}return[c,s]}function Cd(e,t,a){var s=ke,o=yt(),c=qe;if(c){if(a===void 0)throw Error(l(407));a=a()}else a=t();var f=!ea((Xe||o).memoizedState,a);if(f&&(o.memoizedState=a,wt=!0),o=o.queue,Io(Dd.bind(null,s,o,e),[e]),o.getSnapshot!==t||f||xt!==null&&xt.memoizedState.tag&1){if(s.flags|=2048,Hs(9,{destroy:void 0},Rd.bind(null,s,o,a,t),null),Fe===null)throw Error(l(349));c||(Za&127)!==0||kd(s,t,a)}return a}function kd(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=ke.updateQueue,t===null?(t=Yr(),ke.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Rd(e,t,a,s){t.value=a,t.getSnapshot=s,Ud(t)&&zd(e)}function Dd(e,t,a){return a(function(){Ud(t)&&zd(e)})}function Ud(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!ea(e,a)}catch{return!0}}function zd(e){var t=es(e,2);t!==null&&Pt(t,e,2)}function Yo(e){var t=Gt();if(typeof e=="function"){var a=e;if(e=a(),cs){_e(!0);try{a()}finally{_e(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:e},t}function Md(e,t,a,s){return e.baseState=a,Go(e,Xe,typeof s=="function"?s:Pa)}function l0(e,t,a,s,o){if(Jr(e))throw Error(l(485));if(e=t.action,e!==null){var c={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(f){c.listeners.push(f)}};U.T!==null?a(!0):c.isTransition=!1,s(c),a=t.pending,a===null?(c.next=t.pending=c,Ld(t,c)):(c.next=a.next,t.pending=a.next=c)}}function Ld(e,t){var a=t.action,s=t.payload,o=e.state;if(t.isTransition){var c=U.T,f={};U.T=f;try{var v=a(o,s),x=U.S;x!==null&&x(f,v),Bd(e,t,v)}catch(k){Ko(e,t,k)}finally{c!==null&&f.types!==null&&(c.types=f.types),U.T=c}}else try{c=a(o,s),Bd(e,t,c)}catch(k){Ko(e,t,k)}}function Bd(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(s){qd(e,t,s)},function(s){return Ko(e,t,s)}):qd(e,t,a)}function qd(e,t,a){t.status="fulfilled",t.value=a,Hd(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,Ld(e,a)))}function Ko(e,t,a){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=a,Hd(t),t=t.next;while(t!==s)}e.action=null}function Hd(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function $d(e,t){return t}function Gd(e,t){if(qe){var a=Fe.formState;if(a!==null){e:{var s=ke;if(qe){if(at){t:{for(var o=at,c=pa;o.nodeType!==8;){if(!c){o=null;break t}if(o=va(o.nextSibling),o===null){o=null;break t}}c=o.data,o=c==="F!"||c==="F"?o:null}if(o){at=va(o.nextSibling),s=o.data==="F!";break e}}wn(s)}s=!1}s&&(t=a[0])}}return a=Gt(),a.memoizedState=a.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$d,lastRenderedState:t},a.queue=s,a=lh.bind(null,ke,s),s.dispatch=a,s=Yo(!1),c=Po.bind(null,ke,!1,s.queue),s=Gt(),o={state:t,dispatch:null,action:e,pending:null},s.queue=o,a=l0.bind(null,ke,o,c,a),o.dispatch=a,s.memoizedState=e,[t,a,!1]}function Vd(e){var t=yt();return Yd(t,Xe,e)}function Yd(e,t,a){if(t=Go(e,t,$d)[0],e=Ir(Pa)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=zi(t)}catch(f){throw f===zs?Mr:f}else s=t;t=yt();var o=t.queue,c=o.dispatch;return a!==t.memoizedState&&(ke.flags|=2048,Hs(9,{destroy:void 0},o0.bind(null,o,a),null)),[s,c,e]}function o0(e,t){e.action=t}function Kd(e){var t=yt(),a=Xe;if(a!==null)return Yd(t,a,e);yt(),t=t.memoizedState,a=yt();var s=a.queue.dispatch;return a.memoizedState=e,[t,s,!1]}function Hs(e,t,a,s){return e={tag:e,create:a,deps:s,inst:t,next:null},t=ke.updateQueue,t===null&&(t=Yr(),ke.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(s=a.next,a.next=e,e.next=s,t.lastEffect=e),e}function Id(){return yt().memoizedState}function Xr(e,t,a,s){var o=Gt();ke.flags|=e,o.memoizedState=Hs(1|t,{destroy:void 0},a,s===void 0?null:s)}function Qr(e,t,a,s){var o=yt();s=s===void 0?null:s;var c=o.memoizedState.inst;Xe!==null&&s!==null&&Mo(s,Xe.memoizedState.deps)?o.memoizedState=Hs(t,c,a,s):(ke.flags|=e,o.memoizedState=Hs(1|t,c,a,s))}function Xd(e,t){Xr(8390656,8,e,t)}function Io(e,t){Qr(2048,8,e,t)}function c0(e){ke.flags|=4;var t=ke.updateQueue;if(t===null)t=Yr(),ke.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function Qd(e){var t=yt().memoizedState;return c0({ref:t,nextImpl:e}),function(){if((Ye&2)!==0)throw Error(l(440));return t.impl.apply(void 0,arguments)}}function Jd(e,t){return Qr(4,2,e,t)}function Zd(e,t){return Qr(4,4,e,t)}function Pd(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Wd(e,t,a){a=a!=null?a.concat([e]):null,Qr(4,4,Pd.bind(null,t,e),a)}function Xo(){}function Fd(e,t){var a=yt();t=t===void 0?null:t;var s=a.memoizedState;return t!==null&&Mo(t,s[1])?s[0]:(a.memoizedState=[e,t],e)}function eh(e,t){var a=yt();t=t===void 0?null:t;var s=a.memoizedState;if(t!==null&&Mo(t,s[1]))return s[0];if(s=e(),cs){_e(!0);try{e()}finally{_e(!1)}}return a.memoizedState=[s,t],s}function Qo(e,t,a){return a===void 0||(Za&1073741824)!==0&&(Le&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=tf(),ke.lanes|=e,Cn|=e,a)}function th(e,t,a,s){return ea(a,t)?a:Ls.current!==null?(e=Qo(e,a,s),ea(e,t)||(wt=!0),e):(Za&42)===0||(Za&1073741824)!==0&&(Le&261930)===0?(wt=!0,e.memoizedState=a):(e=tf(),ke.lanes|=e,Cn|=e,t)}function ah(e,t,a,s,o){var c=Q.p;Q.p=c!==0&&8>c?c:8;var f=U.T,v={};U.T=v,Po(e,!1,t,a);try{var x=o(),k=U.S;if(k!==null&&k(v,x),x!==null&&typeof x=="object"&&typeof x.then=="function"){var L=s0(x,s);Mi(e,t,L,ra(e))}else Mi(e,t,s,ra(e))}catch($){Mi(e,t,{then:function(){},status:"rejected",reason:$},ra())}finally{Q.p=c,f!==null&&v.types!==null&&(f.types=v.types),U.T=f}}function u0(){}function Jo(e,t,a,s){if(e.tag!==5)throw Error(l(476));var o=nh(e).queue;ah(e,o,t,ae,a===null?u0:function(){return sh(e),a(s)})}function nh(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:ae},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function sh(e){var t=nh(e);t.next===null&&(t=e.alternate.memoizedState),Mi(e,t.next.queue,{},ra())}function Zo(){return Ut(Fi)}function ih(){return yt().memoizedState}function rh(){return yt().memoizedState}function d0(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=ra();e=jn(a);var s=En(t,e,a);s!==null&&(Pt(s,t,a),ki(s,t,a)),t={cache:Eo()},e.payload=t;return}t=t.return}}function h0(e,t,a){var s=ra();a={lane:s,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Jr(e)?oh(t,a):(a=mo(e,t,a,s),a!==null&&(Pt(a,e,s),ch(a,t,s)))}function lh(e,t,a){var s=ra();Mi(e,t,a,s)}function Mi(e,t,a,s){var o={lane:s,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Jr(e))oh(t,o);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=t.lastRenderedReducer,c!==null))try{var f=t.lastRenderedState,v=c(f,a);if(o.hasEagerState=!0,o.eagerState=v,ea(v,f))return Or(e,t,o,0),Fe===null&&Ar(),!1}catch{}finally{}if(a=mo(e,t,o,s),a!==null)return Pt(a,e,s),ch(a,t,s),!0}return!1}function Po(e,t,a,s){if(s={lane:2,revertLane:Oc(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Jr(e)){if(t)throw Error(l(479))}else t=mo(e,a,s,2),t!==null&&Pt(t,e,2)}function Jr(e){var t=e.alternate;return e===ke||t!==null&&t===ke}function oh(e,t){Bs=Gr=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function ch(e,t,a){if((a&4194048)!==0){var s=t.lanes;s&=e.pendingLanes,a|=s,t.lanes=a,Ga(e,a)}}var Li={readContext:Ut,use:Kr,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useLayoutEffect:ct,useInsertionEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useSyncExternalStore:ct,useId:ct,useHostTransitionStatus:ct,useFormState:ct,useActionState:ct,useOptimistic:ct,useMemoCache:ct,useCacheRefresh:ct};Li.useEffectEvent=ct;var uh={readContext:Ut,use:Kr,useCallback:function(e,t){return Gt().memoizedState=[e,t===void 0?null:t],e},useContext:Ut,useEffect:Xd,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,Xr(4194308,4,Pd.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Xr(4194308,4,e,t)},useInsertionEffect:function(e,t){Xr(4,2,e,t)},useMemo:function(e,t){var a=Gt();t=t===void 0?null:t;var s=e();if(cs){_e(!0);try{e()}finally{_e(!1)}}return a.memoizedState=[s,t],s},useReducer:function(e,t,a){var s=Gt();if(a!==void 0){var o=a(t);if(cs){_e(!0);try{a(t)}finally{_e(!1)}}}else o=t;return s.memoizedState=s.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},s.queue=e,e=e.dispatch=h0.bind(null,ke,e),[s.memoizedState,e]},useRef:function(e){var t=Gt();return e={current:e},t.memoizedState=e},useState:function(e){e=Yo(e);var t=e.queue,a=lh.bind(null,ke,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:Xo,useDeferredValue:function(e,t){var a=Gt();return Qo(a,e,t)},useTransition:function(){var e=Yo(!1);return e=ah.bind(null,ke,e.queue,!0,!1),Gt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var s=ke,o=Gt();if(qe){if(a===void 0)throw Error(l(407));a=a()}else{if(a=t(),Fe===null)throw Error(l(349));(Le&127)!==0||kd(s,t,a)}o.memoizedState=a;var c={value:a,getSnapshot:t};return o.queue=c,Xd(Dd.bind(null,s,c,e),[e]),s.flags|=2048,Hs(9,{destroy:void 0},Rd.bind(null,s,c,a,t),null),a},useId:function(){var e=Gt(),t=Fe.identifierPrefix;if(qe){var a=Ua,s=Da;a=(s&~(1<<32-xe(s)-1)).toString(32)+a,t="_"+t+"R_"+a,a=Vr++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=i0++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Zo,useFormState:Gd,useActionState:Gd,useOptimistic:function(e){var t=Gt();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Po.bind(null,ke,!0,a),a.dispatch=t,[e,t]},useMemoCache:$o,useCacheRefresh:function(){return Gt().memoizedState=d0.bind(null,ke)},useEffectEvent:function(e){var t=Gt(),a={impl:e};return t.memoizedState=a,function(){if((Ye&2)!==0)throw Error(l(440));return a.impl.apply(void 0,arguments)}}},Wo={readContext:Ut,use:Kr,useCallback:Fd,useContext:Ut,useEffect:Io,useImperativeHandle:Wd,useInsertionEffect:Jd,useLayoutEffect:Zd,useMemo:eh,useReducer:Ir,useRef:Id,useState:function(){return Ir(Pa)},useDebugValue:Xo,useDeferredValue:function(e,t){var a=yt();return th(a,Xe.memoizedState,e,t)},useTransition:function(){var e=Ir(Pa)[0],t=yt().memoizedState;return[typeof e=="boolean"?e:zi(e),t]},useSyncExternalStore:Cd,useId:ih,useHostTransitionStatus:Zo,useFormState:Vd,useActionState:Vd,useOptimistic:function(e,t){var a=yt();return Md(a,Xe,e,t)},useMemoCache:$o,useCacheRefresh:rh};Wo.useEffectEvent=Qd;var dh={readContext:Ut,use:Kr,useCallback:Fd,useContext:Ut,useEffect:Io,useImperativeHandle:Wd,useInsertionEffect:Jd,useLayoutEffect:Zd,useMemo:eh,useReducer:Vo,useRef:Id,useState:function(){return Vo(Pa)},useDebugValue:Xo,useDeferredValue:function(e,t){var a=yt();return Xe===null?Qo(a,e,t):th(a,Xe.memoizedState,e,t)},useTransition:function(){var e=Vo(Pa)[0],t=yt().memoizedState;return[typeof e=="boolean"?e:zi(e),t]},useSyncExternalStore:Cd,useId:ih,useHostTransitionStatus:Zo,useFormState:Kd,useActionState:Kd,useOptimistic:function(e,t){var a=yt();return Xe!==null?Md(a,Xe,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:$o,useCacheRefresh:rh};dh.useEffectEvent=Qd;function Fo(e,t,a,s){t=e.memoizedState,a=a(s,t),a=a==null?t:j({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var ec={enqueueSetState:function(e,t,a){e=e._reactInternals;var s=ra(),o=jn(s);o.payload=t,a!=null&&(o.callback=a),t=En(e,o,s),t!==null&&(Pt(t,e,s),ki(t,e,s))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var s=ra(),o=jn(s);o.tag=1,o.payload=t,a!=null&&(o.callback=a),t=En(e,o,s),t!==null&&(Pt(t,e,s),ki(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=ra(),s=jn(a);s.tag=2,t!=null&&(s.callback=t),t=En(e,s,a),t!==null&&(Pt(t,e,a),ki(t,e,a))}};function hh(e,t,a,s,o,c,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,c,f):t.prototype&&t.prototype.isPureReactComponent?!Si(a,s)||!Si(o,c):!0}function fh(e,t,a,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,s),t.state!==e&&ec.enqueueReplaceState(t,t.state,null)}function us(e,t){var a=t;if("ref"in t){a={};for(var s in t)s!=="ref"&&(a[s]=t[s])}if(e=e.defaultProps){a===t&&(a=j({},a));for(var o in e)a[o]===void 0&&(a[o]=e[o])}return a}function mh(e){Tr(e)}function gh(e){console.error(e)}function ph(e){Tr(e)}function Zr(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function yh(e,t,a){try{var s=e.onCaughtError;s(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function tc(e,t,a){return a=jn(a),a.tag=3,a.payload={element:null},a.callback=function(){Zr(e,t)},a}function vh(e){return e=jn(e),e.tag=3,e}function bh(e,t,a,s){var o=a.type.getDerivedStateFromError;if(typeof o=="function"){var c=s.value;e.payload=function(){return o(c)},e.callback=function(){yh(t,a,s)}}var f=a.stateNode;f!==null&&typeof f.componentDidCatch=="function"&&(e.callback=function(){yh(t,a,s),typeof o!="function"&&(kn===null?kn=new Set([this]):kn.add(this));var v=s.stack;this.componentDidCatch(s.value,{componentStack:v!==null?v:""})})}function f0(e,t,a,s,o){if(a.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=a.alternate,t!==null&&Rs(t,a,o,!0),a=aa.current,a!==null){switch(a.tag){case 31:case 13:return ya===null?ol():a.alternate===null&&ut===0&&(ut=3),a.flags&=-257,a.flags|=65536,a.lanes=o,s===Lr?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([s]):t.add(s),Nc(e,s,o)),!1;case 22:return a.flags|=65536,s===Lr?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([s]):a.add(s)),Nc(e,s,o)),!1}throw Error(l(435,a.tag))}return Nc(e,s,o),ol(),!1}if(qe)return t=aa.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=o,s!==xo&&(e=Error(l(422),{cause:s}),Ni(fa(e,a)))):(s!==xo&&(t=Error(l(423),{cause:s}),Ni(fa(t,a))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,s=fa(s,a),o=tc(e.stateNode,s,o),ko(e,o),ut!==4&&(ut=2)),!1;var c=Error(l(520),{cause:s});if(c=fa(c,a),Ki===null?Ki=[c]:Ki.push(c),ut!==4&&(ut=2),t===null)return!0;s=fa(s,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=o&-o,a.lanes|=e,e=tc(a.stateNode,s,e),ko(a,e),!1;case 1:if(t=a.type,c=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||c!==null&&typeof c.componentDidCatch=="function"&&(kn===null||!kn.has(c))))return a.flags|=65536,o&=-o,a.lanes|=o,o=vh(o),bh(o,e,a,s),ko(a,o),!1}a=a.return}while(a!==null);return!1}var ac=Error(l(461)),wt=!1;function zt(e,t,a,s){t.child=e===null?Sd(t,null,a,s):os(t,e.child,a,s)}function xh(e,t,a,s,o){a=a.render;var c=t.ref;if("ref"in s){var f={};for(var v in s)v!=="ref"&&(f[v]=s[v])}else f=s;return ss(t),s=Lo(e,t,a,f,c,o),v=Bo(),e!==null&&!wt?(qo(e,t,o),Wa(e,t,o)):(qe&&v&&vo(t),t.flags|=1,zt(e,t,s,o),t.child)}function wh(e,t,a,s,o){if(e===null){var c=a.type;return typeof c=="function"&&!go(c)&&c.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=c,_h(e,t,c,s,o)):(e=kr(a.type,null,s,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(c=e.child,!uc(e,o)){var f=c.memoizedProps;if(a=a.compare,a=a!==null?a:Si,a(f,s)&&e.ref===t.ref)return Wa(e,t,o)}return t.flags|=1,e=Ia(c,s),e.ref=t.ref,e.return=t,t.child=e}function _h(e,t,a,s,o){if(e!==null){var c=e.memoizedProps;if(Si(c,s)&&e.ref===t.ref)if(wt=!1,t.pendingProps=s=c,uc(e,o))(e.flags&131072)!==0&&(wt=!0);else return t.lanes=e.lanes,Wa(e,t,o)}return nc(e,t,a,s,o)}function Sh(e,t,a,s){var o=s.children,c=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if((t.flags&128)!==0){if(c=c!==null?c.baseLanes|a:a,e!==null){for(s=t.child=e.child,o=0;s!==null;)o=o|s.lanes|s.childLanes,s=s.sibling;s=o&~c}else s=0,t.child=null;return jh(e,t,c,a,s)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&zr(t,c!==null?c.cachePool:null),c!==null?Nd(t,c):Do(),Td(t);else return s=t.lanes=536870912,jh(e,t,c!==null?c.baseLanes|a:a,a,s)}else c!==null?(zr(t,c.cachePool),Nd(t,c),Tn(),t.memoizedState=null):(e!==null&&zr(t,null),Do(),Tn());return zt(e,t,o,a),t.child}function Bi(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function jh(e,t,a,s,o){var c=To();return c=c===null?null:{parent:bt._currentValue,pool:c},t.memoizedState={baseLanes:a,cachePool:c},e!==null&&zr(t,null),Do(),Td(t),e!==null&&Rs(e,t,s,!0),t.childLanes=o,null}function Pr(e,t){return t=Fr({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Eh(e,t,a){return os(t,e.child,null,a),e=Pr(t,t.pendingProps),e.flags|=2,na(t),t.memoizedState=null,e}function m0(e,t,a){var s=t.pendingProps,o=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(qe){if(s.mode==="hidden")return e=Pr(t,s),t.lanes=536870912,Bi(null,e);if(zo(t),(e=at)?(e=Bf(e,pa),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:bn!==null?{id:Da,overflow:Ua}:null,retryLane:536870912,hydrationErrors:null},a=od(e),a.return=t,t.child=a,Dt=t,at=null)):e=null,e===null)throw wn(t);return t.lanes=536870912,null}return Pr(t,s)}var c=e.memoizedState;if(c!==null){var f=c.dehydrated;if(zo(t),o)if(t.flags&256)t.flags&=-257,t=Eh(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(l(558));else if(wt||Rs(e,t,a,!1),o=(a&e.childLanes)!==0,wt||o){if(s=Fe,s!==null&&(f=Nt(s,a),f!==0&&f!==c.retryLane))throw c.retryLane=f,es(e,f),Pt(s,e,f),ac;ol(),t=Eh(e,t,a)}else e=c.treeContext,at=va(f.nextSibling),Dt=t,qe=!0,xn=null,pa=!1,e!==null&&dd(t,e),t=Pr(t,s),t.flags|=4096;return t}return e=Ia(e.child,{mode:s.mode,children:s.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Wr(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(l(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function nc(e,t,a,s,o){return ss(t),a=Lo(e,t,a,s,void 0,o),s=Bo(),e!==null&&!wt?(qo(e,t,o),Wa(e,t,o)):(qe&&s&&vo(t),t.flags|=1,zt(e,t,a,o),t.child)}function Nh(e,t,a,s,o,c){return ss(t),t.updateQueue=null,a=Od(t,s,a,o),Ad(e),s=Bo(),e!==null&&!wt?(qo(e,t,c),Wa(e,t,c)):(qe&&s&&vo(t),t.flags|=1,zt(e,t,a,c),t.child)}function Th(e,t,a,s,o){if(ss(t),t.stateNode===null){var c=As,f=a.contextType;typeof f=="object"&&f!==null&&(c=Ut(f)),c=new a(s,c),t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=ec,t.stateNode=c,c._reactInternals=t,c=t.stateNode,c.props=s,c.state=t.memoizedState,c.refs={},Oo(t),f=a.contextType,c.context=typeof f=="object"&&f!==null?Ut(f):As,c.state=t.memoizedState,f=a.getDerivedStateFromProps,typeof f=="function"&&(Fo(t,a,f,s),c.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(f=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),f!==c.state&&ec.enqueueReplaceState(c,c.state,null),Di(t,s,c,o),Ri(),c.state=t.memoizedState),typeof c.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){c=t.stateNode;var v=t.memoizedProps,x=us(a,v);c.props=x;var k=c.context,L=a.contextType;f=As,typeof L=="object"&&L!==null&&(f=Ut(L));var $=a.getDerivedStateFromProps;L=typeof $=="function"||typeof c.getSnapshotBeforeUpdate=="function",v=t.pendingProps!==v,L||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(v||k!==f)&&fh(t,c,s,f),Sn=!1;var R=t.memoizedState;c.state=R,Di(t,s,c,o),Ri(),k=t.memoizedState,v||R!==k||Sn?(typeof $=="function"&&(Fo(t,a,$,s),k=t.memoizedState),(x=Sn||hh(t,a,x,s,R,k,f))?(L||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(t.flags|=4194308)):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=k),c.props=s,c.state=k,c.context=f,s=x):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{c=t.stateNode,Co(e,t),f=t.memoizedProps,L=us(a,f),c.props=L,$=t.pendingProps,R=c.context,k=a.contextType,x=As,typeof k=="object"&&k!==null&&(x=Ut(k)),v=a.getDerivedStateFromProps,(k=typeof v=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(f!==$||R!==x)&&fh(t,c,s,x),Sn=!1,R=t.memoizedState,c.state=R,Di(t,s,c,o),Ri();var z=t.memoizedState;f!==$||R!==z||Sn||e!==null&&e.dependencies!==null&&Dr(e.dependencies)?(typeof v=="function"&&(Fo(t,a,v,s),z=t.memoizedState),(L=Sn||hh(t,a,L,s,R,z,x)||e!==null&&e.dependencies!==null&&Dr(e.dependencies))?(k||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(s,z,x),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(s,z,x)),typeof c.componentDidUpdate=="function"&&(t.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof c.componentDidUpdate!="function"||f===e.memoizedProps&&R===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&R===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=z),c.props=s,c.state=z,c.context=x,s=L):(typeof c.componentDidUpdate!="function"||f===e.memoizedProps&&R===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&R===e.memoizedState||(t.flags|=1024),s=!1)}return c=s,Wr(e,t),s=(t.flags&128)!==0,c||s?(c=t.stateNode,a=s&&typeof a.getDerivedStateFromError!="function"?null:c.render(),t.flags|=1,e!==null&&s?(t.child=os(t,e.child,null,o),t.child=os(t,null,a,o)):zt(e,t,a,o),t.memoizedState=c.state,e=t.child):e=Wa(e,t,o),e}function Ah(e,t,a,s){return as(),t.flags|=256,zt(e,t,a,s),t.child}var sc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ic(e){return{baseLanes:e,cachePool:yd()}}function rc(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=ia),e}function Oh(e,t,a){var s=t.pendingProps,o=!1,c=(t.flags&128)!==0,f;if((f=c)||(f=e!==null&&e.memoizedState===null?!1:(pt.current&2)!==0),f&&(o=!0,t.flags&=-129),f=(t.flags&32)!==0,t.flags&=-33,e===null){if(qe){if(o?Nn(t):Tn(),(e=at)?(e=Bf(e,pa),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:bn!==null?{id:Da,overflow:Ua}:null,retryLane:536870912,hydrationErrors:null},a=od(e),a.return=t,t.child=a,Dt=t,at=null)):e=null,e===null)throw wn(t);return Gc(e)?t.lanes=32:t.lanes=536870912,null}var v=s.children;return s=s.fallback,o?(Tn(),o=t.mode,v=Fr({mode:"hidden",children:v},o),s=ts(s,o,a,null),v.return=t,s.return=t,v.sibling=s,t.child=v,s=t.child,s.memoizedState=ic(a),s.childLanes=rc(e,f,a),t.memoizedState=sc,Bi(null,s)):(Nn(t),lc(t,v))}var x=e.memoizedState;if(x!==null&&(v=x.dehydrated,v!==null)){if(c)t.flags&256?(Nn(t),t.flags&=-257,t=oc(e,t,a)):t.memoizedState!==null?(Tn(),t.child=e.child,t.flags|=128,t=null):(Tn(),v=s.fallback,o=t.mode,s=Fr({mode:"visible",children:s.children},o),v=ts(v,o,a,null),v.flags|=2,s.return=t,v.return=t,s.sibling=v,t.child=s,os(t,e.child,null,a),s=t.child,s.memoizedState=ic(a),s.childLanes=rc(e,f,a),t.memoizedState=sc,t=Bi(null,s));else if(Nn(t),Gc(v)){if(f=v.nextSibling&&v.nextSibling.dataset,f)var k=f.dgst;f=k,s=Error(l(419)),s.stack="",s.digest=f,Ni({value:s,source:null,stack:null}),t=oc(e,t,a)}else if(wt||Rs(e,t,a,!1),f=(a&e.childLanes)!==0,wt||f){if(f=Fe,f!==null&&(s=Nt(f,a),s!==0&&s!==x.retryLane))throw x.retryLane=s,es(e,s),Pt(f,e,s),ac;$c(v)||ol(),t=oc(e,t,a)}else $c(v)?(t.flags|=192,t.child=e.child,t=null):(e=x.treeContext,at=va(v.nextSibling),Dt=t,qe=!0,xn=null,pa=!1,e!==null&&dd(t,e),t=lc(t,s.children),t.flags|=4096);return t}return o?(Tn(),v=s.fallback,o=t.mode,x=e.child,k=x.sibling,s=Ia(x,{mode:"hidden",children:s.children}),s.subtreeFlags=x.subtreeFlags&65011712,k!==null?v=Ia(k,v):(v=ts(v,o,a,null),v.flags|=2),v.return=t,s.return=t,s.sibling=v,t.child=s,Bi(null,s),s=t.child,v=e.child.memoizedState,v===null?v=ic(a):(o=v.cachePool,o!==null?(x=bt._currentValue,o=o.parent!==x?{parent:x,pool:x}:o):o=yd(),v={baseLanes:v.baseLanes|a,cachePool:o}),s.memoizedState=v,s.childLanes=rc(e,f,a),t.memoizedState=sc,Bi(e.child,s)):(Nn(t),a=e.child,e=a.sibling,a=Ia(a,{mode:"visible",children:s.children}),a.return=t,a.sibling=null,e!==null&&(f=t.deletions,f===null?(t.deletions=[e],t.flags|=16):f.push(e)),t.child=a,t.memoizedState=null,a)}function lc(e,t){return t=Fr({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Fr(e,t){return e=ta(22,e,null,t),e.lanes=0,e}function oc(e,t,a){return os(t,e.child,null,a),e=lc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ch(e,t,a){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),So(e.return,t,a)}function cc(e,t,a,s,o,c){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:a,tailMode:o,treeForkCount:c}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=s,f.tail=a,f.tailMode=o,f.treeForkCount=c)}function kh(e,t,a){var s=t.pendingProps,o=s.revealOrder,c=s.tail;s=s.children;var f=pt.current,v=(f&2)!==0;if(v?(f=f&1|2,t.flags|=128):f&=1,P(pt,f),zt(e,t,s,a),s=qe?Ei:0,!v&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ch(e,a,t);else if(e.tag===19)Ch(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(o){case"forwards":for(a=t.child,o=null;a!==null;)e=a.alternate,e!==null&&$r(e)===null&&(o=a),a=a.sibling;a=o,a===null?(o=t.child,t.child=null):(o=a.sibling,a.sibling=null),cc(t,!1,o,a,c,s);break;case"backwards":case"unstable_legacy-backwards":for(a=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&$r(e)===null){t.child=o;break}e=o.sibling,o.sibling=a,a=o,o=e}cc(t,!0,a,null,c,s);break;case"together":cc(t,!1,null,null,void 0,s);break;default:t.memoizedState=null}return t.child}function Wa(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Cn|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(Rs(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(l(153));if(t.child!==null){for(e=t.child,a=Ia(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=Ia(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function uc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Dr(e)))}function g0(e,t,a){switch(t.tag){case 3:jt(t,t.stateNode.containerInfo),_n(t,bt,e.memoizedState.cache),as();break;case 27:case 5:La(t);break;case 4:jt(t,t.stateNode.containerInfo);break;case 10:_n(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,zo(t),null;break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(Nn(t),t.flags|=128,null):(a&t.child.childLanes)!==0?Oh(e,t,a):(Nn(t),e=Wa(e,t,a),e!==null?e.sibling:null);Nn(t);break;case 19:var o=(e.flags&128)!==0;if(s=(a&t.childLanes)!==0,s||(Rs(e,t,a,!1),s=(a&t.childLanes)!==0),o){if(s)return kh(e,t,a);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),P(pt,pt.current),s)break;return null;case 22:return t.lanes=0,Sh(e,t,a,t.pendingProps);case 24:_n(t,bt,e.memoizedState.cache)}return Wa(e,t,a)}function Rh(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)wt=!0;else{if(!uc(e,a)&&(t.flags&128)===0)return wt=!1,g0(e,t,a);wt=(e.flags&131072)!==0}else wt=!1,qe&&(t.flags&1048576)!==0&&ud(t,Ei,t.index);switch(t.lanes=0,t.tag){case 16:e:{var s=t.pendingProps;if(e=rs(t.elementType),t.type=e,typeof e=="function")go(e)?(s=us(e,s),t.tag=1,t=Th(null,t,e,s,a)):(t.tag=0,t=nc(null,t,e,s,a));else{if(e!=null){var o=e.$$typeof;if(o===I){t.tag=11,t=xh(null,t,e,s,a);break e}else if(o===X){t.tag=14,t=wh(null,t,e,s,a);break e}}throw t=Ee(e)||e,Error(l(306,t,""))}}return t;case 0:return nc(e,t,t.type,t.pendingProps,a);case 1:return s=t.type,o=us(s,t.pendingProps),Th(e,t,s,o,a);case 3:e:{if(jt(t,t.stateNode.containerInfo),e===null)throw Error(l(387));s=t.pendingProps;var c=t.memoizedState;o=c.element,Co(e,t),Di(t,s,null,a);var f=t.memoizedState;if(s=f.cache,_n(t,bt,s),s!==c.cache&&jo(t,[bt],a,!0),Ri(),s=f.element,c.isDehydrated)if(c={element:s,isDehydrated:!1,cache:f.cache},t.updateQueue.baseState=c,t.memoizedState=c,t.flags&256){t=Ah(e,t,s,a);break e}else if(s!==o){o=fa(Error(l(424)),t),Ni(o),t=Ah(e,t,s,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(at=va(e.firstChild),Dt=t,qe=!0,xn=null,pa=!0,a=Sd(t,null,s,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(as(),s===o){t=Wa(e,t,a);break e}zt(e,t,s,a)}t=t.child}return t;case 26:return Wr(e,t),e===null?(a=Yf(t.type,null,t.pendingProps,null))?t.memoizedState=a:qe||(a=t.type,e=t.pendingProps,s=gl(Ce.current).createElement(a),s[lt]=t,s[ft]=e,Mt(s,a,e),mt(s),t.stateNode=s):t.memoizedState=Yf(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return La(t),e===null&&qe&&(s=t.stateNode=$f(t.type,t.pendingProps,Ce.current),Dt=t,pa=!0,o=at,zn(t.type)?(Vc=o,at=va(s.firstChild)):at=o),zt(e,t,t.pendingProps.children,a),Wr(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&qe&&((o=s=at)&&(s=K0(s,t.type,t.pendingProps,pa),s!==null?(t.stateNode=s,Dt=t,at=va(s.firstChild),pa=!1,o=!0):o=!1),o||wn(t)),La(t),o=t.type,c=t.pendingProps,f=e!==null?e.memoizedProps:null,s=c.children,Bc(o,c)?s=null:f!==null&&Bc(o,f)&&(t.flags|=32),t.memoizedState!==null&&(o=Lo(e,t,r0,null,null,a),Fi._currentValue=o),Wr(e,t),zt(e,t,s,a),t.child;case 6:return e===null&&qe&&((e=a=at)&&(a=I0(a,t.pendingProps,pa),a!==null?(t.stateNode=a,Dt=t,at=null,e=!0):e=!1),e||wn(t)),null;case 13:return Oh(e,t,a);case 4:return jt(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=os(t,null,s,a):zt(e,t,s,a),t.child;case 11:return xh(e,t,t.type,t.pendingProps,a);case 7:return zt(e,t,t.pendingProps,a),t.child;case 8:return zt(e,t,t.pendingProps.children,a),t.child;case 12:return zt(e,t,t.pendingProps.children,a),t.child;case 10:return s=t.pendingProps,_n(t,t.type,s.value),zt(e,t,s.children,a),t.child;case 9:return o=t.type._context,s=t.pendingProps.children,ss(t),o=Ut(o),s=s(o),t.flags|=1,zt(e,t,s,a),t.child;case 14:return wh(e,t,t.type,t.pendingProps,a);case 15:return _h(e,t,t.type,t.pendingProps,a);case 19:return kh(e,t,a);case 31:return m0(e,t,a);case 22:return Sh(e,t,a,t.pendingProps);case 24:return ss(t),s=Ut(bt),e===null?(o=To(),o===null&&(o=Fe,c=Eo(),o.pooledCache=c,c.refCount++,c!==null&&(o.pooledCacheLanes|=a),o=c),t.memoizedState={parent:s,cache:o},Oo(t),_n(t,bt,o)):((e.lanes&a)!==0&&(Co(e,t),Di(t,null,null,a),Ri()),o=e.memoizedState,c=t.memoizedState,o.parent!==s?(o={parent:s,cache:s},t.memoizedState=o,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=o),_n(t,bt,s)):(s=c.cache,_n(t,bt,s),s!==o.cache&&jo(t,[bt],a,!0))),zt(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(l(156,t.tag))}function Fa(e){e.flags|=4}function dc(e,t,a,s,o){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(o&335544128)===o)if(e.stateNode.complete)e.flags|=8192;else if(rf())e.flags|=8192;else throw ls=Lr,Ao}else e.flags&=-16777217}function Dh(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Jf(t))if(rf())e.flags|=8192;else throw ls=Lr,Ao}function el(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?_a():536870912,e.lanes|=t,Ys|=t)}function qi(e,t){if(!qe)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function nt(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,s=0;if(t)for(var o=e.child;o!==null;)a|=o.lanes|o.childLanes,s|=o.subtreeFlags&65011712,s|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)a|=o.lanes|o.childLanes,s|=o.subtreeFlags,s|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=s,e.childLanes=a,t}function p0(e,t,a){var s=t.pendingProps;switch(bo(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nt(t),null;case 1:return nt(t),null;case 3:return a=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),Ja(bt),Ze(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(ks(t)?Fa(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,wo())),nt(t),null;case 26:var o=t.type,c=t.memoizedState;return e===null?(Fa(t),c!==null?(nt(t),Dh(t,c)):(nt(t),dc(t,o,null,s,a))):c?c!==e.memoizedState?(Fa(t),nt(t),Dh(t,c)):(nt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==s&&Fa(t),nt(t),dc(t,o,e,s,a)),null;case 27:if(Ca(t),a=Ce.current,o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&Fa(t);else{if(!s){if(t.stateNode===null)throw Error(l(166));return nt(t),null}e=te.current,ks(t)?hd(t):(e=$f(o,s,a),t.stateNode=e,Fa(t))}return nt(t),null;case 5:if(Ca(t),o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&Fa(t);else{if(!s){if(t.stateNode===null)throw Error(l(166));return nt(t),null}if(c=te.current,ks(t))hd(t);else{var f=gl(Ce.current);switch(c){case 1:c=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:c=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":c=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":c=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":c=f.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof s.is=="string"?f.createElement("select",{is:s.is}):f.createElement("select"),s.multiple?c.multiple=!0:s.size&&(c.size=s.size);break;default:c=typeof s.is=="string"?f.createElement(o,{is:s.is}):f.createElement(o)}}c[lt]=t,c[ft]=s;e:for(f=t.child;f!==null;){if(f.tag===5||f.tag===6)c.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}t.stateNode=c;e:switch(Mt(c,o,s),o){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Fa(t)}}return nt(t),dc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&Fa(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(l(166));if(e=Ce.current,ks(t)){if(e=t.stateNode,a=t.memoizedProps,s=null,o=Dt,o!==null)switch(o.tag){case 27:case 5:s=o.memoizedProps}e[lt]=t,e=!!(e.nodeValue===a||s!==null&&s.suppressHydrationWarning===!0||Cf(e.nodeValue,a)),e||wn(t,!0)}else e=gl(e).createTextNode(s),e[lt]=t,t.stateNode=e}return nt(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(s=ks(t),a!==null){if(e===null){if(!s)throw Error(l(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(557));e[lt]=t}else as(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;nt(t),e=!1}else a=wo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(na(t),t):(na(t),null);if((t.flags&128)!==0)throw Error(l(558))}return nt(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=ks(t),s!==null&&s.dehydrated!==null){if(e===null){if(!o)throw Error(l(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(l(317));o[lt]=t}else as(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;nt(t),o=!1}else o=wo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return t.flags&256?(na(t),t):(na(t),null)}return na(t),(t.flags&128)!==0?(t.lanes=a,t):(a=s!==null,e=e!==null&&e.memoizedState!==null,a&&(s=t.child,o=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(o=s.alternate.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==o&&(s.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),el(t,t.updateQueue),nt(t),null);case 4:return Ze(),e===null&&Dc(t.stateNode.containerInfo),nt(t),null;case 10:return Ja(t.type),nt(t),null;case 19:if(B(pt),s=t.memoizedState,s===null)return nt(t),null;if(o=(t.flags&128)!==0,c=s.rendering,c===null)if(o)qi(s,!1);else{if(ut!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(c=$r(e),c!==null){for(t.flags|=128,qi(s,!1),e=c.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)ld(a,e),a=a.sibling;return P(pt,pt.current&1|2),qe&&Xa(t,s.treeForkCount),t.child}e=e.sibling}s.tail!==null&&ht()>il&&(t.flags|=128,o=!0,qi(s,!1),t.lanes=4194304)}else{if(!o)if(e=$r(c),e!==null){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),qi(s,!0),s.tail===null&&s.tailMode==="hidden"&&!c.alternate&&!qe)return nt(t),null}else 2*ht()-s.renderingStartTime>il&&a!==536870912&&(t.flags|=128,o=!0,qi(s,!1),t.lanes=4194304);s.isBackwards?(c.sibling=t.child,t.child=c):(e=s.last,e!==null?e.sibling=c:t.child=c,s.last=c)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ht(),e.sibling=null,a=pt.current,P(pt,o?a&1|2:a&1),qe&&Xa(t,s.treeForkCount),e):(nt(t),null);case 22:case 23:return na(t),Uo(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?(a&536870912)!==0&&(t.flags&128)===0&&(nt(t),t.subtreeFlags&6&&(t.flags|=8192)):nt(t),a=t.updateQueue,a!==null&&el(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==a&&(t.flags|=2048),e!==null&&B(is),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Ja(bt),nt(t),null;case 25:return null;case 30:return null}throw Error(l(156,t.tag))}function y0(e,t){switch(bo(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ja(bt),Ze(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ca(t),null;case 31:if(t.memoizedState!==null){if(na(t),t.alternate===null)throw Error(l(340));as()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(na(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(l(340));as()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return B(pt),null;case 4:return Ze(),null;case 10:return Ja(t.type),null;case 22:case 23:return na(t),Uo(),e!==null&&B(is),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Ja(bt),null;case 25:return null;default:return null}}function Uh(e,t){switch(bo(t),t.tag){case 3:Ja(bt),Ze();break;case 26:case 27:case 5:Ca(t);break;case 4:Ze();break;case 31:t.memoizedState!==null&&na(t);break;case 13:na(t);break;case 19:B(pt);break;case 10:Ja(t.type);break;case 22:case 23:na(t),Uo(),e!==null&&B(is);break;case 24:Ja(bt)}}function Hi(e,t){try{var a=t.updateQueue,s=a!==null?a.lastEffect:null;if(s!==null){var o=s.next;a=o;do{if((a.tag&e)===e){s=void 0;var c=a.create,f=a.inst;s=c(),f.destroy=s}a=a.next}while(a!==o)}}catch(v){Ie(t,t.return,v)}}function An(e,t,a){try{var s=t.updateQueue,o=s!==null?s.lastEffect:null;if(o!==null){var c=o.next;s=c;do{if((s.tag&e)===e){var f=s.inst,v=f.destroy;if(v!==void 0){f.destroy=void 0,o=t;var x=a,k=v;try{k()}catch(L){Ie(o,x,L)}}}s=s.next}while(s!==c)}}catch(L){Ie(t,t.return,L)}}function zh(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{Ed(t,a)}catch(s){Ie(e,e.return,s)}}}function Mh(e,t,a){a.props=us(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(s){Ie(e,t,s)}}function $i(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof a=="function"?e.refCleanup=a(s):a.current=s}}catch(o){Ie(e,t,o)}}function za(e,t){var a=e.ref,s=e.refCleanup;if(a!==null)if(typeof s=="function")try{s()}catch(o){Ie(e,t,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(o){Ie(e,t,o)}else a.current=null}function Lh(e){var t=e.type,a=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&s.focus();break e;case"img":a.src?s.src=a.src:a.srcSet&&(s.srcset=a.srcSet)}}catch(o){Ie(e,e.return,o)}}function hc(e,t,a){try{var s=e.stateNode;q0(s,e.type,a,t),s[ft]=t}catch(o){Ie(e,e.return,o)}}function Bh(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&zn(e.type)||e.tag===4}function fc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Bh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&zn(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function mc(e,t,a){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=Ya));else if(s!==4&&(s===27&&zn(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(mc(e,t,a),e=e.sibling;e!==null;)mc(e,t,a),e=e.sibling}function tl(e,t,a){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(s!==4&&(s===27&&zn(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(tl(e,t,a),e=e.sibling;e!==null;)tl(e,t,a),e=e.sibling}function qh(e){var t=e.stateNode,a=e.memoizedProps;try{for(var s=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);Mt(t,s,a),t[lt]=e,t[ft]=a}catch(c){Ie(e,e.return,c)}}var en=!1,_t=!1,gc=!1,Hh=typeof WeakSet=="function"?WeakSet:Set,kt=null;function v0(e,t){if(e=e.containerInfo,Mc=_l,e=Wu(e),lo(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var s=a.getSelection&&a.getSelection();if(s&&s.rangeCount!==0){a=s.anchorNode;var o=s.anchorOffset,c=s.focusNode;s=s.focusOffset;try{a.nodeType,c.nodeType}catch{a=null;break e}var f=0,v=-1,x=-1,k=0,L=0,$=e,R=null;t:for(;;){for(var z;$!==a||o!==0&&$.nodeType!==3||(v=f+o),$!==c||s!==0&&$.nodeType!==3||(x=f+s),$.nodeType===3&&(f+=$.nodeValue.length),(z=$.firstChild)!==null;)R=$,$=z;for(;;){if($===e)break t;if(R===a&&++k===o&&(v=f),R===c&&++L===s&&(x=f),(z=$.nextSibling)!==null)break;$=R,R=$.parentNode}$=z}a=v===-1||x===-1?null:{start:v,end:x}}else a=null}a=a||{start:0,end:0}}else a=null;for(Lc={focusedElem:e,selectionRange:a},_l=!1,kt=t;kt!==null;)if(t=kt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,kt=e;else for(;kt!==null;){switch(t=kt,c=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)o=e[a],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&c!==null){e=void 0,a=t,o=c.memoizedProps,c=c.memoizedState,s=a.stateNode;try{var se=us(a.type,o);e=s.getSnapshotBeforeUpdate(se,c),s.__reactInternalSnapshotBeforeUpdate=e}catch(fe){Ie(a,a.return,fe)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)Hc(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Hc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(l(163))}if(e=t.sibling,e!==null){e.return=t.return,kt=e;break}kt=t.return}}function $h(e,t,a){var s=a.flags;switch(a.tag){case 0:case 11:case 15:an(e,a),s&4&&Hi(5,a);break;case 1:if(an(e,a),s&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(f){Ie(a,a.return,f)}else{var o=us(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(f){Ie(a,a.return,f)}}s&64&&zh(a),s&512&&$i(a,a.return);break;case 3:if(an(e,a),s&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{Ed(e,t)}catch(f){Ie(a,a.return,f)}}break;case 27:t===null&&s&4&&qh(a);case 26:case 5:an(e,a),t===null&&s&4&&Lh(a),s&512&&$i(a,a.return);break;case 12:an(e,a);break;case 31:an(e,a),s&4&&Yh(e,a);break;case 13:an(e,a),s&4&&Kh(e,a),s&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=T0.bind(null,a),X0(e,a))));break;case 22:if(s=a.memoizedState!==null||en,!s){t=t!==null&&t.memoizedState!==null||_t,o=en;var c=_t;en=s,(_t=t)&&!c?nn(e,a,(a.subtreeFlags&8772)!==0):an(e,a),en=o,_t=c}break;case 30:break;default:an(e,a)}}function Gh(e){var t=e.alternate;t!==null&&(e.alternate=null,Gh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&hi(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var it=null,Xt=!1;function tn(e,t,a){for(a=a.child;a!==null;)Vh(e,t,a),a=a.sibling}function Vh(e,t,a){if(J&&typeof J.onCommitFiberUnmount=="function")try{J.onCommitFiberUnmount(Te,a)}catch{}switch(a.tag){case 26:_t||za(a,t),tn(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:_t||za(a,t);var s=it,o=Xt;zn(a.type)&&(it=a.stateNode,Xt=!1),tn(e,t,a),Zi(a.stateNode),it=s,Xt=o;break;case 5:_t||za(a,t);case 6:if(s=it,o=Xt,it=null,tn(e,t,a),it=s,Xt=o,it!==null)if(Xt)try{(it.nodeType===9?it.body:it.nodeName==="HTML"?it.ownerDocument.body:it).removeChild(a.stateNode)}catch(c){Ie(a,t,c)}else try{it.removeChild(a.stateNode)}catch(c){Ie(a,t,c)}break;case 18:it!==null&&(Xt?(e=it,Mf(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Ws(e)):Mf(it,a.stateNode));break;case 4:s=it,o=Xt,it=a.stateNode.containerInfo,Xt=!0,tn(e,t,a),it=s,Xt=o;break;case 0:case 11:case 14:case 15:An(2,a,t),_t||An(4,a,t),tn(e,t,a);break;case 1:_t||(za(a,t),s=a.stateNode,typeof s.componentWillUnmount=="function"&&Mh(a,t,s)),tn(e,t,a);break;case 21:tn(e,t,a);break;case 22:_t=(s=_t)||a.memoizedState!==null,tn(e,t,a),_t=s;break;default:tn(e,t,a)}}function Yh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ws(e)}catch(a){Ie(t,t.return,a)}}}function Kh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ws(e)}catch(a){Ie(t,t.return,a)}}function b0(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Hh),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Hh),t;default:throw Error(l(435,e.tag))}}function al(e,t){var a=b0(e);t.forEach(function(s){if(!a.has(s)){a.add(s);var o=A0.bind(null,e,s);s.then(o,o)}})}function Qt(e,t){var a=t.deletions;if(a!==null)for(var s=0;s<a.length;s++){var o=a[s],c=e,f=t,v=f;e:for(;v!==null;){switch(v.tag){case 27:if(zn(v.type)){it=v.stateNode,Xt=!1;break e}break;case 5:it=v.stateNode,Xt=!1;break e;case 3:case 4:it=v.stateNode.containerInfo,Xt=!0;break e}v=v.return}if(it===null)throw Error(l(160));Vh(c,f,o),it=null,Xt=!1,c=o.alternate,c!==null&&(c.return=null),o.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Ih(t,e),t=t.sibling}var Ea=null;function Ih(e,t){var a=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Qt(t,e),Jt(e),s&4&&(An(3,e,e.return),Hi(3,e),An(5,e,e.return));break;case 1:Qt(t,e),Jt(e),s&512&&(_t||a===null||za(a,a.return)),s&64&&en&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?s:a.concat(s))));break;case 26:var o=Ea;if(Qt(t,e),Jt(e),s&512&&(_t||a===null||za(a,a.return)),s&4){var c=a!==null?a.memoizedState:null;if(s=e.memoizedState,a===null)if(s===null)if(e.stateNode===null){e:{s=e.type,a=e.memoizedProps,o=o.ownerDocument||o;t:switch(s){case"title":c=o.getElementsByTagName("title")[0],(!c||c[Qn]||c[lt]||c.namespaceURI==="http://www.w3.org/2000/svg"||c.hasAttribute("itemprop"))&&(c=o.createElement(s),o.head.insertBefore(c,o.querySelector("head > title"))),Mt(c,s,a),c[lt]=e,mt(c),s=c;break e;case"link":var f=Xf("link","href",o).get(s+(a.href||""));if(f){for(var v=0;v<f.length;v++)if(c=f[v],c.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&c.getAttribute("rel")===(a.rel==null?null:a.rel)&&c.getAttribute("title")===(a.title==null?null:a.title)&&c.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){f.splice(v,1);break t}}c=o.createElement(s),Mt(c,s,a),o.head.appendChild(c);break;case"meta":if(f=Xf("meta","content",o).get(s+(a.content||""))){for(v=0;v<f.length;v++)if(c=f[v],c.getAttribute("content")===(a.content==null?null:""+a.content)&&c.getAttribute("name")===(a.name==null?null:a.name)&&c.getAttribute("property")===(a.property==null?null:a.property)&&c.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&c.getAttribute("charset")===(a.charSet==null?null:a.charSet)){f.splice(v,1);break t}}c=o.createElement(s),Mt(c,s,a),o.head.appendChild(c);break;default:throw Error(l(468,s))}c[lt]=e,mt(c),s=c}e.stateNode=s}else Qf(o,e.type,e.stateNode);else e.stateNode=If(o,s,e.memoizedProps);else c!==s?(c===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):c.count--,s===null?Qf(o,e.type,e.stateNode):If(o,s,e.memoizedProps)):s===null&&e.stateNode!==null&&hc(e,e.memoizedProps,a.memoizedProps)}break;case 27:Qt(t,e),Jt(e),s&512&&(_t||a===null||za(a,a.return)),a!==null&&s&4&&hc(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Qt(t,e),Jt(e),s&512&&(_t||a===null||za(a,a.return)),e.flags&32){o=e.stateNode;try{ws(o,"")}catch(se){Ie(e,e.return,se)}}s&4&&e.stateNode!=null&&(o=e.memoizedProps,hc(e,o,a!==null?a.memoizedProps:o)),s&1024&&(gc=!0);break;case 6:if(Qt(t,e),Jt(e),s&4){if(e.stateNode===null)throw Error(l(162));s=e.memoizedProps,a=e.stateNode;try{a.nodeValue=s}catch(se){Ie(e,e.return,se)}}break;case 3:if(vl=null,o=Ea,Ea=pl(t.containerInfo),Qt(t,e),Ea=o,Jt(e),s&4&&a!==null&&a.memoizedState.isDehydrated)try{Ws(t.containerInfo)}catch(se){Ie(e,e.return,se)}gc&&(gc=!1,Xh(e));break;case 4:s=Ea,Ea=pl(e.stateNode.containerInfo),Qt(t,e),Jt(e),Ea=s;break;case 12:Qt(t,e),Jt(e);break;case 31:Qt(t,e),Jt(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,al(e,s)));break;case 13:Qt(t,e),Jt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(sl=ht()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,al(e,s)));break;case 22:o=e.memoizedState!==null;var x=a!==null&&a.memoizedState!==null,k=en,L=_t;if(en=k||o,_t=L||x,Qt(t,e),_t=L,en=k,Jt(e),s&8192)e:for(t=e.stateNode,t._visibility=o?t._visibility&-2:t._visibility|1,o&&(a===null||x||en||_t||ds(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){x=a=t;try{if(c=x.stateNode,o)f=c.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none";else{v=x.stateNode;var $=x.memoizedProps.style,R=$!=null&&$.hasOwnProperty("display")?$.display:null;v.style.display=R==null||typeof R=="boolean"?"":(""+R).trim()}}catch(se){Ie(x,x.return,se)}}}else if(t.tag===6){if(a===null){x=t;try{x.stateNode.nodeValue=o?"":x.memoizedProps}catch(se){Ie(x,x.return,se)}}}else if(t.tag===18){if(a===null){x=t;try{var z=x.stateNode;o?Lf(z,!0):Lf(x.stateNode,!1)}catch(se){Ie(x,x.return,se)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(a=s.retryQueue,a!==null&&(s.retryQueue=null,al(e,a))));break;case 19:Qt(t,e),Jt(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,al(e,s)));break;case 30:break;case 21:break;default:Qt(t,e),Jt(e)}}function Jt(e){var t=e.flags;if(t&2){try{for(var a,s=e.return;s!==null;){if(Bh(s)){a=s;break}s=s.return}if(a==null)throw Error(l(160));switch(a.tag){case 27:var o=a.stateNode,c=fc(e);tl(e,c,o);break;case 5:var f=a.stateNode;a.flags&32&&(ws(f,""),a.flags&=-33);var v=fc(e);tl(e,v,f);break;case 3:case 4:var x=a.stateNode.containerInfo,k=fc(e);mc(e,k,x);break;default:throw Error(l(161))}}catch(L){Ie(e,e.return,L)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Xh(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Xh(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function an(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)$h(e,t.alternate,t),t=t.sibling}function ds(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:An(4,t,t.return),ds(t);break;case 1:za(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&Mh(t,t.return,a),ds(t);break;case 27:Zi(t.stateNode);case 26:case 5:za(t,t.return),ds(t);break;case 22:t.memoizedState===null&&ds(t);break;case 30:ds(t);break;default:ds(t)}e=e.sibling}}function nn(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,o=e,c=t,f=c.flags;switch(c.tag){case 0:case 11:case 15:nn(o,c,a),Hi(4,c);break;case 1:if(nn(o,c,a),s=c,o=s.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(k){Ie(s,s.return,k)}if(s=c,o=s.updateQueue,o!==null){var v=s.stateNode;try{var x=o.shared.hiddenCallbacks;if(x!==null)for(o.shared.hiddenCallbacks=null,o=0;o<x.length;o++)jd(x[o],v)}catch(k){Ie(s,s.return,k)}}a&&f&64&&zh(c),$i(c,c.return);break;case 27:qh(c);case 26:case 5:nn(o,c,a),a&&s===null&&f&4&&Lh(c),$i(c,c.return);break;case 12:nn(o,c,a);break;case 31:nn(o,c,a),a&&f&4&&Yh(o,c);break;case 13:nn(o,c,a),a&&f&4&&Kh(o,c);break;case 22:c.memoizedState===null&&nn(o,c,a),$i(c,c.return);break;case 30:break;default:nn(o,c,a)}t=t.sibling}}function pc(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Ti(a))}function yc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ti(e))}function Na(e,t,a,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Qh(e,t,a,s),t=t.sibling}function Qh(e,t,a,s){var o=t.flags;switch(t.tag){case 0:case 11:case 15:Na(e,t,a,s),o&2048&&Hi(9,t);break;case 1:Na(e,t,a,s);break;case 3:Na(e,t,a,s),o&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ti(e)));break;case 12:if(o&2048){Na(e,t,a,s),e=t.stateNode;try{var c=t.memoizedProps,f=c.id,v=c.onPostCommit;typeof v=="function"&&v(f,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(x){Ie(t,t.return,x)}}else Na(e,t,a,s);break;case 31:Na(e,t,a,s);break;case 13:Na(e,t,a,s);break;case 23:break;case 22:c=t.stateNode,f=t.alternate,t.memoizedState!==null?c._visibility&2?Na(e,t,a,s):Gi(e,t):c._visibility&2?Na(e,t,a,s):(c._visibility|=2,$s(e,t,a,s,(t.subtreeFlags&10256)!==0||!1)),o&2048&&pc(f,t);break;case 24:Na(e,t,a,s),o&2048&&yc(t.alternate,t);break;default:Na(e,t,a,s)}}function $s(e,t,a,s,o){for(o=o&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var c=e,f=t,v=a,x=s,k=f.flags;switch(f.tag){case 0:case 11:case 15:$s(c,f,v,x,o),Hi(8,f);break;case 23:break;case 22:var L=f.stateNode;f.memoizedState!==null?L._visibility&2?$s(c,f,v,x,o):Gi(c,f):(L._visibility|=2,$s(c,f,v,x,o)),o&&k&2048&&pc(f.alternate,f);break;case 24:$s(c,f,v,x,o),o&&k&2048&&yc(f.alternate,f);break;default:$s(c,f,v,x,o)}t=t.sibling}}function Gi(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,s=t,o=s.flags;switch(s.tag){case 22:Gi(a,s),o&2048&&pc(s.alternate,s);break;case 24:Gi(a,s),o&2048&&yc(s.alternate,s);break;default:Gi(a,s)}t=t.sibling}}var Vi=8192;function Gs(e,t,a){if(e.subtreeFlags&Vi)for(e=e.child;e!==null;)Jh(e,t,a),e=e.sibling}function Jh(e,t,a){switch(e.tag){case 26:Gs(e,t,a),e.flags&Vi&&e.memoizedState!==null&&ip(a,Ea,e.memoizedState,e.memoizedProps);break;case 5:Gs(e,t,a);break;case 3:case 4:var s=Ea;Ea=pl(e.stateNode.containerInfo),Gs(e,t,a),Ea=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=Vi,Vi=16777216,Gs(e,t,a),Vi=s):Gs(e,t,a));break;default:Gs(e,t,a)}}function Zh(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Yi(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var s=t[a];kt=s,Wh(s,e)}Zh(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ph(e),e=e.sibling}function Ph(e){switch(e.tag){case 0:case 11:case 15:Yi(e),e.flags&2048&&An(9,e,e.return);break;case 3:Yi(e);break;case 12:Yi(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,nl(e)):Yi(e);break;default:Yi(e)}}function nl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var s=t[a];kt=s,Wh(s,e)}Zh(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:An(8,t,t.return),nl(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,nl(t));break;default:nl(t)}e=e.sibling}}function Wh(e,t){for(;kt!==null;){var a=kt;switch(a.tag){case 0:case 11:case 15:An(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var s=a.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:Ti(a.memoizedState.cache)}if(s=a.child,s!==null)s.return=a,kt=s;else e:for(a=e;kt!==null;){s=kt;var o=s.sibling,c=s.return;if(Gh(s),s===a){kt=null;break e}if(o!==null){o.return=c,kt=o;break e}kt=c}}}var x0={getCacheForType:function(e){var t=Ut(bt),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return Ut(bt).controller.signal}},w0=typeof WeakMap=="function"?WeakMap:Map,Ye=0,Fe=null,Ue=null,Le=0,Ke=0,sa=null,On=!1,Vs=!1,vc=!1,sn=0,ut=0,Cn=0,hs=0,bc=0,ia=0,Ys=0,Ki=null,Zt=null,xc=!1,sl=0,Fh=0,il=1/0,rl=null,kn=null,At=0,Rn=null,Ks=null,rn=0,wc=0,_c=null,ef=null,Ii=0,Sc=null;function ra(){return(Ye&2)!==0&&Le!==0?Le&-Le:U.T!==null?Oc():Tt()}function tf(){if(ia===0)if((Le&536870912)===0||qe){var e=De;De<<=1,(De&3932160)===0&&(De=262144),ia=e}else ia=536870912;return e=aa.current,e!==null&&(e.flags|=32),ia}function Pt(e,t,a){(e===Fe&&(Ke===2||Ke===9)||e.cancelPendingCommit!==null)&&(Is(e,0),Dn(e,Le,ia,!1)),Vt(e,a),((Ye&2)===0||e!==Fe)&&(e===Fe&&((Ye&2)===0&&(hs|=a),ut===4&&Dn(e,Le,ia,!1)),Ma(e))}function af(e,t,a){if((Ye&6)!==0)throw Error(l(327));var s=!a&&(t&127)===0&&(t&e.expiredLanes)===0||da(e,t),o=s?j0(e,t):Ec(e,t,!0),c=s;do{if(o===0){Vs&&!s&&Dn(e,t,0,!1);break}else{if(a=e.current.alternate,c&&!_0(a)){o=Ec(e,t,!1),c=!1;continue}if(o===2){if(c=t,e.errorRecoveryDisabledLanes&c)var f=0;else f=e.pendingLanes&-536870913,f=f!==0?f:f&536870912?536870912:0;if(f!==0){t=f;e:{var v=e;o=Ki;var x=v.current.memoizedState.isDehydrated;if(x&&(Is(v,f).flags|=256),f=Ec(v,f,!1),f!==2){if(vc&&!x){v.errorRecoveryDisabledLanes|=c,hs|=c,o=4;break e}c=Zt,Zt=o,c!==null&&(Zt===null?Zt=c:Zt.push.apply(Zt,c))}o=f}if(c=!1,o!==2)continue}}if(o===1){Is(e,0),Dn(e,t,0,!0);break}e:{switch(s=e,c=o,c){case 0:case 1:throw Error(l(345));case 4:if((t&4194048)!==t)break;case 6:Dn(s,t,ia,!On);break e;case 2:Zt=null;break;case 3:case 5:break;default:throw Error(l(329))}if((t&62914560)===t&&(o=sl+300-ht(),10<o)){if(Dn(s,t,ia,!On),ua(s,0,!0)!==0)break e;rn=t,s.timeoutHandle=Uf(nf.bind(null,s,a,Zt,rl,xc,t,ia,hs,Ys,On,c,"Throttled",-0,0),o);break e}nf(s,a,Zt,rl,xc,t,ia,hs,Ys,On,c,null,-0,0)}}break}while(!0);Ma(e)}function nf(e,t,a,s,o,c,f,v,x,k,L,$,R,z){if(e.timeoutHandle=-1,$=t.subtreeFlags,$&8192||($&16785408)===16785408){$={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ya},Jh(t,c,$);var se=(c&62914560)===c?sl-ht():(c&4194048)===c?Fh-ht():0;if(se=rp($,se),se!==null){rn=c,e.cancelPendingCommit=se(hf.bind(null,e,t,c,a,s,o,f,v,x,L,$,null,R,z)),Dn(e,c,f,!k);return}}hf(e,t,c,a,s,o,f,v,x)}function _0(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var s=0;s<a.length;s++){var o=a[s],c=o.getSnapshot;o=o.value;try{if(!ea(c(),o))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Dn(e,t,a,s){t&=~bc,t&=~hs,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var o=t;0<o;){var c=31-xe(o),f=1<<c;s[c]=-1,o&=~f}a!==0&&$a(e,a,t)}function ll(){return(Ye&6)===0?(Xi(0),!1):!0}function jc(){if(Ue!==null){if(Ke===0)var e=Ue.return;else e=Ue,Qa=ns=null,Ho(e),Ms=null,Oi=0,e=Ue;for(;e!==null;)Uh(e.alternate,e),e=e.return;Ue=null}}function Is(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,G0(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),rn=0,jc(),Fe=e,Ue=a=Ia(e.current,null),Le=t,Ke=0,sa=null,On=!1,Vs=da(e,t),vc=!1,Ys=ia=bc=hs=Cn=ut=0,Zt=Ki=null,xc=!1,(t&8)!==0&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var o=31-xe(s),c=1<<o;t|=e[o],s&=~c}return sn=t,Ar(),a}function sf(e,t){ke=null,U.H=Li,t===zs||t===Mr?(t=xd(),Ke=3):t===Ao?(t=xd(),Ke=4):Ke=t===ac?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,sa=t,Ue===null&&(ut=1,Zr(e,fa(t,e.current)))}function rf(){var e=aa.current;return e===null?!0:(Le&4194048)===Le?ya===null:(Le&62914560)===Le||(Le&536870912)!==0?e===ya:!1}function lf(){var e=U.H;return U.H=Li,e===null?Li:e}function of(){var e=U.A;return U.A=x0,e}function ol(){ut=4,On||(Le&4194048)!==Le&&aa.current!==null||(Vs=!0),(Cn&134217727)===0&&(hs&134217727)===0||Fe===null||Dn(Fe,Le,ia,!1)}function Ec(e,t,a){var s=Ye;Ye|=2;var o=lf(),c=of();(Fe!==e||Le!==t)&&(rl=null,Is(e,t)),t=!1;var f=ut;e:do try{if(Ke!==0&&Ue!==null){var v=Ue,x=sa;switch(Ke){case 8:jc(),f=6;break e;case 3:case 2:case 9:case 6:aa.current===null&&(t=!0);var k=Ke;if(Ke=0,sa=null,Xs(e,v,x,k),a&&Vs){f=0;break e}break;default:k=Ke,Ke=0,sa=null,Xs(e,v,x,k)}}S0(),f=ut;break}catch(L){sf(e,L)}while(!0);return t&&e.shellSuspendCounter++,Qa=ns=null,Ye=s,U.H=o,U.A=c,Ue===null&&(Fe=null,Le=0,Ar()),f}function S0(){for(;Ue!==null;)cf(Ue)}function j0(e,t){var a=Ye;Ye|=2;var s=lf(),o=of();Fe!==e||Le!==t?(rl=null,il=ht()+500,Is(e,t)):Vs=da(e,t);e:do try{if(Ke!==0&&Ue!==null){t=Ue;var c=sa;t:switch(Ke){case 1:Ke=0,sa=null,Xs(e,t,c,1);break;case 2:case 9:if(vd(c)){Ke=0,sa=null,uf(t);break}t=function(){Ke!==2&&Ke!==9||Fe!==e||(Ke=7),Ma(e)},c.then(t,t);break e;case 3:Ke=7;break e;case 4:Ke=5;break e;case 7:vd(c)?(Ke=0,sa=null,uf(t)):(Ke=0,sa=null,Xs(e,t,c,7));break;case 5:var f=null;switch(Ue.tag){case 26:f=Ue.memoizedState;case 5:case 27:var v=Ue;if(f?Jf(f):v.stateNode.complete){Ke=0,sa=null;var x=v.sibling;if(x!==null)Ue=x;else{var k=v.return;k!==null?(Ue=k,cl(k)):Ue=null}break t}}Ke=0,sa=null,Xs(e,t,c,5);break;case 6:Ke=0,sa=null,Xs(e,t,c,6);break;case 8:jc(),ut=6;break e;default:throw Error(l(462))}}E0();break}catch(L){sf(e,L)}while(!0);return Qa=ns=null,U.H=s,U.A=o,Ye=a,Ue!==null?0:(Fe=null,Le=0,Ar(),ut)}function E0(){for(;Ue!==null&&!bs();)cf(Ue)}function cf(e){var t=Rh(e.alternate,e,sn);e.memoizedProps=e.pendingProps,t===null?cl(e):Ue=t}function uf(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=Nh(a,t,t.pendingProps,t.type,void 0,Le);break;case 11:t=Nh(a,t,t.pendingProps,t.type.render,t.ref,Le);break;case 5:Ho(t);default:Uh(a,t),t=Ue=ld(t,sn),t=Rh(a,t,sn)}e.memoizedProps=e.pendingProps,t===null?cl(e):Ue=t}function Xs(e,t,a,s){Qa=ns=null,Ho(t),Ms=null,Oi=0;var o=t.return;try{if(f0(e,o,t,a,Le)){ut=1,Zr(e,fa(a,e.current)),Ue=null;return}}catch(c){if(o!==null)throw Ue=o,c;ut=1,Zr(e,fa(a,e.current)),Ue=null;return}t.flags&32768?(qe||s===1?e=!0:Vs||(Le&536870912)!==0?e=!1:(On=e=!0,(s===2||s===9||s===3||s===6)&&(s=aa.current,s!==null&&s.tag===13&&(s.flags|=16384))),df(t,e)):cl(t)}function cl(e){var t=e;do{if((t.flags&32768)!==0){df(t,On);return}e=t.return;var a=p0(t.alternate,t,sn);if(a!==null){Ue=a;return}if(t=t.sibling,t!==null){Ue=t;return}Ue=t=e}while(t!==null);ut===0&&(ut=5)}function df(e,t){do{var a=y0(e.alternate,e);if(a!==null){a.flags&=32767,Ue=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){Ue=e;return}Ue=e=a}while(e!==null);ut=6,Ue=null}function hf(e,t,a,s,o,c,f,v,x){e.cancelPendingCommit=null;do ul();while(At!==0);if((Ye&6)!==0)throw Error(l(327));if(t!==null){if(t===e.current)throw Error(l(177));if(c=t.lanes|t.childLanes,c|=fo,In(e,a,c,f,v,x),e===Fe&&(Ue=Fe=null,Le=0),Ks=t,Rn=e,rn=a,wc=c,_c=o,ef=s,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,O0(M,function(){return yf(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||s){s=U.T,U.T=null,o=Q.p,Q.p=2,f=Ye,Ye|=4;try{v0(e,t,a)}finally{Ye=f,Q.p=o,U.T=s}}At=1,ff(),mf(),gf()}}function ff(){if(At===1){At=0;var e=Rn,t=Ks,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=U.T,U.T=null;var s=Q.p;Q.p=2;var o=Ye;Ye|=4;try{Ih(t,e);var c=Lc,f=Wu(e.containerInfo),v=c.focusedElem,x=c.selectionRange;if(f!==v&&v&&v.ownerDocument&&Pu(v.ownerDocument.documentElement,v)){if(x!==null&&lo(v)){var k=x.start,L=x.end;if(L===void 0&&(L=k),"selectionStart"in v)v.selectionStart=k,v.selectionEnd=Math.min(L,v.value.length);else{var $=v.ownerDocument||document,R=$&&$.defaultView||window;if(R.getSelection){var z=R.getSelection(),se=v.textContent.length,fe=Math.min(x.start,se),Je=x.end===void 0?fe:Math.min(x.end,se);!z.extend&&fe>Je&&(f=Je,Je=fe,fe=f);var N=Zu(v,fe),_=Zu(v,Je);if(N&&_&&(z.rangeCount!==1||z.anchorNode!==N.node||z.anchorOffset!==N.offset||z.focusNode!==_.node||z.focusOffset!==_.offset)){var C=$.createRange();C.setStart(N.node,N.offset),z.removeAllRanges(),fe>Je?(z.addRange(C),z.extend(_.node,_.offset)):(C.setEnd(_.node,_.offset),z.addRange(C))}}}}for($=[],z=v;z=z.parentNode;)z.nodeType===1&&$.push({element:z,left:z.scrollLeft,top:z.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<$.length;v++){var q=$[v];q.element.scrollLeft=q.left,q.element.scrollTop=q.top}}_l=!!Mc,Lc=Mc=null}finally{Ye=o,Q.p=s,U.T=a}}e.current=t,At=2}}function mf(){if(At===2){At=0;var e=Rn,t=Ks,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=U.T,U.T=null;var s=Q.p;Q.p=2;var o=Ye;Ye|=4;try{$h(e,t.alternate,t)}finally{Ye=o,Q.p=s,U.T=a}}At=3}}function gf(){if(At===4||At===3){At=0,xs();var e=Rn,t=Ks,a=rn,s=ef;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?At=5:(At=0,Ks=Rn=null,pf(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(kn=null),Ht(a),t=t.stateNode,J&&typeof J.onCommitFiberRoot=="function")try{J.onCommitFiberRoot(Te,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=U.T,o=Q.p,Q.p=2,U.T=null;try{for(var c=e.onRecoverableError,f=0;f<s.length;f++){var v=s[f];c(v.value,{componentStack:v.stack})}}finally{U.T=t,Q.p=o}}(rn&3)!==0&&ul(),Ma(e),o=e.pendingLanes,(a&261930)!==0&&(o&42)!==0?e===Sc?Ii++:(Ii=0,Sc=e):Ii=0,Xi(0)}}function pf(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Ti(t)))}function ul(){return ff(),mf(),gf(),yf()}function yf(){if(At!==5)return!1;var e=Rn,t=wc;wc=0;var a=Ht(rn),s=U.T,o=Q.p;try{Q.p=32>a?32:a,U.T=null,a=_c,_c=null;var c=Rn,f=rn;if(At=0,Ks=Rn=null,rn=0,(Ye&6)!==0)throw Error(l(331));var v=Ye;if(Ye|=4,Ph(c.current),Qh(c,c.current,f,a),Ye=v,Xi(0,!1),J&&typeof J.onPostCommitFiberRoot=="function")try{J.onPostCommitFiberRoot(Te,c)}catch{}return!0}finally{Q.p=o,U.T=s,pf(e,t)}}function vf(e,t,a){t=fa(a,t),t=tc(e.stateNode,t,2),e=En(e,t,2),e!==null&&(Vt(e,2),Ma(e))}function Ie(e,t,a){if(e.tag===3)vf(e,e,a);else for(;t!==null;){if(t.tag===3){vf(t,e,a);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(kn===null||!kn.has(s))){e=fa(a,e),a=vh(2),s=En(t,a,2),s!==null&&(bh(a,s,t,e),Vt(s,2),Ma(s));break}}t=t.return}}function Nc(e,t,a){var s=e.pingCache;if(s===null){s=e.pingCache=new w0;var o=new Set;s.set(t,o)}else o=s.get(t),o===void 0&&(o=new Set,s.set(t,o));o.has(a)||(vc=!0,o.add(a),e=N0.bind(null,e,t,a),t.then(e,e))}function N0(e,t,a){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Fe===e&&(Le&a)===a&&(ut===4||ut===3&&(Le&62914560)===Le&&300>ht()-sl?(Ye&2)===0&&Is(e,0):bc|=a,Ys===Le&&(Ys=0)),Ma(e)}function bf(e,t){t===0&&(t=_a()),e=es(e,t),e!==null&&(Vt(e,t),Ma(e))}function T0(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),bf(e,a)}function A0(e,t){var a=0;switch(e.tag){case 31:case 13:var s=e.stateNode,o=e.memoizedState;o!==null&&(a=o.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(l(314))}s!==null&&s.delete(t),bf(e,a)}function O0(e,t){return ca(e,t)}var dl=null,Qs=null,Tc=!1,hl=!1,Ac=!1,Un=0;function Ma(e){e!==Qs&&e.next===null&&(Qs===null?dl=Qs=e:Qs=Qs.next=e),hl=!0,Tc||(Tc=!0,k0())}function Xi(e,t){if(!Ac&&hl){Ac=!0;do for(var a=!1,s=dl;s!==null;){if(e!==0){var o=s.pendingLanes;if(o===0)var c=0;else{var f=s.suspendedLanes,v=s.pingedLanes;c=(1<<31-xe(42|e)+1)-1,c&=o&~(f&~v),c=c&201326741?c&201326741|1:c?c|2:0}c!==0&&(a=!0,Sf(s,c))}else c=Le,c=ua(s,s===Fe?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(c&3)===0||da(s,c)||(a=!0,Sf(s,c));s=s.next}while(a);Ac=!1}}function C0(){xf()}function xf(){hl=Tc=!1;var e=0;Un!==0&&$0()&&(e=Un);for(var t=ht(),a=null,s=dl;s!==null;){var o=s.next,c=wf(s,t);c===0?(s.next=null,a===null?dl=o:a.next=o,o===null&&(Qs=a)):(a=s,(e!==0||(c&3)!==0)&&(hl=!0)),s=o}At!==0&&At!==5||Xi(e),Un!==0&&(Un=0)}function wf(e,t){for(var a=e.suspendedLanes,s=e.pingedLanes,o=e.expirationTimes,c=e.pendingLanes&-62914561;0<c;){var f=31-xe(c),v=1<<f,x=o[f];x===-1?((v&a)===0||(v&s)!==0)&&(o[f]=dn(v,t)):x<=t&&(e.expiredLanes|=v),c&=~v}if(t=Fe,a=Le,a=ua(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,a===0||e===t&&(Ke===2||Ke===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&qa(s),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||da(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(s!==null&&qa(s),Ht(a)){case 2:case 8:a=ka;break;case 32:a=M;break;case 268435456:a=ie;break;default:a=M}return s=_f.bind(null,e),a=ca(a,s),e.callbackPriority=t,e.callbackNode=a,t}return s!==null&&s!==null&&qa(s),e.callbackPriority=2,e.callbackNode=null,2}function _f(e,t){if(At!==0&&At!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(ul()&&e.callbackNode!==a)return null;var s=Le;return s=ua(e,e===Fe?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(af(e,s,t),wf(e,ht()),e.callbackNode!=null&&e.callbackNode===a?_f.bind(null,e):null)}function Sf(e,t){if(ul())return null;af(e,t,!0)}function k0(){V0(function(){(Ye&6)!==0?ca(Ha,C0):xf()})}function Oc(){if(Un===0){var e=Ds;e===0&&(e=He,He<<=1,(He&261888)===0&&(He=256)),Un=e}return Un}function jf(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:xr(""+e)}function Ef(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function R0(e,t,a,s,o){if(t==="submit"&&a&&a.stateNode===o){var c=jf((o[ft]||null).action),f=s.submitter;f&&(t=(t=f[ft]||null)?jf(t.formAction):f.getAttribute("formAction"),t!==null&&(c=t,f=null));var v=new jr("action","action",null,s,o);e.push({event:v,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(Un!==0){var x=f?Ef(o,f):new FormData(o);Jo(a,{pending:!0,data:x,method:o.method,action:c},null,x)}}else typeof c=="function"&&(v.preventDefault(),x=f?Ef(o,f):new FormData(o),Jo(a,{pending:!0,data:x,method:o.method,action:c},c,x))},currentTarget:o}]})}}for(var Cc=0;Cc<ho.length;Cc++){var kc=ho[Cc],D0=kc.toLowerCase(),U0=kc[0].toUpperCase()+kc.slice(1);ja(D0,"on"+U0)}ja(td,"onAnimationEnd"),ja(ad,"onAnimationIteration"),ja(nd,"onAnimationStart"),ja("dblclick","onDoubleClick"),ja("focusin","onFocus"),ja("focusout","onBlur"),ja(Zg,"onTransitionRun"),ja(Pg,"onTransitionStart"),ja(Wg,"onTransitionCancel"),ja(sd,"onTransitionEnd"),ye("onMouseEnter",["mouseout","mouseover"]),ye("onMouseLeave",["mouseout","mouseover"]),ye("onPointerEnter",["pointerout","pointerover"]),ye("onPointerLeave",["pointerout","pointerover"]),Z("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Z("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Z("onBeforeInput",["compositionend","keypress","textInput","paste"]),Z("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Z("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Z("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),z0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Qi));function Nf(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var s=e[a],o=s.event;s=s.listeners;e:{var c=void 0;if(t)for(var f=s.length-1;0<=f;f--){var v=s[f],x=v.instance,k=v.currentTarget;if(v=v.listener,x!==c&&o.isPropagationStopped())break e;c=v,o.currentTarget=k;try{c(o)}catch(L){Tr(L)}o.currentTarget=null,c=x}else for(f=0;f<s.length;f++){if(v=s[f],x=v.instance,k=v.currentTarget,v=v.listener,x!==c&&o.isPropagationStopped())break e;c=v,o.currentTarget=k;try{c(o)}catch(L){Tr(L)}o.currentTarget=null,c=x}}}}function ze(e,t){var a=t[Xn];a===void 0&&(a=t[Xn]=new Set);var s=e+"__bubble";a.has(s)||(Tf(t,e,2,!1),a.add(s))}function Rc(e,t,a){var s=0;t&&(s|=4),Tf(a,e,s,t)}var fl="_reactListening"+Math.random().toString(36).slice(2);function Dc(e){if(!e[fl]){e[fl]=!0,fi.forEach(function(a){a!=="selectionchange"&&(z0.has(a)||Rc(a,!1,e),Rc(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[fl]||(t[fl]=!0,Rc("selectionchange",!1,t))}}function Tf(e,t,a,s){switch(am(t)){case 2:var o=cp;break;case 8:o=up;break;default:o=Qc}a=o.bind(null,t,a,e),o=void 0,!Wl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),s?o!==void 0?e.addEventListener(t,a,{capture:!0,passive:o}):e.addEventListener(t,a,!0):o!==void 0?e.addEventListener(t,a,{passive:o}):e.addEventListener(t,a,!1)}function Uc(e,t,a,s,o){var c=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var f=s.tag;if(f===3||f===4){var v=s.stateNode.containerInfo;if(v===o)break;if(f===4)for(f=s.return;f!==null;){var x=f.tag;if((x===3||x===4)&&f.stateNode.containerInfo===o)return;f=f.return}for(;v!==null;){if(f=hn(v),f===null)return;if(x=f.tag,x===5||x===6||x===26||x===27){s=c=f;continue e}v=v.parentNode}}s=s.return}ku(function(){var k=c,L=Zl(a),$=[];e:{var R=id.get(e);if(R!==void 0){var z=jr,se=e;switch(e){case"keypress":if(_r(a)===0)break e;case"keydown":case"keyup":z=Ag;break;case"focusin":se="focus",z=ao;break;case"focusout":se="blur",z=ao;break;case"beforeblur":case"afterblur":z=ao;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":z=Uu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":z=pg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":z=kg;break;case td:case ad:case nd:z=bg;break;case sd:z=Dg;break;case"scroll":case"scrollend":z=mg;break;case"wheel":z=zg;break;case"copy":case"cut":case"paste":z=wg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":z=Mu;break;case"toggle":case"beforetoggle":z=Lg}var fe=(t&4)!==0,Je=!fe&&(e==="scroll"||e==="scrollend"),N=fe?R!==null?R+"Capture":null:R;fe=[];for(var _=k,C;_!==null;){var q=_;if(C=q.stateNode,q=q.tag,q!==5&&q!==26&&q!==27||C===null||N===null||(q=pi(_,N),q!=null&&fe.push(Ji(_,q,C))),Je)break;_=_.return}0<fe.length&&(R=new z(R,se,null,a,L),$.push({event:R,listeners:fe}))}}if((t&7)===0){e:{if(R=e==="mouseover"||e==="pointerover",z=e==="mouseout"||e==="pointerout",R&&a!==Jl&&(se=a.relatedTarget||a.fromElement)&&(hn(se)||se[Ra]))break e;if((z||R)&&(R=L.window===L?L:(R=L.ownerDocument)?R.defaultView||R.parentWindow:window,z?(se=a.relatedTarget||a.toElement,z=k,se=se?hn(se):null,se!==null&&(Je=h(se),fe=se.tag,se!==Je||fe!==5&&fe!==27&&fe!==6)&&(se=null)):(z=null,se=k),z!==se)){if(fe=Uu,q="onMouseLeave",N="onMouseEnter",_="mouse",(e==="pointerout"||e==="pointerover")&&(fe=Mu,q="onPointerLeave",N="onPointerEnter",_="pointer"),Je=z==null?R:Jn(z),C=se==null?R:Jn(se),R=new fe(q,_+"leave",z,a,L),R.target=Je,R.relatedTarget=C,q=null,hn(L)===k&&(fe=new fe(N,_+"enter",se,a,L),fe.target=C,fe.relatedTarget=Je,q=fe),Je=q,z&&se)t:{for(fe=M0,N=z,_=se,C=0,q=N;q;q=fe(q))C++;q=0;for(var ce=_;ce;ce=fe(ce))q++;for(;0<C-q;)N=fe(N),C--;for(;0<q-C;)_=fe(_),q--;for(;C--;){if(N===_||_!==null&&N===_.alternate){fe=N;break t}N=fe(N),_=fe(_)}fe=null}else fe=null;z!==null&&Af($,R,z,fe,!1),se!==null&&Je!==null&&Af($,Je,se,fe,!0)}}e:{if(R=k?Jn(k):window,z=R.nodeName&&R.nodeName.toLowerCase(),z==="select"||z==="input"&&R.type==="file")var $e=Yu;else if(Gu(R))if(Ku)$e=Xg;else{$e=Kg;var re=Yg}else z=R.nodeName,!z||z.toLowerCase()!=="input"||R.type!=="checkbox"&&R.type!=="radio"?k&&Ql(k.elementType)&&($e=Yu):$e=Ig;if($e&&($e=$e(e,k))){Vu($,$e,a,L);break e}re&&re(e,R,k),e==="focusout"&&k&&R.type==="number"&&k.memoizedProps.value!=null&&gi(R,"number",R.value)}switch(re=k?Jn(k):window,e){case"focusin":(Gu(re)||re.contentEditable==="true")&&(Es=re,oo=k,ji=null);break;case"focusout":ji=oo=Es=null;break;case"mousedown":co=!0;break;case"contextmenu":case"mouseup":case"dragend":co=!1,Fu($,a,L);break;case"selectionchange":if(Jg)break;case"keydown":case"keyup":Fu($,a,L)}var Re;if(so)e:{switch(e){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else js?Hu(e,a)&&(Be="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Be="onCompositionStart");Be&&(Lu&&a.locale!=="ko"&&(js||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&js&&(Re=Ru()):(vn=L,Fl="value"in vn?vn.value:vn.textContent,js=!0)),re=ml(k,Be),0<re.length&&(Be=new zu(Be,e,null,a,L),$.push({event:Be,listeners:re}),Re?Be.data=Re:(Re=$u(a),Re!==null&&(Be.data=Re)))),(Re=qg?Hg(e,a):$g(e,a))&&(Be=ml(k,"onBeforeInput"),0<Be.length&&(re=new zu("onBeforeInput","beforeinput",null,a,L),$.push({event:re,listeners:Be}),re.data=Re)),R0($,e,k,a,L)}Nf($,t)})}function Ji(e,t,a){return{instance:e,listener:t,currentTarget:a}}function ml(e,t){for(var a=t+"Capture",s=[];e!==null;){var o=e,c=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||c===null||(o=pi(e,a),o!=null&&s.unshift(Ji(e,o,c)),o=pi(e,t),o!=null&&s.push(Ji(e,o,c))),e.tag===3)return s;e=e.return}return[]}function M0(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Af(e,t,a,s,o){for(var c=t._reactName,f=[];a!==null&&a!==s;){var v=a,x=v.alternate,k=v.stateNode;if(v=v.tag,x!==null&&x===s)break;v!==5&&v!==26&&v!==27||k===null||(x=k,o?(k=pi(a,c),k!=null&&f.unshift(Ji(a,k,x))):o||(k=pi(a,c),k!=null&&f.push(Ji(a,k,x)))),a=a.return}f.length!==0&&e.push({event:t,listeners:f})}var L0=/\r\n?/g,B0=/\u0000|\uFFFD/g;function Of(e){return(typeof e=="string"?e:""+e).replace(L0,`
`).replace(B0,"")}function Cf(e,t){return t=Of(t),Of(e)===t}function Qe(e,t,a,s,o,c){switch(a){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||ws(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&ws(e,""+s);break;case"className":pn(e,"class",s);break;case"tabIndex":pn(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":pn(e,a,s);break;case"style":Ou(e,s,c);break;case"data":if(t!=="object"){pn(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(a);break}s=xr(""+s),e.setAttribute(a,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof c=="function"&&(a==="formAction"?(t!=="input"&&Qe(e,t,"name",o.name,o,null),Qe(e,t,"formEncType",o.formEncType,o,null),Qe(e,t,"formMethod",o.formMethod,o,null),Qe(e,t,"formTarget",o.formTarget,o,null)):(Qe(e,t,"encType",o.encType,o,null),Qe(e,t,"method",o.method,o,null),Qe(e,t,"target",o.target,o,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(a);break}s=xr(""+s),e.setAttribute(a,s);break;case"onClick":s!=null&&(e.onclick=Ya);break;case"onScroll":s!=null&&ze("scroll",e);break;case"onScrollEnd":s!=null&&ze("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(l(61));if(a=s.__html,a!=null){if(o.children!=null)throw Error(l(60));e.innerHTML=a}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}a=xr(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,""+s):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":s===!0?e.setAttribute(a,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,s):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(a,s):e.removeAttribute(a);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(a):e.setAttribute(a,s);break;case"popover":ze("beforetoggle",e),ze("toggle",e),Zn(e,"popover",s);break;case"xlinkActuate":Sa(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Sa(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Sa(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Sa(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Sa(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Sa(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Sa(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Sa(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Sa(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":Zn(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=hg.get(a)||a,Zn(e,a,s))}}function zc(e,t,a,s,o,c){switch(a){case"style":Ou(e,s,c);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(l(61));if(a=s.__html,a!=null){if(o.children!=null)throw Error(l(60));e.innerHTML=a}}break;case"children":typeof s=="string"?ws(e,s):(typeof s=="number"||typeof s=="bigint")&&ws(e,""+s);break;case"onScroll":s!=null&&ze("scroll",e);break;case"onScrollEnd":s!=null&&ze("scrollend",e);break;case"onClick":s!=null&&(e.onclick=Ya);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!O.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(o=a.endsWith("Capture"),t=a.slice(2,o?a.length-7:void 0),c=e[ft]||null,c=c!=null?c[a]:null,typeof c=="function"&&e.removeEventListener(t,c,o),typeof s=="function")){typeof c!="function"&&c!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,s,o);break e}a in e?e[a]=s:s===!0?e.setAttribute(a,""):Zn(e,a,s)}}}function Mt(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ze("error",e),ze("load",e);var s=!1,o=!1,c;for(c in a)if(a.hasOwnProperty(c)){var f=a[c];if(f!=null)switch(c){case"src":s=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:Qe(e,t,c,f,a,null)}}o&&Qe(e,t,"srcSet",a.srcSet,a,null),s&&Qe(e,t,"src",a.src,a,null);return;case"input":ze("invalid",e);var v=c=f=o=null,x=null,k=null;for(s in a)if(a.hasOwnProperty(s)){var L=a[s];if(L!=null)switch(s){case"name":o=L;break;case"type":f=L;break;case"checked":x=L;break;case"defaultChecked":k=L;break;case"value":c=L;break;case"defaultValue":v=L;break;case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(l(137,t));break;default:Qe(e,t,s,L,a,null)}}br(e,c,v,x,k,f,o,!1);return;case"select":ze("invalid",e),s=f=c=null;for(o in a)if(a.hasOwnProperty(o)&&(v=a[o],v!=null))switch(o){case"value":c=v;break;case"defaultValue":f=v;break;case"multiple":s=v;default:Qe(e,t,o,v,a,null)}t=c,a=f,e.multiple=!!s,t!=null?ee(e,!!s,t,!1):a!=null&&ee(e,!!s,a,!0);return;case"textarea":ze("invalid",e),c=o=s=null;for(f in a)if(a.hasOwnProperty(f)&&(v=a[f],v!=null))switch(f){case"value":s=v;break;case"defaultValue":o=v;break;case"children":c=v;break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(l(91));break;default:Qe(e,t,f,v,a,null)}Tu(e,s,o,c);return;case"option":for(x in a)if(a.hasOwnProperty(x)&&(s=a[x],s!=null))switch(x){case"selected":e.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:Qe(e,t,x,s,a,null)}return;case"dialog":ze("beforetoggle",e),ze("toggle",e),ze("cancel",e),ze("close",e);break;case"iframe":case"object":ze("load",e);break;case"video":case"audio":for(s=0;s<Qi.length;s++)ze(Qi[s],e);break;case"image":ze("error",e),ze("load",e);break;case"details":ze("toggle",e);break;case"embed":case"source":case"link":ze("error",e),ze("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(k in a)if(a.hasOwnProperty(k)&&(s=a[k],s!=null))switch(k){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:Qe(e,t,k,s,a,null)}return;default:if(Ql(t)){for(L in a)a.hasOwnProperty(L)&&(s=a[L],s!==void 0&&zc(e,t,L,s,a,void 0));return}}for(v in a)a.hasOwnProperty(v)&&(s=a[v],s!=null&&Qe(e,t,v,s,a,null))}function q0(e,t,a,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,c=null,f=null,v=null,x=null,k=null,L=null;for(z in a){var $=a[z];if(a.hasOwnProperty(z)&&$!=null)switch(z){case"checked":break;case"value":break;case"defaultValue":x=$;default:s.hasOwnProperty(z)||Qe(e,t,z,null,s,$)}}for(var R in s){var z=s[R];if($=a[R],s.hasOwnProperty(R)&&(z!=null||$!=null))switch(R){case"type":c=z;break;case"name":o=z;break;case"checked":k=z;break;case"defaultChecked":L=z;break;case"value":f=z;break;case"defaultValue":v=z;break;case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(l(137,t));break;default:z!==$&&Qe(e,t,R,z,s,$)}}mi(e,f,v,x,k,L,c,o);return;case"select":z=f=v=R=null;for(c in a)if(x=a[c],a.hasOwnProperty(c)&&x!=null)switch(c){case"value":break;case"multiple":z=x;default:s.hasOwnProperty(c)||Qe(e,t,c,null,s,x)}for(o in s)if(c=s[o],x=a[o],s.hasOwnProperty(o)&&(c!=null||x!=null))switch(o){case"value":R=c;break;case"defaultValue":v=c;break;case"multiple":f=c;default:c!==x&&Qe(e,t,o,c,s,x)}t=v,a=f,s=z,R!=null?ee(e,!!a,R,!1):!!s!=!!a&&(t!=null?ee(e,!!a,t,!0):ee(e,!!a,a?[]:"",!1));return;case"textarea":z=R=null;for(v in a)if(o=a[v],a.hasOwnProperty(v)&&o!=null&&!s.hasOwnProperty(v))switch(v){case"value":break;case"children":break;default:Qe(e,t,v,null,s,o)}for(f in s)if(o=s[f],c=a[f],s.hasOwnProperty(f)&&(o!=null||c!=null))switch(f){case"value":R=o;break;case"defaultValue":z=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(l(91));break;default:o!==c&&Qe(e,t,f,o,s,c)}Nu(e,R,z);return;case"option":for(var se in a)if(R=a[se],a.hasOwnProperty(se)&&R!=null&&!s.hasOwnProperty(se))switch(se){case"selected":e.selected=!1;break;default:Qe(e,t,se,null,s,R)}for(x in s)if(R=s[x],z=a[x],s.hasOwnProperty(x)&&R!==z&&(R!=null||z!=null))switch(x){case"selected":e.selected=R&&typeof R!="function"&&typeof R!="symbol";break;default:Qe(e,t,x,R,s,z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var fe in a)R=a[fe],a.hasOwnProperty(fe)&&R!=null&&!s.hasOwnProperty(fe)&&Qe(e,t,fe,null,s,R);for(k in s)if(R=s[k],z=a[k],s.hasOwnProperty(k)&&R!==z&&(R!=null||z!=null))switch(k){case"children":case"dangerouslySetInnerHTML":if(R!=null)throw Error(l(137,t));break;default:Qe(e,t,k,R,s,z)}return;default:if(Ql(t)){for(var Je in a)R=a[Je],a.hasOwnProperty(Je)&&R!==void 0&&!s.hasOwnProperty(Je)&&zc(e,t,Je,void 0,s,R);for(L in s)R=s[L],z=a[L],!s.hasOwnProperty(L)||R===z||R===void 0&&z===void 0||zc(e,t,L,R,s,z);return}}for(var N in a)R=a[N],a.hasOwnProperty(N)&&R!=null&&!s.hasOwnProperty(N)&&Qe(e,t,N,null,s,R);for($ in s)R=s[$],z=a[$],!s.hasOwnProperty($)||R===z||R==null&&z==null||Qe(e,t,$,R,s,z)}function kf(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function H0(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),s=0;s<a.length;s++){var o=a[s],c=o.transferSize,f=o.initiatorType,v=o.duration;if(c&&v&&kf(f)){for(f=0,v=o.responseEnd,s+=1;s<a.length;s++){var x=a[s],k=x.startTime;if(k>v)break;var L=x.transferSize,$=x.initiatorType;L&&kf($)&&(x=x.responseEnd,f+=L*(x<v?1:(v-k)/(x-k)))}if(--s,t+=8*(c+f)/(o.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Mc=null,Lc=null;function gl(e){return e.nodeType===9?e:e.ownerDocument}function Rf(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Df(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Bc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var qc=null;function $0(){var e=window.event;return e&&e.type==="popstate"?e===qc?!1:(qc=e,!0):(qc=null,!1)}var Uf=typeof setTimeout=="function"?setTimeout:void 0,G0=typeof clearTimeout=="function"?clearTimeout:void 0,zf=typeof Promise=="function"?Promise:void 0,V0=typeof queueMicrotask=="function"?queueMicrotask:typeof zf<"u"?function(e){return zf.resolve(null).then(e).catch(Y0)}:Uf;function Y0(e){setTimeout(function(){throw e})}function zn(e){return e==="head"}function Mf(e,t){var a=t,s=0;do{var o=a.nextSibling;if(e.removeChild(a),o&&o.nodeType===8)if(a=o.data,a==="/$"||a==="/&"){if(s===0){e.removeChild(o),Ws(t);return}s--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")s++;else if(a==="html")Zi(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Zi(a);for(var c=a.firstChild;c;){var f=c.nextSibling,v=c.nodeName;c[Qn]||v==="SCRIPT"||v==="STYLE"||v==="LINK"&&c.rel.toLowerCase()==="stylesheet"||a.removeChild(c),c=f}}else a==="body"&&Zi(e.ownerDocument.body);a=o}while(a);Ws(t)}function Lf(e,t){var a=e;e=0;do{var s=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),s&&s.nodeType===8)if(a=s.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=s}while(a)}function Hc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Hc(a),hi(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function K0(e,t,a,s){for(;e.nodeType===1;){var o=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[Qn])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(c=e.getAttribute("rel"),c==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(c!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(c=e.getAttribute("src"),(c!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&c&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var c=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===c)return e}else return e;if(e=va(e.nextSibling),e===null)break}return null}function I0(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=va(e.nextSibling),e===null))return null;return e}function Bf(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=va(e.nextSibling),e===null))return null;return e}function $c(e){return e.data==="$?"||e.data==="$~"}function Gc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function X0(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var s=function(){t(),a.removeEventListener("DOMContentLoaded",s)};a.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function va(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Vc=null;function qf(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return va(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function Hf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function $f(e,t,a){switch(t=gl(a),e){case"html":if(e=t.documentElement,!e)throw Error(l(452));return e;case"head":if(e=t.head,!e)throw Error(l(453));return e;case"body":if(e=t.body,!e)throw Error(l(454));return e;default:throw Error(l(451))}}function Zi(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);hi(e)}var ba=new Map,Gf=new Set;function pl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ln=Q.d;Q.d={f:Q0,r:J0,D:Z0,C:P0,L:W0,m:F0,X:tp,S:ep,M:ap};function Q0(){var e=ln.f(),t=ll();return e||t}function J0(e){var t=fn(e);t!==null&&t.tag===5&&t.type==="form"?sh(t):ln.r(e)}var Js=typeof document>"u"?null:document;function Vf(e,t,a){var s=Js;if(s&&typeof t=="string"&&t){var o=Kt(t);o='link[rel="'+e+'"][href="'+o+'"]',typeof a=="string"&&(o+='[crossorigin="'+a+'"]'),Gf.has(o)||(Gf.add(o),e={rel:e,crossOrigin:a,href:t},s.querySelector(o)===null&&(t=s.createElement("link"),Mt(t,"link",e),mt(t),s.head.appendChild(t)))}}function Z0(e){ln.D(e),Vf("dns-prefetch",e,null)}function P0(e,t){ln.C(e,t),Vf("preconnect",e,t)}function W0(e,t,a){ln.L(e,t,a);var s=Js;if(s&&e&&t){var o='link[rel="preload"][as="'+Kt(t)+'"]';t==="image"&&a&&a.imageSrcSet?(o+='[imagesrcset="'+Kt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(o+='[imagesizes="'+Kt(a.imageSizes)+'"]')):o+='[href="'+Kt(e)+'"]';var c=o;switch(t){case"style":c=Zs(e);break;case"script":c=Ps(e)}ba.has(c)||(e=j({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),ba.set(c,e),s.querySelector(o)!==null||t==="style"&&s.querySelector(Pi(c))||t==="script"&&s.querySelector(Wi(c))||(t=s.createElement("link"),Mt(t,"link",e),mt(t),s.head.appendChild(t)))}}function F0(e,t){ln.m(e,t);var a=Js;if(a&&e){var s=t&&typeof t.as=="string"?t.as:"script",o='link[rel="modulepreload"][as="'+Kt(s)+'"][href="'+Kt(e)+'"]',c=o;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":c=Ps(e)}if(!ba.has(c)&&(e=j({rel:"modulepreload",href:e},t),ba.set(c,e),a.querySelector(o)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Wi(c)))return}s=a.createElement("link"),Mt(s,"link",e),mt(s),a.head.appendChild(s)}}}function ep(e,t,a){ln.S(e,t,a);var s=Js;if(s&&e){var o=mn(s).hoistableStyles,c=Zs(e);t=t||"default";var f=o.get(c);if(!f){var v={loading:0,preload:null};if(f=s.querySelector(Pi(c)))v.loading=5;else{e=j({rel:"stylesheet",href:e,"data-precedence":t},a),(a=ba.get(c))&&Yc(e,a);var x=f=s.createElement("link");mt(x),Mt(x,"link",e),x._p=new Promise(function(k,L){x.onload=k,x.onerror=L}),x.addEventListener("load",function(){v.loading|=1}),x.addEventListener("error",function(){v.loading|=2}),v.loading|=4,yl(f,t,s)}f={type:"stylesheet",instance:f,count:1,state:v},o.set(c,f)}}}function tp(e,t){ln.X(e,t);var a=Js;if(a&&e){var s=mn(a).hoistableScripts,o=Ps(e),c=s.get(o);c||(c=a.querySelector(Wi(o)),c||(e=j({src:e,async:!0},t),(t=ba.get(o))&&Kc(e,t),c=a.createElement("script"),mt(c),Mt(c,"link",e),a.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},s.set(o,c))}}function ap(e,t){ln.M(e,t);var a=Js;if(a&&e){var s=mn(a).hoistableScripts,o=Ps(e),c=s.get(o);c||(c=a.querySelector(Wi(o)),c||(e=j({src:e,async:!0,type:"module"},t),(t=ba.get(o))&&Kc(e,t),c=a.createElement("script"),mt(c),Mt(c,"link",e),a.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},s.set(o,c))}}function Yf(e,t,a,s){var o=(o=Ce.current)?pl(o):null;if(!o)throw Error(l(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=Zs(a.href),a=mn(o).hoistableStyles,s=a.get(t),s||(s={type:"style",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Zs(a.href);var c=mn(o).hoistableStyles,f=c.get(e);if(f||(o=o.ownerDocument||o,f={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,f),(c=o.querySelector(Pi(e)))&&!c._p&&(f.instance=c,f.state.loading=5),ba.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ba.set(e,a),c||np(o,e,a,f.state))),t&&s===null)throw Error(l(528,""));return f}if(t&&s!==null)throw Error(l(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Ps(a),a=mn(o).hoistableScripts,s=a.get(t),s||(s={type:"script",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,e))}}function Zs(e){return'href="'+Kt(e)+'"'}function Pi(e){return'link[rel="stylesheet"]['+e+"]"}function Kf(e){return j({},e,{"data-precedence":e.precedence,precedence:null})}function np(e,t,a,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),Mt(t,"link",a),mt(t),e.head.appendChild(t))}function Ps(e){return'[src="'+Kt(e)+'"]'}function Wi(e){return"script[async]"+e}function If(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+Kt(a.href)+'"]');if(s)return t.instance=s,mt(s),s;var o=j({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),mt(s),Mt(s,"style",o),yl(s,a.precedence,e),t.instance=s;case"stylesheet":o=Zs(a.href);var c=e.querySelector(Pi(o));if(c)return t.state.loading|=4,t.instance=c,mt(c),c;s=Kf(a),(o=ba.get(o))&&Yc(s,o),c=(e.ownerDocument||e).createElement("link"),mt(c);var f=c;return f._p=new Promise(function(v,x){f.onload=v,f.onerror=x}),Mt(c,"link",s),t.state.loading|=4,yl(c,a.precedence,e),t.instance=c;case"script":return c=Ps(a.src),(o=e.querySelector(Wi(c)))?(t.instance=o,mt(o),o):(s=a,(o=ba.get(c))&&(s=j({},a),Kc(s,o)),e=e.ownerDocument||e,o=e.createElement("script"),mt(o),Mt(o,"link",s),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(l(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(s=t.instance,t.state.loading|=4,yl(s,a.precedence,e));return t.instance}function yl(e,t,a){for(var s=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=s.length?s[s.length-1]:null,c=o,f=0;f<s.length;f++){var v=s[f];if(v.dataset.precedence===t)c=v;else if(c!==o)break}c?c.parentNode.insertBefore(e,c.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function Yc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Kc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var vl=null;function Xf(e,t,a){if(vl===null){var s=new Map,o=vl=new Map;o.set(a,s)}else o=vl,s=o.get(a),s||(s=new Map,o.set(a,s));if(s.has(e))return s;for(s.set(e,null),a=a.getElementsByTagName(e),o=0;o<a.length;o++){var c=a[o];if(!(c[Qn]||c[lt]||e==="link"&&c.getAttribute("rel")==="stylesheet")&&c.namespaceURI!=="http://www.w3.org/2000/svg"){var f=c.getAttribute(t)||"";f=e+f;var v=s.get(f);v?v.push(c):s.set(f,[c])}}return s}function Qf(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function sp(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Jf(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function ip(e,t,a,s){if(a.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var o=Zs(s.href),c=t.querySelector(Pi(o));if(c){t=c._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=bl.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=c,mt(c);return}c=t.ownerDocument||t,s=Kf(s),(o=ba.get(o))&&Yc(s,o),c=c.createElement("link"),mt(c);var f=c;f._p=new Promise(function(v,x){f.onload=v,f.onerror=x}),Mt(c,"link",s),a.instance=c}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=bl.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var Ic=0;function rp(e,t){return e.stylesheets&&e.count===0&&wl(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var s=setTimeout(function(){if(e.stylesheets&&wl(e,e.stylesheets),e.unsuspend){var c=e.unsuspend;e.unsuspend=null,c()}},6e4+t);0<e.imgBytes&&Ic===0&&(Ic=62500*H0());var o=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&wl(e,e.stylesheets),e.unsuspend)){var c=e.unsuspend;e.unsuspend=null,c()}},(e.imgBytes>Ic?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(s),clearTimeout(o)}}:null}function bl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)wl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var xl=null;function wl(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,xl=new Map,t.forEach(lp,e),xl=null,bl.call(e))}function lp(e,t){if(!(t.state.loading&4)){var a=xl.get(e);if(a)var s=a.get(null);else{a=new Map,xl.set(e,a);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),c=0;c<o.length;c++){var f=o[c];(f.nodeName==="LINK"||f.getAttribute("media")!=="not all")&&(a.set(f.dataset.precedence,f),s=f)}s&&a.set(null,s)}o=t.instance,f=o.getAttribute("data-precedence"),c=a.get(f)||s,c===s&&a.set(null,o),a.set(f,o),this.count++,s=bl.bind(this),o.addEventListener("load",s),o.addEventListener("error",s),c?c.parentNode.insertBefore(o,c.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),t.state.loading|=4}}var Fi={$$typeof:H,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function op(e,t,a,s,o,c,f,v,x){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ft(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ft(0),this.hiddenUpdates=Ft(null),this.identifierPrefix=s,this.onUncaughtError=o,this.onCaughtError=c,this.onRecoverableError=f,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=x,this.incompleteTransitions=new Map}function Zf(e,t,a,s,o,c,f,v,x,k,L,$){return e=new op(e,t,a,f,x,k,L,$,v),t=1,c===!0&&(t|=24),c=ta(3,null,null,t),e.current=c,c.stateNode=e,t=Eo(),t.refCount++,e.pooledCache=t,t.refCount++,c.memoizedState={element:s,isDehydrated:a,cache:t},Oo(c),e}function Pf(e){return e?(e=As,e):As}function Wf(e,t,a,s,o,c){o=Pf(o),s.context===null?s.context=o:s.pendingContext=o,s=jn(t),s.payload={element:a},c=c===void 0?null:c,c!==null&&(s.callback=c),a=En(e,s,t),a!==null&&(Pt(a,e,t),ki(a,e,t))}function Ff(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function Xc(e,t){Ff(e,t),(e=e.alternate)&&Ff(e,t)}function em(e){if(e.tag===13||e.tag===31){var t=es(e,67108864);t!==null&&Pt(t,e,67108864),Xc(e,67108864)}}function tm(e){if(e.tag===13||e.tag===31){var t=ra();t=Yt(t);var a=es(e,t);a!==null&&Pt(a,e,t),Xc(e,t)}}var _l=!0;function cp(e,t,a,s){var o=U.T;U.T=null;var c=Q.p;try{Q.p=2,Qc(e,t,a,s)}finally{Q.p=c,U.T=o}}function up(e,t,a,s){var o=U.T;U.T=null;var c=Q.p;try{Q.p=8,Qc(e,t,a,s)}finally{Q.p=c,U.T=o}}function Qc(e,t,a,s){if(_l){var o=Jc(s);if(o===null)Uc(e,t,s,Sl,a),nm(e,s);else if(hp(o,e,t,a,s))s.stopPropagation();else if(nm(e,s),t&4&&-1<dp.indexOf(e)){for(;o!==null;){var c=fn(o);if(c!==null)switch(c.tag){case 3:if(c=c.stateNode,c.current.memoizedState.isDehydrated){var f=et(c.pendingLanes);if(f!==0){var v=c;for(v.pendingLanes|=2,v.entangledLanes|=2;f;){var x=1<<31-xe(f);v.entanglements[1]|=x,f&=~x}Ma(c),(Ye&6)===0&&(il=ht()+500,Xi(0))}}break;case 31:case 13:v=es(c,2),v!==null&&Pt(v,c,2),ll(),Xc(c,2)}if(c=Jc(s),c===null&&Uc(e,t,s,Sl,a),c===o)break;o=c}o!==null&&s.stopPropagation()}else Uc(e,t,s,null,a)}}function Jc(e){return e=Zl(e),Zc(e)}var Sl=null;function Zc(e){if(Sl=null,e=hn(e),e!==null){var t=h(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=m(t),e!==null)return e;e=null}else if(a===31){if(e=g(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Sl=e,null}function am(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Wt()){case Ha:return 2;case ka:return 8;case M:case he:return 32;case ie:return 268435456;default:return 32}default:return 32}}var Pc=!1,Mn=null,Ln=null,Bn=null,er=new Map,tr=new Map,qn=[],dp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function nm(e,t){switch(e){case"focusin":case"focusout":Mn=null;break;case"dragenter":case"dragleave":Ln=null;break;case"mouseover":case"mouseout":Bn=null;break;case"pointerover":case"pointerout":er.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":tr.delete(t.pointerId)}}function ar(e,t,a,s,o,c){return e===null||e.nativeEvent!==c?(e={blockedOn:t,domEventName:a,eventSystemFlags:s,nativeEvent:c,targetContainers:[o]},t!==null&&(t=fn(t),t!==null&&em(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function hp(e,t,a,s,o){switch(t){case"focusin":return Mn=ar(Mn,e,t,a,s,o),!0;case"dragenter":return Ln=ar(Ln,e,t,a,s,o),!0;case"mouseover":return Bn=ar(Bn,e,t,a,s,o),!0;case"pointerover":var c=o.pointerId;return er.set(c,ar(er.get(c)||null,e,t,a,s,o)),!0;case"gotpointercapture":return c=o.pointerId,tr.set(c,ar(tr.get(c)||null,e,t,a,s,o)),!0}return!1}function sm(e){var t=hn(e.target);if(t!==null){var a=h(t);if(a!==null){if(t=a.tag,t===13){if(t=m(a),t!==null){e.blockedOn=t,Pe(e.priority,function(){tm(a)});return}}else if(t===31){if(t=g(a),t!==null){e.blockedOn=t,Pe(e.priority,function(){tm(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function jl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Jc(e.nativeEvent);if(a===null){a=e.nativeEvent;var s=new a.constructor(a.type,a);Jl=s,a.target.dispatchEvent(s),Jl=null}else return t=fn(a),t!==null&&em(t),e.blockedOn=a,!1;t.shift()}return!0}function im(e,t,a){jl(e)&&a.delete(t)}function fp(){Pc=!1,Mn!==null&&jl(Mn)&&(Mn=null),Ln!==null&&jl(Ln)&&(Ln=null),Bn!==null&&jl(Bn)&&(Bn=null),er.forEach(im),tr.forEach(im)}function El(e,t){e.blockedOn===t&&(e.blockedOn=null,Pc||(Pc=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,fp)))}var Nl=null;function rm(e){Nl!==e&&(Nl=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Nl===e&&(Nl=null);for(var t=0;t<e.length;t+=3){var a=e[t],s=e[t+1],o=e[t+2];if(typeof s!="function"){if(Zc(s||a)===null)continue;break}var c=fn(a);c!==null&&(e.splice(t,3),t-=3,Jo(c,{pending:!0,data:o,method:a.method,action:s},s,o))}}))}function Ws(e){function t(x){return El(x,e)}Mn!==null&&El(Mn,e),Ln!==null&&El(Ln,e),Bn!==null&&El(Bn,e),er.forEach(t),tr.forEach(t);for(var a=0;a<qn.length;a++){var s=qn[a];s.blockedOn===e&&(s.blockedOn=null)}for(;0<qn.length&&(a=qn[0],a.blockedOn===null);)sm(a),a.blockedOn===null&&qn.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(s=0;s<a.length;s+=3){var o=a[s],c=a[s+1],f=o[ft]||null;if(typeof c=="function")f||rm(a);else if(f){var v=null;if(c&&c.hasAttribute("formAction")){if(o=c,f=c[ft]||null)v=f.formAction;else if(Zc(o)!==null)continue}else v=f.action;typeof v=="function"?a[s+1]=v:(a.splice(s,3),s-=3),rm(a)}}}function lm(){function e(c){c.canIntercept&&c.info==="react-transition"&&c.intercept({handler:function(){return new Promise(function(f){return o=f})},focusReset:"manual",scroll:"manual"})}function t(){o!==null&&(o(),o=null),s||setTimeout(a,20)}function a(){if(!s&&!navigation.transition){var c=navigation.currentEntry;c&&c.url!=null&&navigation.navigate(c.url,{state:c.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,o=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){s=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),o!==null&&(o(),o=null)}}}function Wc(e){this._internalRoot=e}Tl.prototype.render=Wc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(l(409));var a=t.current,s=ra();Wf(a,s,e,t,null,null)},Tl.prototype.unmount=Wc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Wf(e.current,2,null,e,null,null),ll(),t[Ra]=null}};function Tl(e){this._internalRoot=e}Tl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Tt();e={blockedOn:null,target:e,priority:t};for(var a=0;a<qn.length&&t!==0&&t<qn[a].priority;a++);qn.splice(a,0,e),a===0&&sm(e)}};var om=n.version;if(om!=="19.2.4")throw Error(l(527,om,"19.2.4"));Q.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(l(188)):(e=Object.keys(e).join(","),Error(l(268,e)));return e=p(t),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var mp={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Al=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Al.isDisabled&&Al.supportsFiber)try{Te=Al.inject(mp),J=Al}catch{}}return sr.createRoot=function(e,t){if(!d(e))throw Error(l(299));var a=!1,s="",o=mh,c=gh,f=ph;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(c=t.onCaughtError),t.onRecoverableError!==void 0&&(f=t.onRecoverableError)),t=Zf(e,1,!1,null,null,a,s,null,o,c,f,lm),e[Ra]=t.current,Dc(e),new Wc(t)},sr.hydrateRoot=function(e,t,a){if(!d(e))throw Error(l(299));var s=!1,o="",c=mh,f=gh,v=ph,x=null;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(o=a.identifierPrefix),a.onUncaughtError!==void 0&&(c=a.onUncaughtError),a.onCaughtError!==void 0&&(f=a.onCaughtError),a.onRecoverableError!==void 0&&(v=a.onRecoverableError),a.formState!==void 0&&(x=a.formState)),t=Zf(e,1,!0,t,a??null,s,o,x,c,f,v,lm),t.context=Pf(null),a=t.current,s=ra(),s=Yt(s),o=jn(s),o.callback=null,En(a,o,s),a=s,t.current.lanes=a,Vt(t,a),Ma(t),e[Ra]=t.current,Dc(e),new Tl(t)},sr.version="19.2.4",sr}var vm;function Ep(){if(vm)return tu.exports;vm=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(n){console.error(n)}}return i(),tu.exports=jp(),tu.exports}var Np=Ep();const Tp=Xm(Np);function Hl(i,n){var r={};for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&n.indexOf(l)<0&&(r[l]=i[l]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,l=Object.getOwnPropertySymbols(i);d<l.length;d++)n.indexOf(l[d])<0&&Object.prototype.propertyIsEnumerable.call(i,l[d])&&(r[l[d]]=i[l[d]]);return r}function Ap(i,n,r,l){function d(h){return h instanceof r?h:new r(function(m){m(h)})}return new(r||(r=Promise))(function(h,m){function g(b){try{p(l.next(b))}catch(j){m(j)}}function y(b){try{p(l.throw(b))}catch(j){m(j)}}function p(b){b.done?h(b.value):d(b.value).then(g,y)}p((l=l.apply(i,n||[])).next())})}const Op=i=>i?(...n)=>i(...n):(...n)=>fetch(...n);class ju extends Error{constructor(n,r="FunctionsError",l){super(n),this.name=r,this.context=l}}class Cp extends ju{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class bm extends ju{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class xm extends ju{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var hu;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(hu||(hu={}));class kp{constructor(n,{headers:r={},customFetch:l,region:d=hu.Any}={}){this.url=n,this.headers=r,this.region=d,this.fetch=Op(l)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return Ap(this,arguments,void 0,function*(r,l={}){var d;let h,m;try{const{headers:g,method:y,body:p,signal:b,timeout:j}=l;let T={},{region:E}=l;E||(E=this.region);const S=new URL(`${this.url}/${r}`);E&&E!=="any"&&(T["x-region"]=E,S.searchParams.set("forceFunctionRegion",E));let A;p&&(g&&!Object.prototype.hasOwnProperty.call(g,"Content-Type")||!g)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(T["Content-Type"]="application/octet-stream",A=p):typeof p=="string"?(T["Content-Type"]="text/plain",A=p):typeof FormData<"u"&&p instanceof FormData?A=p:(T["Content-Type"]="application/json",A=JSON.stringify(p)):p&&typeof p!="string"&&!(typeof Blob<"u"&&p instanceof Blob)&&!(p instanceof ArrayBuffer)&&!(typeof FormData<"u"&&p instanceof FormData)?A=JSON.stringify(p):A=p;let D=b;j&&(m=new AbortController,h=setTimeout(()=>m.abort(),j),b?(D=m.signal,b.addEventListener("abort",()=>m.abort())):D=m.signal);const Y=yield this.fetch(S.toString(),{method:y||"POST",headers:Object.assign(Object.assign(Object.assign({},T),this.headers),g),body:A,signal:D}).catch(le=>{throw new Cp(le)}),K=Y.headers.get("x-relay-error");if(K&&K==="true")throw new bm(Y);if(!Y.ok)throw new xm(Y);let H=((d=Y.headers.get("Content-Type"))!==null&&d!==void 0?d:"text/plain").split(";")[0].trim(),I;return H==="application/json"?I=yield Y.json():H==="application/octet-stream"||H==="application/pdf"?I=yield Y.blob():H==="text/event-stream"?I=Y:H==="multipart/form-data"?I=yield Y.formData():I=yield Y.text(),{data:I,error:null,response:Y}}catch(g){return{data:null,error:g,response:g instanceof xm||g instanceof bm?g.context:void 0}}finally{h&&clearTimeout(h)}})}}var Rp=class extends Error{constructor(i){super(i.message),this.name="PostgrestError",this.details=i.details,this.hint=i.hint,this.code=i.code}},Dp=class{constructor(i){var n,r,l;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(n=i.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=i.signal,this.isMaybeSingle=(r=i.isMaybeSingle)!==null&&r!==void 0?r:!1,this.urlLengthLimit=(l=i.urlLengthLimit)!==null&&l!==void 0?l:8e3,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,n){return this.headers=new Headers(this.headers),this.headers.set(i,n),this}then(i,n){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let d=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{let m=null,g=null,y=null,p=h.status,b=h.statusText;if(h.ok){var j,T;if(r.method!=="HEAD"){var E;const Y=await h.text();Y===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((E=r.headers.get("Accept"))===null||E===void 0)&&E.includes("application/vnd.pgrst.plan+text"))?g=Y:g=JSON.parse(Y))}const A=(j=r.headers.get("Prefer"))===null||j===void 0?void 0:j.match(/count=(exact|planned|estimated)/),D=(T=h.headers.get("content-range"))===null||T===void 0?void 0:T.split("/");A&&D&&D.length>1&&(y=parseInt(D[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(g)&&(g.length>1?(m={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,y=null,p=406,b="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{var S;const A=await h.text();try{m=JSON.parse(A),Array.isArray(m)&&h.status===404&&(g=[],m=null,p=200,b="OK")}catch{h.status===404&&A===""?(p=204,b="No Content"):m={message:A}}if(m&&r.isMaybeSingle&&(!(m==null||(S=m.details)===null||S===void 0)&&S.includes("0 rows"))&&(m=null,p=200,b="OK"),m&&r.shouldThrowOnError)throw new Rp(m)}return{error:m,data:g,count:y,status:p,statusText:b}});return this.shouldThrowOnError||(d=d.catch(h=>{var m;let g="",y="",p="";const b=h==null?void 0:h.cause;if(b){var j,T,E,S;const Y=(j=b==null?void 0:b.message)!==null&&j!==void 0?j:"",K=(T=b==null?void 0:b.code)!==null&&T!==void 0?T:"";g=`${(E=h==null?void 0:h.name)!==null&&E!==void 0?E:"FetchError"}: ${h==null?void 0:h.message}`,g+=`

Caused by: ${(S=b==null?void 0:b.name)!==null&&S!==void 0?S:"Error"}: ${Y}`,K&&(g+=` (${K})`),b!=null&&b.stack&&(g+=`
${b.stack}`)}else{var A;g=(A=h==null?void 0:h.stack)!==null&&A!==void 0?A:""}const D=this.url.toString().length;return(h==null?void 0:h.name)==="AbortError"||(h==null?void 0:h.code)==="ABORT_ERR"?(p="",y="Request was aborted (timeout or manual cancellation)",D>this.urlLengthLimit&&(y+=`. Note: Your request URL is ${D} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((b==null?void 0:b.name)==="HeadersOverflowError"||(b==null?void 0:b.code)==="UND_ERR_HEADERS_OVERFLOW")&&(p="",y="HTTP headers exceeded server limits (typically 16KB)",D>this.urlLengthLimit&&(y+=`. Your request URL is ${D} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(m=h==null?void 0:h.name)!==null&&m!==void 0?m:"FetchError"}: ${h==null?void 0:h.message}`,details:g,hint:y,code:p},data:null,count:null,status:0,statusText:""}})),d.then(i,n)}returns(){return this}overrideTypes(){return this}},Up=class extends Dp{select(i){let n=!1;const r=(i??"*").split("").map(l=>/\s/.test(l)&&!n?"":(l==='"'&&(n=!n),l)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:n=!0,nullsFirst:r,foreignTable:l,referencedTable:d=l}={}){const h=d?`${d}.order`:"order",m=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${m?`${m},`:""}${i}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:n,referencedTable:r=n}={}){const l=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(l,`${i}`),this}range(i,n,{foreignTable:r,referencedTable:l=r}={}){const d=typeof l>"u"?"offset":`${l}.offset`,h=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(d,`${i}`),this.url.searchParams.set(h,`${n-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:n=!1,settings:r=!1,buffers:l=!1,wal:d=!1,format:h="text"}={}){var m;const g=[i?"analyze":null,n?"verbose":null,r?"settings":null,l?"buffers":null,d?"wal":null].filter(Boolean).join("|"),y=(m=this.headers.get("Accept"))!==null&&m!==void 0?m:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${h}; for="${y}"; options=${g};`),h==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}};const wm=new RegExp("[,()]");var ii=class extends Up{eq(i,n){return this.url.searchParams.append(i,`eq.${n}`),this}neq(i,n){return this.url.searchParams.append(i,`neq.${n}`),this}gt(i,n){return this.url.searchParams.append(i,`gt.${n}`),this}gte(i,n){return this.url.searchParams.append(i,`gte.${n}`),this}lt(i,n){return this.url.searchParams.append(i,`lt.${n}`),this}lte(i,n){return this.url.searchParams.append(i,`lte.${n}`),this}like(i,n){return this.url.searchParams.append(i,`like.${n}`),this}likeAllOf(i,n){return this.url.searchParams.append(i,`like(all).{${n.join(",")}}`),this}likeAnyOf(i,n){return this.url.searchParams.append(i,`like(any).{${n.join(",")}}`),this}ilike(i,n){return this.url.searchParams.append(i,`ilike.${n}`),this}ilikeAllOf(i,n){return this.url.searchParams.append(i,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(i,n){return this.url.searchParams.append(i,`ilike(any).{${n.join(",")}}`),this}regexMatch(i,n){return this.url.searchParams.append(i,`match.${n}`),this}regexIMatch(i,n){return this.url.searchParams.append(i,`imatch.${n}`),this}is(i,n){return this.url.searchParams.append(i,`is.${n}`),this}isDistinct(i,n){return this.url.searchParams.append(i,`isdistinct.${n}`),this}in(i,n){const r=Array.from(new Set(n)).map(l=>typeof l=="string"&&wm.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(i,`in.(${r})`),this}notIn(i,n){const r=Array.from(new Set(n)).map(l=>typeof l=="string"&&wm.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(i,`not.in.(${r})`),this}contains(i,n){return typeof n=="string"?this.url.searchParams.append(i,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(i,`cs.{${n.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(n)}`),this}containedBy(i,n){return typeof n=="string"?this.url.searchParams.append(i,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(i,`cd.{${n.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(n)}`),this}rangeGt(i,n){return this.url.searchParams.append(i,`sr.${n}`),this}rangeGte(i,n){return this.url.searchParams.append(i,`nxl.${n}`),this}rangeLt(i,n){return this.url.searchParams.append(i,`sl.${n}`),this}rangeLte(i,n){return this.url.searchParams.append(i,`nxr.${n}`),this}rangeAdjacent(i,n){return this.url.searchParams.append(i,`adj.${n}`),this}overlaps(i,n){return typeof n=="string"?this.url.searchParams.append(i,`ov.${n}`):this.url.searchParams.append(i,`ov.{${n.join(",")}}`),this}textSearch(i,n,{config:r,type:l}={}){let d="";l==="plain"?d="pl":l==="phrase"?d="ph":l==="websearch"&&(d="w");const h=r===void 0?"":`(${r})`;return this.url.searchParams.append(i,`${d}fts${h}.${n}`),this}match(i){return Object.entries(i).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(i,n,r){return this.url.searchParams.append(i,`not.${n}.${r}`),this}or(i,{foreignTable:n,referencedTable:r=n}={}){const l=r?`${r}.or`:"or";return this.url.searchParams.append(l,`(${i})`),this}filter(i,n,r){return this.url.searchParams.append(i,`${n}.${r}`),this}},zp=class{constructor(i,{headers:n={},schema:r,fetch:l,urlLengthLimit:d=8e3}){this.url=i,this.headers=new Headers(n),this.schema=r,this.fetch=l,this.urlLengthLimit=d}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(i,n){const{head:r=!1,count:l}=n??{},d=r?"HEAD":"GET";let h=!1;const m=(i??"*").split("").map(p=>/\s/.test(p)&&!h?"":(p==='"'&&(h=!h),p)).join(""),{url:g,headers:y}=this.cloneRequestState();return g.searchParams.set("select",m),l&&y.append("Prefer",`count=${l}`),new ii({method:d,url:g,headers:y,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(i,{count:n,defaultToNull:r=!0}={}){var l;const d="POST",{url:h,headers:m}=this.cloneRequestState();if(n&&m.append("Prefer",`count=${n}`),r||m.append("Prefer","missing=default"),Array.isArray(i)){const g=i.reduce((y,p)=>y.concat(Object.keys(p)),[]);if(g.length>0){const y=[...new Set(g)].map(p=>`"${p}"`);h.searchParams.set("columns",y.join(","))}}return new ii({method:d,url:h,headers:m,schema:this.schema,body:i,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(i,{onConflict:n,ignoreDuplicates:r=!1,count:l,defaultToNull:d=!0}={}){var h;const m="POST",{url:g,headers:y}=this.cloneRequestState();if(y.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&g.searchParams.set("on_conflict",n),l&&y.append("Prefer",`count=${l}`),d||y.append("Prefer","missing=default"),Array.isArray(i)){const p=i.reduce((b,j)=>b.concat(Object.keys(j)),[]);if(p.length>0){const b=[...new Set(p)].map(j=>`"${j}"`);g.searchParams.set("columns",b.join(","))}}return new ii({method:m,url:g,headers:y,schema:this.schema,body:i,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch,urlLengthLimit:this.urlLengthLimit})}update(i,{count:n}={}){var r;const l="PATCH",{url:d,headers:h}=this.cloneRequestState();return n&&h.append("Prefer",`count=${n}`),new ii({method:l,url:d,headers:h,schema:this.schema,body:i,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:i}={}){var n;const r="DELETE",{url:l,headers:d}=this.cloneRequestState();return i&&d.append("Prefer",`count=${i}`),new ii({method:r,url:l,headers:d,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}};function cr(i){"@babel/helpers - typeof";return cr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},cr(i)}function Mp(i,n){if(cr(i)!="object"||!i)return i;var r=i[Symbol.toPrimitive];if(r!==void 0){var l=r.call(i,n);if(cr(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(i)}function Lp(i){var n=Mp(i,"string");return cr(n)=="symbol"?n:n+""}function Bp(i,n,r){return(n=Lp(n))in i?Object.defineProperty(i,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[n]=r,i}function _m(i,n){var r=Object.keys(i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);n&&(l=l.filter(function(d){return Object.getOwnPropertyDescriptor(i,d).enumerable})),r.push.apply(r,l)}return r}function Ol(i){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?_m(Object(r),!0).forEach(function(l){Bp(i,l,r[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(r)):_m(Object(r)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(r,l))})}return i}var qp=class Qm{constructor(n,{headers:r={},schema:l,fetch:d,timeout:h,urlLengthLimit:m=8e3}={}){this.url=n,this.headers=new Headers(r),this.schemaName=l,this.urlLengthLimit=m;const g=d??globalThis.fetch;h!==void 0&&h>0?this.fetch=(y,p)=>{const b=new AbortController,j=setTimeout(()=>b.abort(),h),T=p==null?void 0:p.signal;if(T){if(T.aborted)return clearTimeout(j),g(y,p);const E=()=>{clearTimeout(j),b.abort()};return T.addEventListener("abort",E,{once:!0}),g(y,Ol(Ol({},p),{},{signal:b.signal})).finally(()=>{clearTimeout(j),T.removeEventListener("abort",E)})}return g(y,Ol(Ol({},p),{},{signal:b.signal})).finally(()=>clearTimeout(j))}:this.fetch=g}from(n){if(!n||typeof n!="string"||n.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new zp(new URL(`${this.url}/${n}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(n){return new Qm(this.url,{headers:this.headers,schema:n,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(n,r={},{head:l=!1,get:d=!1,count:h}={}){var m;let g;const y=new URL(`${this.url}/rpc/${n}`);let p;const b=E=>E!==null&&typeof E=="object"&&(!Array.isArray(E)||E.some(b)),j=l&&Object.values(r).some(b);j?(g="POST",p=r):l||d?(g=l?"HEAD":"GET",Object.entries(r).filter(([E,S])=>S!==void 0).map(([E,S])=>[E,Array.isArray(S)?`{${S.join(",")}}`:`${S}`]).forEach(([E,S])=>{y.searchParams.append(E,S)})):(g="POST",p=r);const T=new Headers(this.headers);return j?T.set("Prefer",h?`count=${h},return=minimal`:"return=minimal"):h&&T.set("Prefer",`count=${h}`),new ii({method:g,url:y,headers:T,schema:this.schemaName,body:p,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch,urlLengthLimit:this.urlLengthLimit})}};class Hp{constructor(){}static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const l=r.versions;if(l&&l.node){const d=l.node,h=parseInt(d.replace(/^v/,"").split(".")[0]);return h>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${h} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${h} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let r=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(r+=`

Suggested solution: ${n.workaround}`),new Error(r)}static createWebSocket(n,r){const l=this.getWebSocketConstructor();return new l(n,r)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const $p="2.97.0",Gp=`realtime-js/${$p}`,Vp="1.0.0",Jm="2.0.0",Sm=Jm,fu=1e4,Yp=1e3,Kp=100;var Gn;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(Gn||(Gn={}));var Ot;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(Ot||(Ot={}));var Oa;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(Oa||(Oa={}));var mu;(function(i){i.websocket="websocket"})(mu||(mu={}));var ps;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(ps||(ps={}));class Ip{constructor(n){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=n??[]}encode(n,r){if(n.event===this.BROADCAST_EVENT&&!(n.payload instanceof ArrayBuffer)&&typeof n.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(n));let l=[n.join_ref,n.ref,n.topic,n.event,n.payload];return r(JSON.stringify(l))}_binaryEncodeUserBroadcastPush(n){var r;return this._isArrayBuffer((r=n.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(n):this._encodeJsonUserBroadcastPush(n)}_encodeBinaryUserBroadcastPush(n){var r,l;const d=(l=(r=n.payload)===null||r===void 0?void 0:r.payload)!==null&&l!==void 0?l:new ArrayBuffer(0);return this._encodeUserBroadcastPush(n,this.BINARY_ENCODING,d)}_encodeJsonUserBroadcastPush(n){var r,l;const d=(l=(r=n.payload)===null||r===void 0?void 0:r.payload)!==null&&l!==void 0?l:{},m=new TextEncoder().encode(JSON.stringify(d)).buffer;return this._encodeUserBroadcastPush(n,this.JSON_ENCODING,m)}_encodeUserBroadcastPush(n,r,l){var d,h;const m=n.topic,g=(d=n.ref)!==null&&d!==void 0?d:"",y=(h=n.join_ref)!==null&&h!==void 0?h:"",p=n.payload.event,b=this.allowedMetadataKeys?this._pick(n.payload,this.allowedMetadataKeys):{},j=Object.keys(b).length===0?"":JSON.stringify(b);if(y.length>255)throw new Error(`joinRef length ${y.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`ref length ${g.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`topic length ${m.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(j.length>255)throw new Error(`metadata length ${j.length} exceeds maximum of 255`);const T=this.USER_BROADCAST_PUSH_META_LENGTH+y.length+g.length+m.length+p.length+j.length,E=new ArrayBuffer(this.HEADER_LENGTH+T);let S=new DataView(E),A=0;S.setUint8(A++,this.KINDS.userBroadcastPush),S.setUint8(A++,y.length),S.setUint8(A++,g.length),S.setUint8(A++,m.length),S.setUint8(A++,p.length),S.setUint8(A++,j.length),S.setUint8(A++,r),Array.from(y,Y=>S.setUint8(A++,Y.charCodeAt(0))),Array.from(g,Y=>S.setUint8(A++,Y.charCodeAt(0))),Array.from(m,Y=>S.setUint8(A++,Y.charCodeAt(0))),Array.from(p,Y=>S.setUint8(A++,Y.charCodeAt(0))),Array.from(j,Y=>S.setUint8(A++,Y.charCodeAt(0)));var D=new Uint8Array(E.byteLength+l.byteLength);return D.set(new Uint8Array(E),0),D.set(new Uint8Array(l),E.byteLength),D.buffer}decode(n,r){if(this._isArrayBuffer(n)){let l=this._binaryDecode(n);return r(l)}if(typeof n=="string"){const l=JSON.parse(n),[d,h,m,g,y]=l;return r({join_ref:d,ref:h,topic:m,event:g,payload:y})}return r({})}_binaryDecode(n){const r=new DataView(n),l=r.getUint8(0),d=new TextDecoder;switch(l){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(n,r,d)}}_decodeUserBroadcast(n,r,l){const d=r.getUint8(1),h=r.getUint8(2),m=r.getUint8(3),g=r.getUint8(4);let y=this.HEADER_LENGTH+4;const p=l.decode(n.slice(y,y+d));y=y+d;const b=l.decode(n.slice(y,y+h));y=y+h;const j=l.decode(n.slice(y,y+m));y=y+m;const T=n.slice(y,n.byteLength),E=g===this.JSON_ENCODING?JSON.parse(l.decode(T)):T,S={type:this.BROADCAST_EVENT,event:b,payload:E};return m>0&&(S.meta=JSON.parse(j)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:S}}_isArrayBuffer(n){var r;return n instanceof ArrayBuffer||((r=n==null?void 0:n.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(n,r){return!n||typeof n!="object"?{}:Object.fromEntries(Object.entries(n).filter(([l])=>r.includes(l)))}}class Zm{constructor(n,r){this.callback=n,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var tt;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(tt||(tt={}));const jm=(i,n,r={})=>{var l;const d=(l=r.skipTypes)!==null&&l!==void 0?l:[];return n?Object.keys(n).reduce((h,m)=>(h[m]=Xp(m,i,n,d),h),{}):{}},Xp=(i,n,r,l)=>{const d=n.find(g=>g.name===i),h=d==null?void 0:d.type,m=r[i];return h&&!l.includes(h)?Pm(h,m):gu(m)},Pm=(i,n)=>{if(i.charAt(0)==="_"){const r=i.slice(1,i.length);return Pp(n,r)}switch(i){case tt.bool:return Qp(n);case tt.float4:case tt.float8:case tt.int2:case tt.int4:case tt.int8:case tt.numeric:case tt.oid:return Jp(n);case tt.json:case tt.jsonb:return Zp(n);case tt.timestamp:return Wp(n);case tt.abstime:case tt.date:case tt.daterange:case tt.int4range:case tt.int8range:case tt.money:case tt.reltime:case tt.text:case tt.time:case tt.timestamptz:case tt.timetz:case tt.tsrange:case tt.tstzrange:return gu(n);default:return gu(n)}},gu=i=>i,Qp=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},Jp=i=>{if(typeof i=="string"){const n=parseFloat(i);if(!Number.isNaN(n))return n}return i},Zp=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch{return i}return i},Pp=(i,n)=>{if(typeof i!="string")return i;const r=i.length-1,l=i[r];if(i[0]==="{"&&l==="}"){let h;const m=i.slice(1,r);try{h=JSON.parse("["+m+"]")}catch{h=m?m.split(","):[]}return h.map(g=>Pm(n,g))}return i},Wp=i=>typeof i=="string"?i.replace(" ","T"):i,Wm=i=>{const n=new URL(i);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};class iu{constructor(n,r,l={},d=fu){this.channel=n,this.event=r,this.payload=l,this.timeout=d,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,r){var l;return this._hasReceived(n)&&r((l=this.receivedResp)===null||l===void 0?void 0:l.response),this.recHooks.push({status:n,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:r}){this.recHooks.filter(l=>l.status===n).forEach(l=>l.callback(r))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var Em;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(Em||(Em={}));class lr{constructor(n,r){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const l=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(l.state,{},d=>{const{onJoin:h,onLeave:m,onSync:g}=this.caller;this.joinRef=this.channel._joinRef(),this.state=lr.syncState(this.state,d,h,m),this.pendingDiffs.forEach(y=>{this.state=lr.syncDiff(this.state,y,h,m)}),this.pendingDiffs=[],g()}),this.channel._on(l.diff,{},d=>{const{onJoin:h,onLeave:m,onSync:g}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(d):(this.state=lr.syncDiff(this.state,d,h,m),g())}),this.onJoin((d,h,m)=>{this.channel._trigger("presence",{event:"join",key:d,currentPresences:h,newPresences:m})}),this.onLeave((d,h,m)=>{this.channel._trigger("presence",{event:"leave",key:d,currentPresences:h,leftPresences:m})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,r,l,d){const h=this.cloneDeep(n),m=this.transformState(r),g={},y={};return this.map(h,(p,b)=>{m[p]||(y[p]=b)}),this.map(m,(p,b)=>{const j=h[p];if(j){const T=b.map(D=>D.presence_ref),E=j.map(D=>D.presence_ref),S=b.filter(D=>E.indexOf(D.presence_ref)<0),A=j.filter(D=>T.indexOf(D.presence_ref)<0);S.length>0&&(g[p]=S),A.length>0&&(y[p]=A)}else g[p]=b}),this.syncDiff(h,{joins:g,leaves:y},l,d)}static syncDiff(n,r,l,d){const{joins:h,leaves:m}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return l||(l=()=>{}),d||(d=()=>{}),this.map(h,(g,y)=>{var p;const b=(p=n[g])!==null&&p!==void 0?p:[];if(n[g]=this.cloneDeep(y),b.length>0){const j=n[g].map(E=>E.presence_ref),T=b.filter(E=>j.indexOf(E.presence_ref)<0);n[g].unshift(...T)}l(g,b,y)}),this.map(m,(g,y)=>{let p=n[g];if(!p)return;const b=y.map(j=>j.presence_ref);p=p.filter(j=>b.indexOf(j.presence_ref)<0),n[g]=p,d(g,p,y),p.length===0&&delete n[g]}),n}static map(n,r){return Object.getOwnPropertyNames(n).map(l=>r(l,n[l]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((r,l)=>{const d=n[l];return"metas"in d?r[l]=d.metas.map(h=>(h.presence_ref=h.phx_ref,delete h.phx_ref,delete h.phx_ref_prev,h)):r[l]=d,r},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Nm;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(Nm||(Nm={}));var or;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(or||(or={}));var on;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(on||(on={}));class oi{constructor(n,r={config:{}},l){var d,h;if(this.topic=n,this.params=r,this.socket=l,this.bindings={},this.state=Ot.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new iu(this,Oa.join,this.params,this.timeout),this.rejoinTimer=new Zm(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ot.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(m=>m.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ot.closed,this.socket._remove(this)}),this._onError(m=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,m),this.state=Ot.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ot.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",m=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,m),this.state=Ot.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Oa.reply,{},(m,g)=>{this._trigger(this._replyEventName(g),m)}),this.presence=new lr(this),this.broadcastEndpointURL=Wm(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((h=(d=this.params.config)===null||d===void 0?void 0:d.broadcast)===null||h===void 0)&&h.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,r=this.timeout){var l,d,h;if(this.socket.isConnected()||this.socket.connect(),this.state==Ot.closed){const{config:{broadcast:m,presence:g,private:y}}=this.params,p=(d=(l=this.bindings.postgres_changes)===null||l===void 0?void 0:l.map(E=>E.filter))!==null&&d!==void 0?d:[],b=!!this.bindings[or.PRESENCE]&&this.bindings[or.PRESENCE].length>0||((h=this.params.config.presence)===null||h===void 0?void 0:h.enabled)===!0,j={},T={broadcast:m,presence:Object.assign(Object.assign({},g),{enabled:b}),postgres_changes:p,private:y};this.socket.accessTokenValue&&(j.access_token=this.socket.accessTokenValue),this._onError(E=>n==null?void 0:n(on.CHANNEL_ERROR,E)),this._onClose(()=>n==null?void 0:n(on.CLOSED)),this.updateJoinPayload(Object.assign({config:T},j)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:E})=>{var S;if(this.socket._isManualToken()||this.socket.setAuth(),E===void 0){n==null||n(on.SUBSCRIBED);return}else{const A=this.bindings.postgres_changes,D=(S=A==null?void 0:A.length)!==null&&S!==void 0?S:0,Y=[];for(let K=0;K<D;K++){const H=A[K],{filter:{event:I,schema:le,table:ne,filter:X}}=H,G=E&&E[K];if(G&&G.event===I&&oi.isFilterValueEqual(G.schema,le)&&oi.isFilterValueEqual(G.table,ne)&&oi.isFilterValueEqual(G.filter,X))Y.push(Object.assign(Object.assign({},H),{id:G.id}));else{this.unsubscribe(),this.state=Ot.errored,n==null||n(on.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=Y,n&&n(on.SUBSCRIBED);return}}).receive("error",E=>{this.state=Ot.errored,n==null||n(on.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(E).join(", ")||"error")))}).receive("timeout",()=>{n==null||n(on.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,r={}){return await this.send({type:"presence",event:"track",payload:n},r.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,r,l){return this.state===Ot.joined&&n===or.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(n,r,l)}async httpSend(n,r,l={}){var d;if(r==null)return Promise.reject("Payload is required for httpSend()");const h={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(h.Authorization=`Bearer ${this.socket.accessTokenValue}`);const m={method:"POST",headers:h,body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:r,private:this.private}]})},g=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(d=l.timeout)!==null&&d!==void 0?d:this.timeout);if(g.status===202)return{success:!0};let y=g.statusText;try{const p=await g.json();y=p.error||p.message||y}catch{}return Promise.reject(new Error(y))}async send(n,r={}){var l,d;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:h,payload:m}=n,g={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(g.Authorization=`Bearer ${this.socket.accessTokenValue}`);const y={method:"POST",headers:g,body:JSON.stringify({messages:[{topic:this.subTopic,event:h,payload:m,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,y,(l=r.timeout)!==null&&l!==void 0?l:this.timeout);return await((d=p.body)===null||d===void 0?void 0:d.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(h=>{var m,g,y;const p=this._push(n.type,n,r.timeout||this.timeout);n.type==="broadcast"&&!(!((y=(g=(m=this.params)===null||m===void 0?void 0:m.config)===null||g===void 0?void 0:g.broadcast)===null||y===void 0)&&y.ack)&&h("ok"),p.receive("ok",()=>h("ok")),p.receive("error",()=>h("error")),p.receive("timeout",()=>h("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=Ot.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Oa.close,"leave",this._joinRef())};this.joinPush.destroy();let l=null;return new Promise(d=>{l=new iu(this,Oa.leave,{},n),l.receive("ok",()=>{r(),d("ok")}).receive("timeout",()=>{r(),d("timed out")}).receive("error",()=>{d("error")}),l.send(),this._canPush()||l.trigger("ok",{})}).finally(()=>{l==null||l.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ot.closed,this.bindings={}}async _fetchWithTimeout(n,r,l){const d=new AbortController,h=setTimeout(()=>d.abort(),l),m=await this.socket.fetch(n,Object.assign(Object.assign({},r),{signal:d.signal}));return clearTimeout(h),m}_push(n,r,l=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let d=new iu(this,n,r,l);return this._canPush()?d.send():this._addToPushBuffer(d),d}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>Kp){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(n,r,l){return r}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,r,l){var d,h;const m=n.toLocaleLowerCase(),{close:g,error:y,leave:p,join:b}=Oa;if(l&&[g,y,p,b].indexOf(m)>=0&&l!==this._joinRef())return;let T=this._onMessage(m,r,l);if(r&&!T)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(m)?(d=this.bindings.postgres_changes)===null||d===void 0||d.filter(E=>{var S,A,D;return((S=E.filter)===null||S===void 0?void 0:S.event)==="*"||((D=(A=E.filter)===null||A===void 0?void 0:A.event)===null||D===void 0?void 0:D.toLocaleLowerCase())===m}).map(E=>E.callback(T,l)):(h=this.bindings[m])===null||h===void 0||h.filter(E=>{var S,A,D,Y,K,H;if(["broadcast","presence","postgres_changes"].includes(m))if("id"in E){const I=E.id,le=(S=E.filter)===null||S===void 0?void 0:S.event;return I&&((A=r.ids)===null||A===void 0?void 0:A.includes(I))&&(le==="*"||(le==null?void 0:le.toLocaleLowerCase())===((D=r.data)===null||D===void 0?void 0:D.type.toLocaleLowerCase()))}else{const I=(K=(Y=E==null?void 0:E.filter)===null||Y===void 0?void 0:Y.event)===null||K===void 0?void 0:K.toLocaleLowerCase();return I==="*"||I===((H=r==null?void 0:r.event)===null||H===void 0?void 0:H.toLocaleLowerCase())}else return E.type.toLocaleLowerCase()===m}).map(E=>{if(typeof T=="object"&&"ids"in T){const S=T.data,{schema:A,table:D,commit_timestamp:Y,type:K,errors:H}=S;T=Object.assign(Object.assign({},{schema:A,table:D,commit_timestamp:Y,eventType:K,new:{},old:{},errors:H}),this._getPayloadRecords(S))}E.callback(T,l)})}_isClosed(){return this.state===Ot.closed}_isJoined(){return this.state===Ot.joined}_isJoining(){return this.state===Ot.joining}_isLeaving(){return this.state===Ot.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,r,l){const d=n.toLocaleLowerCase(),h={type:d,filter:r,callback:l};return this.bindings[d]?this.bindings[d].push(h):this.bindings[d]=[h],this}_off(n,r){const l=n.toLocaleLowerCase();return this.bindings[l]&&(this.bindings[l]=this.bindings[l].filter(d=>{var h;return!(((h=d.type)===null||h===void 0?void 0:h.toLocaleLowerCase())===l&&oi.isEqual(d.filter,r))})),this}static isEqual(n,r){if(Object.keys(n).length!==Object.keys(r).length)return!1;for(const l in n)if(n[l]!==r[l])return!1;return!0}static isFilterValueEqual(n,r){return(n??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(Oa.close,{},n)}_onError(n){this._on(Oa.error,{},r=>n(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ot.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const r={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(r.new=jm(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(r.old=jm(n.columns,n.old_record)),r}}const ru=()=>{},Cl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Fp=[1e3,2e3,5e3,1e4],ey=1e4,ty=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class ay{constructor(n,r){var l;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=fu,this.transport=null,this.heartbeatIntervalMs=Cl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ru,this.ref=0,this.reconnectTimer=null,this.vsn=Sm,this.logger=ru,this.conn=null,this.sendBuffer=[],this.serializer=new Ip,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=d=>d?(...h)=>d(...h):(...h)=>fetch(...h),!(!((l=r==null?void 0:r.params)===null||l===void 0)&&l.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${n}/${mu.websocket}`,this.httpEndpoint=Wm(n),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Hp.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const r=n.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(n,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const l=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(l),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(n?this.conn.close(n,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const r=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const n=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,r,l){this.logger(n,r,l)}connectionState(){switch(this.conn&&this.conn.readyState){case Gn.connecting:return ps.Connecting;case Gn.open:return ps.Open;case Gn.closing:return ps.Closing;default:return ps.Closed}}isConnected(){return this.connectionState()===ps.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,r={config:{}}){const l=`realtime:${n}`,d=this.getChannels().find(h=>h.topic===l);if(d)return d;{const h=new oi(`realtime:${n}`,r,this);return this.channels.push(h),h}}push(n){const{topic:r,event:l,payload:d,ref:h}=n,m=()=>{this.encode(n,g=>{var y;(y=this.conn)===null||y===void 0||y.send(g)})};this.log("push",`${r} ${l} (${h})`,d),this.isConnected()?m():this.sendBuffer.push(m)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(Yp,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Cl.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let r=this.channels.find(l=>l.topic===n&&(l._isJoined()||l._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${n}"`),r.unsubscribe())}_remove(n){this.channels=this.channels.filter(r=>r.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const p=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",p)}catch(b){this.log("error","error in heartbeat callback",b)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:l,event:d,payload:h,ref:m}=r,g=m?`(${m})`:"",y=h.status||"";this.log("receive",`${y} ${l} ${d} ${g}`.trim(),h),this.channels.filter(p=>p._isMember(l)).forEach(p=>p._trigger(d,h,m)),this._triggerStateCallbacks("message",r)})}_clearTimer(n){var r;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n),this.conn.readyState===Gn.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Gn.open||this.conn.readyState===Gn.connecting)try{this.conn.close()}catch(n){this.log("error","Error closing connection",n)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(n){var r;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(n=>n._trigger(Oa.error))}_appendParams(n,r){if(Object.keys(r).length===0)return n;const l=n.match(/\?/)?"&":"?",d=new URLSearchParams(r);return`${n}${l}${d}`}_workerObjectUrl(n){let r;if(n)r=n;else{const l=new Blob([ty],{type:"application/javascript"});r=URL.createObjectURL(l)}return r}_setConnectionState(n,r=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(n=null){let r,l=!1;if(n)r=n,l=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(d){this.log("error","Error fetching access token from callback",d),r=this.accessTokenValue}else r=this.accessTokenValue;l?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(d=>{const h={access_token:r,version:Gp};r&&d.updateJoinPayload(h),d.joinedOnce&&d._isJoined()&&d._push(Oa.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${n}`,r)})}_triggerStateCallbacks(n,r){try{this.stateChangeCallbacks[n].forEach(l=>{try{l(r)}catch(d){this.log("error",`error in ${n} callback`,d)}})}catch(l){this.log("error",`error triggering ${n} callbacks`,l)}}_setupReconnectionTimer(){this.reconnectTimer=new Zm(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Cl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var r,l,d,h,m,g,y,p,b,j,T,E;switch(this.transport=(r=n==null?void 0:n.transport)!==null&&r!==void 0?r:null,this.timeout=(l=n==null?void 0:n.timeout)!==null&&l!==void 0?l:fu,this.heartbeatIntervalMs=(d=n==null?void 0:n.heartbeatIntervalMs)!==null&&d!==void 0?d:Cl.HEARTBEAT_INTERVAL,this.worker=(h=n==null?void 0:n.worker)!==null&&h!==void 0?h:!1,this.accessToken=(m=n==null?void 0:n.accessToken)!==null&&m!==void 0?m:null,this.heartbeatCallback=(g=n==null?void 0:n.heartbeatCallback)!==null&&g!==void 0?g:ru,this.vsn=(y=n==null?void 0:n.vsn)!==null&&y!==void 0?y:Sm,n!=null&&n.params&&(this.params=n.params),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=n==null?void 0:n.reconnectAfterMs)!==null&&p!==void 0?p:(S=>Fp[S-1]||ey),this.vsn){case Vp:this.encode=(b=n==null?void 0:n.encode)!==null&&b!==void 0?b:((S,A)=>A(JSON.stringify(S))),this.decode=(j=n==null?void 0:n.decode)!==null&&j!==void 0?j:((S,A)=>A(JSON.parse(S)));break;case Jm:this.encode=(T=n==null?void 0:n.encode)!==null&&T!==void 0?T:this.serializer.encode.bind(this.serializer),this.decode=(E=n==null?void 0:n.decode)!==null&&E!==void 0?E:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n==null?void 0:n.workerUrl}}}var ur=class extends Error{constructor(i,n){var r;super(i),this.name="IcebergError",this.status=n.status,this.icebergType=n.icebergType,this.icebergCode=n.icebergCode,this.details=n.details,this.isCommitStateUnknown=n.icebergType==="CommitStateUnknownException"||[500,502,504].includes(n.status)&&((r=n.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function ny(i,n,r){const l=new URL(n,i);if(r)for(const[d,h]of Object.entries(r))h!==void 0&&l.searchParams.set(d,h);return l.toString()}async function sy(i){return!i||i.type==="none"?{}:i.type==="bearer"?{Authorization:`Bearer ${i.token}`}:i.type==="header"?{[i.name]:i.value}:i.type==="custom"?await i.getHeaders():{}}function iy(i){const n=i.fetchImpl??globalThis.fetch;return{async request({method:r,path:l,query:d,body:h,headers:m}){const g=ny(i.baseUrl,l,d),y=await sy(i.auth),p=await n(g,{method:r,headers:{...h?{"Content-Type":"application/json"}:{},...y,...m},body:h?JSON.stringify(h):void 0}),b=await p.text(),j=(p.headers.get("content-type")||"").includes("application/json"),T=j&&b?JSON.parse(b):b;if(!p.ok){const E=j?T:void 0,S=E==null?void 0:E.error;throw new ur((S==null?void 0:S.message)??`Request failed with status ${p.status}`,{status:p.status,icebergType:S==null?void 0:S.type,icebergCode:S==null?void 0:S.code,details:E})}return{status:p.status,headers:p.headers,data:T}}}}function kl(i){return i.join("")}var ry=class{constructor(i,n=""){this.client=i,this.prefix=n}async listNamespaces(i){const n=i?{parent:kl(i.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:n})).data.namespaces.map(l=>({namespace:l}))}async createNamespace(i,n){const r={namespace:i.namespace,properties:n==null?void 0:n.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(i){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${kl(i.namespace)}`})}async loadNamespaceMetadata(i){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${kl(i.namespace)}`})).data.properties}}async namespaceExists(i){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${kl(i.namespace)}`}),!0}catch(n){if(n instanceof ur&&n.status===404)return!1;throw n}}async createNamespaceIfNotExists(i,n){try{return await this.createNamespace(i,n)}catch(r){if(r instanceof ur&&r.status===409)return;throw r}}};function Fs(i){return i.join("")}var ly=class{constructor(i,n="",r){this.client=i,this.prefix=n,this.accessDelegation=r}async listTables(i){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Fs(i.namespace)}/tables`})).data.identifiers}async createTable(i,n){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Fs(i.namespace)}/tables`,body:n,headers:r})).data.metadata}async updateTable(i,n){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Fs(i.namespace)}/tables/${i.name}`,body:n});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(i,n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Fs(i.namespace)}/tables/${i.name}`,query:{purgeRequested:String((n==null?void 0:n.purge)??!1)}})}async loadTable(i){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Fs(i.namespace)}/tables/${i.name}`,headers:n})).data.metadata}async tableExists(i){const n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Fs(i.namespace)}/tables/${i.name}`,headers:n}),!0}catch(r){if(r instanceof ur&&r.status===404)return!1;throw r}}async createTableIfNotExists(i,n){try{return await this.createTable(i,n)}catch(r){if(r instanceof ur&&r.status===409)return await this.loadTable({namespace:i.namespace,name:n.name});throw r}}},oy=class{constructor(i){var l;let n="v1";i.catalogName&&(n+=`/${i.catalogName}`);const r=i.baseUrl.endsWith("/")?i.baseUrl:`${i.baseUrl}/`;this.client=iy({baseUrl:r,auth:i.auth,fetchImpl:i.fetch}),this.accessDelegation=(l=i.accessDelegation)==null?void 0:l.join(","),this.namespaceOps=new ry(this.client,n),this.tableOps=new ly(this.client,n,this.accessDelegation)}async listNamespaces(i){return this.namespaceOps.listNamespaces(i)}async createNamespace(i,n){return this.namespaceOps.createNamespace(i,n)}async dropNamespace(i){await this.namespaceOps.dropNamespace(i)}async loadNamespaceMetadata(i){return this.namespaceOps.loadNamespaceMetadata(i)}async listTables(i){return this.tableOps.listTables(i)}async createTable(i,n){return this.tableOps.createTable(i,n)}async updateTable(i,n){return this.tableOps.updateTable(i,n)}async dropTable(i,n){await this.tableOps.dropTable(i,n)}async loadTable(i){return this.tableOps.loadTable(i)}async namespaceExists(i){return this.namespaceOps.namespaceExists(i)}async tableExists(i){return this.tableOps.tableExists(i)}async createNamespaceIfNotExists(i,n){return this.namespaceOps.createNamespaceIfNotExists(i,n)}async createTableIfNotExists(i,n){return this.tableOps.createTableIfNotExists(i,n)}},$l=class extends Error{constructor(i,n="storage",r,l){super(i),this.__isStorageError=!0,this.namespace=n,this.name=n==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=l}};function Gl(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}var Rl=class extends $l{constructor(i,n,r,l="storage"){super(i,l,n,r),this.name=l==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Fm=class extends $l{constructor(i,n,r="storage"){super(i,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=n}};const cy=i=>i?(...n)=>i(...n):(...n)=>fetch(...n),uy=i=>{if(typeof i!="object"||i===null)return!1;const n=Object.getPrototypeOf(i);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},pu=i=>{if(Array.isArray(i))return i.map(r=>pu(r));if(typeof i=="function"||i!==Object(i))return i;const n={};return Object.entries(i).forEach(([r,l])=>{const d=r.replace(/([-_][a-z])/gi,h=>h.toUpperCase().replace(/[-_]/g,""));n[d]=pu(l)}),n},dy=i=>!i||typeof i!="string"||i.length===0||i.length>100||i.trim()!==i||i.includes("/")||i.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(i);function dr(i){"@babel/helpers - typeof";return dr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},dr(i)}function hy(i,n){if(dr(i)!="object"||!i)return i;var r=i[Symbol.toPrimitive];if(r!==void 0){var l=r.call(i,n);if(dr(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(i)}function fy(i){var n=hy(i,"string");return dr(n)=="symbol"?n:n+""}function my(i,n,r){return(n=fy(n))in i?Object.defineProperty(i,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[n]=r,i}function Tm(i,n){var r=Object.keys(i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);n&&(l=l.filter(function(d){return Object.getOwnPropertyDescriptor(i,d).enumerable})),r.push.apply(r,l)}return r}function me(i){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Tm(Object(r),!0).forEach(function(l){my(i,l,r[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(r)):Tm(Object(r)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(r,l))})}return i}const Am=i=>{var n;return i.msg||i.message||i.error_description||(typeof i.error=="string"?i.error:(n=i.error)===null||n===void 0?void 0:n.message)||JSON.stringify(i)},gy=async(i,n,r,l)=>{if(i&&typeof i=="object"&&"status"in i&&"ok"in i&&typeof i.status=="number"&&!(r!=null&&r.noResolveJson)){const d=i,h=d.status||500;if(typeof d.json=="function")d.json().then(m=>{const g=(m==null?void 0:m.statusCode)||(m==null?void 0:m.code)||h+"";n(new Rl(Am(m),h,g,l))}).catch(()=>{if(l==="vectors"){const m=h+"";n(new Rl(d.statusText||`HTTP ${h} error`,h,m,l))}else{const m=h+"";n(new Rl(d.statusText||`HTTP ${h} error`,h,m,l))}});else{const m=h+"";n(new Rl(d.statusText||`HTTP ${h} error`,h,m,l))}}else n(new Fm(Am(i),i,l))},py=(i,n,r,l)=>{const d={method:i,headers:(n==null?void 0:n.headers)||{}};return i==="GET"||i==="HEAD"||!l?me(me({},d),r):(uy(l)?(d.headers=me({"Content-Type":"application/json"},n==null?void 0:n.headers),d.body=JSON.stringify(l)):d.body=l,n!=null&&n.duplex&&(d.duplex=n.duplex),me(me({},d),r))};async function ir(i,n,r,l,d,h,m){return new Promise((g,y)=>{i(r,py(n,l,d,h)).then(p=>{if(!p.ok)throw p;if(l!=null&&l.noResolveJson)return p;if(m==="vectors"){const b=p.headers.get("content-type");if(p.headers.get("content-length")==="0"||p.status===204)return{};if(!b||!b.includes("application/json"))return{}}return p.json()}).then(p=>g(p)).catch(p=>gy(p,y,l,m))})}function eg(i="storage"){return{get:async(n,r,l,d)=>ir(n,"GET",r,l,d,void 0,i),post:async(n,r,l,d,h)=>ir(n,"POST",r,d,h,l,i),put:async(n,r,l,d,h)=>ir(n,"PUT",r,d,h,l,i),head:async(n,r,l,d)=>ir(n,"HEAD",r,me(me({},l),{},{noResolveJson:!0}),d,void 0,i),remove:async(n,r,l,d,h)=>ir(n,"DELETE",r,d,h,l,i)}}const yy=eg("storage"),{get:hr,post:Aa,put:yu,head:vy,remove:Eu}=yy,oa=eg("vectors");var ui=class{constructor(i,n={},r,l="storage"){this.shouldThrowOnError=!1,this.url=i,this.headers=n,this.fetch=cy(r),this.namespace=l}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,n){return this.headers=me(me({},this.headers),{},{[i]:n}),this}async handleOperation(i){var n=this;try{return{data:await i(),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Gl(r))return{data:null,error:r};throw r}}},by=class{constructor(i,n){this.downloadFn=i,this.shouldThrowOnError=n}then(i,n){return this.execute().then(i,n)}async execute(){var i=this;try{return{data:(await i.downloadFn()).body,error:null}}catch(n){if(i.shouldThrowOnError)throw n;if(Gl(n))return{data:null,error:n};throw n}}};let tg;tg=Symbol.toStringTag;var xy=class{constructor(i,n){this.downloadFn=i,this.shouldThrowOnError=n,this[tg]="BlobDownloadBuilder",this.promise=null}asStream(){return new by(this.downloadFn,this.shouldThrowOnError)}then(i,n){return this.getPromise().then(i,n)}catch(i){return this.getPromise().catch(i)}finally(i){return this.getPromise().finally(i)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var i=this;try{return{data:await(await i.downloadFn()).blob(),error:null}}catch(n){if(i.shouldThrowOnError)throw n;if(Gl(n))return{data:null,error:n};throw n}}};const wy={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Om={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var _y=class extends ui{constructor(i,n={},r,l){super(i,n,l,"storage"),this.bucketId=r}async uploadOrUpdate(i,n,r,l){var d=this;return d.handleOperation(async()=>{let h;const m=me(me({},Om),l);let g=me(me({},d.headers),i==="POST"&&{"x-upsert":String(m.upsert)});const y=m.metadata;typeof Blob<"u"&&r instanceof Blob?(h=new FormData,h.append("cacheControl",m.cacheControl),y&&h.append("metadata",d.encodeMetadata(y)),h.append("",r)):typeof FormData<"u"&&r instanceof FormData?(h=r,h.has("cacheControl")||h.append("cacheControl",m.cacheControl),y&&!h.has("metadata")&&h.append("metadata",d.encodeMetadata(y))):(h=r,g["cache-control"]=`max-age=${m.cacheControl}`,g["content-type"]=m.contentType,y&&(g["x-metadata"]=d.toBase64(d.encodeMetadata(y))),(typeof ReadableStream<"u"&&h instanceof ReadableStream||h&&typeof h=="object"&&"pipe"in h&&typeof h.pipe=="function")&&!m.duplex&&(m.duplex="half")),l!=null&&l.headers&&(g=me(me({},g),l.headers));const p=d._removeEmptyFolders(n),b=d._getFinalPath(p),j=await(i=="PUT"?yu:Aa)(d.fetch,`${d.url}/object/${b}`,h,me({headers:g},m!=null&&m.duplex?{duplex:m.duplex}:{}));return{path:p,id:j.Id,fullPath:j.Key}})}async upload(i,n,r){return this.uploadOrUpdate("POST",i,n,r)}async uploadToSignedUrl(i,n,r,l){var d=this;const h=d._removeEmptyFolders(i),m=d._getFinalPath(h),g=new URL(d.url+`/object/upload/sign/${m}`);return g.searchParams.set("token",n),d.handleOperation(async()=>{let y;const p=me({upsert:Om.upsert},l),b=me(me({},d.headers),{"x-upsert":String(p.upsert)});return typeof Blob<"u"&&r instanceof Blob?(y=new FormData,y.append("cacheControl",p.cacheControl),y.append("",r)):typeof FormData<"u"&&r instanceof FormData?(y=r,y.append("cacheControl",p.cacheControl)):(y=r,b["cache-control"]=`max-age=${p.cacheControl}`,b["content-type"]=p.contentType),{path:h,fullPath:(await yu(d.fetch,g.toString(),y,{headers:b})).Key}})}async createSignedUploadUrl(i,n){var r=this;return r.handleOperation(async()=>{let l=r._getFinalPath(i);const d=me({},r.headers);n!=null&&n.upsert&&(d["x-upsert"]="true");const h=await Aa(r.fetch,`${r.url}/object/upload/sign/${l}`,{},{headers:d}),m=new URL(r.url+h.url),g=m.searchParams.get("token");if(!g)throw new $l("No token returned by API");return{signedUrl:m.toString(),path:i,token:g}})}async update(i,n,r){return this.uploadOrUpdate("PUT",i,n,r)}async move(i,n,r){var l=this;return l.handleOperation(async()=>await Aa(l.fetch,`${l.url}/object/move`,{bucketId:l.bucketId,sourceKey:i,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:l.headers}))}async copy(i,n,r){var l=this;return l.handleOperation(async()=>({path:(await Aa(l.fetch,`${l.url}/object/copy`,{bucketId:l.bucketId,sourceKey:i,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:l.headers})).Key}))}async createSignedUrl(i,n,r){var l=this;return l.handleOperation(async()=>{let d=l._getFinalPath(i),h=await Aa(l.fetch,`${l.url}/object/sign/${d}`,me({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:l.headers});const m=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${l.url}${h.signedURL}${m}`)}})}async createSignedUrls(i,n,r){var l=this;return l.handleOperation(async()=>{const d=await Aa(l.fetch,`${l.url}/object/sign/${l.bucketId}`,{expiresIn:n,paths:i},{headers:l.headers}),h=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return d.map(m=>me(me({},m),{},{signedUrl:m.signedURL?encodeURI(`${l.url}${m.signedURL}${h}`):null}))})}download(i,n,r){const l=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",d=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),h=d?`?${d}`:"",m=this._getFinalPath(i),g=()=>hr(this.fetch,`${this.url}/${l}/${m}${h}`,{headers:this.headers,noResolveJson:!0},r);return new xy(g,this.shouldThrowOnError)}async info(i){var n=this;const r=n._getFinalPath(i);return n.handleOperation(async()=>pu(await hr(n.fetch,`${n.url}/object/info/${r}`,{headers:n.headers})))}async exists(i){var n=this;const r=n._getFinalPath(i);try{return await vy(n.fetch,`${n.url}/object/${r}`,{headers:n.headers}),{data:!0,error:null}}catch(l){if(n.shouldThrowOnError)throw l;if(Gl(l)&&l instanceof Fm){const d=l.originalError;if([400,404].includes(d==null?void 0:d.status))return{data:!1,error:l}}throw l}}getPublicUrl(i,n){const r=this._getFinalPath(i),l=[],d=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";d!==""&&l.push(d);const h=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",m=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});m!==""&&l.push(m);let g=l.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${r}${g}`)}}}async remove(i){var n=this;return n.handleOperation(async()=>await Eu(n.fetch,`${n.url}/object/${n.bucketId}`,{prefixes:i},{headers:n.headers}))}async list(i,n,r){var l=this;return l.handleOperation(async()=>{const d=me(me(me({},wy),n),{},{prefix:i||""});return await Aa(l.fetch,`${l.url}/object/list/${l.bucketId}`,d,{headers:l.headers},r)})}async listV2(i,n){var r=this;return r.handleOperation(async()=>{const l=me({},i);return await Aa(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,l,{headers:r.headers},n)})}encodeMetadata(i){return JSON.stringify(i)}toBase64(i){return typeof Buffer<"u"?Buffer.from(i).toString("base64"):btoa(i)}_getFinalPath(i){return`${this.bucketId}/${i.replace(/^\/+/,"")}`}_removeEmptyFolders(i){return i.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(i){const n=[];return i.width&&n.push(`width=${i.width}`),i.height&&n.push(`height=${i.height}`),i.resize&&n.push(`resize=${i.resize}`),i.format&&n.push(`format=${i.format}`),i.quality&&n.push(`quality=${i.quality}`),n.join("&")}};const Sy="2.97.0",pr={"X-Client-Info":`storage-js/${Sy}`};var jy=class extends ui{constructor(i,n={},r,l){const d=new URL(i);l!=null&&l.useNewHostname&&/supabase\.(co|in|red)$/.test(d.hostname)&&!d.hostname.includes("storage.supabase.")&&(d.hostname=d.hostname.replace("supabase.","storage.supabase."));const h=d.href.replace(/\/$/,""),m=me(me({},pr),n);super(h,m,r,"storage")}async listBuckets(i){var n=this;return n.handleOperation(async()=>{const r=n.listBucketOptionsToQueryString(i);return await hr(n.fetch,`${n.url}/bucket${r}`,{headers:n.headers})})}async getBucket(i){var n=this;return n.handleOperation(async()=>await hr(n.fetch,`${n.url}/bucket/${i}`,{headers:n.headers}))}async createBucket(i,n={public:!1}){var r=this;return r.handleOperation(async()=>await Aa(r.fetch,`${r.url}/bucket`,{id:i,name:i,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:r.headers}))}async updateBucket(i,n){var r=this;return r.handleOperation(async()=>await yu(r.fetch,`${r.url}/bucket/${i}`,{id:i,name:i,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(i){var n=this;return n.handleOperation(async()=>await Aa(n.fetch,`${n.url}/bucket/${i}/empty`,{},{headers:n.headers}))}async deleteBucket(i){var n=this;return n.handleOperation(async()=>await Eu(n.fetch,`${n.url}/bucket/${i}`,{},{headers:n.headers}))}listBucketOptionsToQueryString(i){const n={};return i&&("limit"in i&&(n.limit=String(i.limit)),"offset"in i&&(n.offset=String(i.offset)),i.search&&(n.search=i.search),i.sortColumn&&(n.sortColumn=i.sortColumn),i.sortOrder&&(n.sortOrder=i.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}},Ey=class extends ui{constructor(i,n={},r){const l=i.replace(/\/$/,""),d=me(me({},pr),n);super(l,d,r,"storage")}async createBucket(i){var n=this;return n.handleOperation(async()=>await Aa(n.fetch,`${n.url}/bucket`,{name:i},{headers:n.headers}))}async listBuckets(i){var n=this;return n.handleOperation(async()=>{const r=new URLSearchParams;(i==null?void 0:i.limit)!==void 0&&r.set("limit",i.limit.toString()),(i==null?void 0:i.offset)!==void 0&&r.set("offset",i.offset.toString()),i!=null&&i.sortColumn&&r.set("sortColumn",i.sortColumn),i!=null&&i.sortOrder&&r.set("sortOrder",i.sortOrder),i!=null&&i.search&&r.set("search",i.search);const l=r.toString(),d=l?`${n.url}/bucket?${l}`:`${n.url}/bucket`;return await hr(n.fetch,d,{headers:n.headers})})}async deleteBucket(i){var n=this;return n.handleOperation(async()=>await Eu(n.fetch,`${n.url}/bucket/${i}`,{},{headers:n.headers}))}from(i){var n=this;if(!dy(i))throw new $l("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new oy({baseUrl:this.url,catalogName:i,auth:{type:"custom",getHeaders:async()=>n.headers},fetch:this.fetch}),l=this.shouldThrowOnError;return new Proxy(r,{get(d,h){const m=d[h];return typeof m!="function"?m:async(...g)=>{try{return{data:await m.apply(d,g),error:null}}catch(y){if(l)throw y;return{data:null,error:y}}}}})}},Ny=class extends ui{constructor(i,n={},r){const l=i.replace(/\/$/,""),d=me(me({},pr),{},{"Content-Type":"application/json"},n);super(l,d,r,"vectors")}async createIndex(i){var n=this;return n.handleOperation(async()=>await oa.post(n.fetch,`${n.url}/CreateIndex`,i,{headers:n.headers})||{})}async getIndex(i,n){var r=this;return r.handleOperation(async()=>await oa.post(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:i,indexName:n},{headers:r.headers}))}async listIndexes(i){var n=this;return n.handleOperation(async()=>await oa.post(n.fetch,`${n.url}/ListIndexes`,i,{headers:n.headers}))}async deleteIndex(i,n){var r=this;return r.handleOperation(async()=>await oa.post(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:i,indexName:n},{headers:r.headers})||{})}},Ty=class extends ui{constructor(i,n={},r){const l=i.replace(/\/$/,""),d=me(me({},pr),{},{"Content-Type":"application/json"},n);super(l,d,r,"vectors")}async putVectors(i){var n=this;if(i.vectors.length<1||i.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return n.handleOperation(async()=>await oa.post(n.fetch,`${n.url}/PutVectors`,i,{headers:n.headers})||{})}async getVectors(i){var n=this;return n.handleOperation(async()=>await oa.post(n.fetch,`${n.url}/GetVectors`,i,{headers:n.headers}))}async listVectors(i){var n=this;if(i.segmentCount!==void 0){if(i.segmentCount<1||i.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(i.segmentIndex!==void 0&&(i.segmentIndex<0||i.segmentIndex>=i.segmentCount))throw new Error(`segmentIndex must be between 0 and ${i.segmentCount-1}`)}return n.handleOperation(async()=>await oa.post(n.fetch,`${n.url}/ListVectors`,i,{headers:n.headers}))}async queryVectors(i){var n=this;return n.handleOperation(async()=>await oa.post(n.fetch,`${n.url}/QueryVectors`,i,{headers:n.headers}))}async deleteVectors(i){var n=this;if(i.keys.length<1||i.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return n.handleOperation(async()=>await oa.post(n.fetch,`${n.url}/DeleteVectors`,i,{headers:n.headers})||{})}},Ay=class extends ui{constructor(i,n={},r){const l=i.replace(/\/$/,""),d=me(me({},pr),{},{"Content-Type":"application/json"},n);super(l,d,r,"vectors")}async createBucket(i){var n=this;return n.handleOperation(async()=>await oa.post(n.fetch,`${n.url}/CreateVectorBucket`,{vectorBucketName:i},{headers:n.headers})||{})}async getBucket(i){var n=this;return n.handleOperation(async()=>await oa.post(n.fetch,`${n.url}/GetVectorBucket`,{vectorBucketName:i},{headers:n.headers}))}async listBuckets(i={}){var n=this;return n.handleOperation(async()=>await oa.post(n.fetch,`${n.url}/ListVectorBuckets`,i,{headers:n.headers}))}async deleteBucket(i){var n=this;return n.handleOperation(async()=>await oa.post(n.fetch,`${n.url}/DeleteVectorBucket`,{vectorBucketName:i},{headers:n.headers})||{})}},Oy=class extends Ay{constructor(i,n={}){super(i,n.headers||{},n.fetch)}from(i){return new Cy(this.url,this.headers,i,this.fetch)}async createBucket(i){var n=()=>super.createBucket,r=this;return n().call(r,i)}async getBucket(i){var n=()=>super.getBucket,r=this;return n().call(r,i)}async listBuckets(i={}){var n=()=>super.listBuckets,r=this;return n().call(r,i)}async deleteBucket(i){var n=()=>super.deleteBucket,r=this;return n().call(r,i)}},Cy=class extends Ny{constructor(i,n,r,l){super(i,n,l),this.vectorBucketName=r}async createIndex(i){var n=()=>super.createIndex,r=this;return n().call(r,me(me({},i),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(i={}){var n=()=>super.listIndexes,r=this;return n().call(r,me(me({},i),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(i){var n=()=>super.getIndex,r=this;return n().call(r,r.vectorBucketName,i)}async deleteIndex(i){var n=()=>super.deleteIndex,r=this;return n().call(r,r.vectorBucketName,i)}index(i){return new ky(this.url,this.headers,this.vectorBucketName,i,this.fetch)}},ky=class extends Ty{constructor(i,n,r,l,d){super(i,n,d),this.vectorBucketName=r,this.indexName=l}async putVectors(i){var n=()=>super.putVectors,r=this;return n().call(r,me(me({},i),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(i){var n=()=>super.getVectors,r=this;return n().call(r,me(me({},i),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(i={}){var n=()=>super.listVectors,r=this;return n().call(r,me(me({},i),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(i){var n=()=>super.queryVectors,r=this;return n().call(r,me(me({},i),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(i){var n=()=>super.deleteVectors,r=this;return n().call(r,me(me({},i),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},Ry=class extends jy{constructor(i,n={},r,l){super(i,n,r,l)}from(i){return new _y(this.url,this.headers,i,this.fetch)}get vectors(){return new Oy(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Ey(this.url+"/iceberg",this.headers,this.fetch)}};const ag="2.97.0",ri=30*1e3,vu=3,lu=vu*ri,Dy="http://localhost:9999",Uy="supabase.auth.token",zy={"X-Client-Info":`gotrue-js/${ag}`},bu="X-Supabase-Api-Version",ng={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},My=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Ly=600*1e3;class fr extends Error{constructor(n,r,l){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=l}}function oe(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class By extends fr{constructor(n,r,l){super(n,r,l),this.name="AuthApiError",this.status=r,this.code=l}}function qy(i){return oe(i)&&i.name==="AuthApiError"}class ys extends fr{constructor(n,r){super(n),this.name="AuthUnknownError",this.originalError=r}}class cn extends fr{constructor(n,r,l,d){super(n,l,d),this.name=r,this.status=l}}class la extends cn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ou(i){return oe(i)&&i.name==="AuthSessionMissingError"}class ei extends cn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Dl extends cn{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class Ul extends cn{constructor(n,r=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Hy(i){return oe(i)&&i.name==="AuthImplicitGrantRedirectError"}class Cm extends cn{constructor(n,r=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class $y extends cn{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class xu extends cn{constructor(n,r){super(n,"AuthRetryableFetchError",r,void 0)}}function cu(i){return oe(i)&&i.name==="AuthRetryableFetchError"}class km extends cn{constructor(n,r,l){super(n,"AuthWeakPasswordError",r,"weak_password"),this.reasons=l}}class wu extends cn{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ll="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Rm=` 	
\r=`.split(""),Gy=(()=>{const i=new Array(128);for(let n=0;n<i.length;n+=1)i[n]=-1;for(let n=0;n<Rm.length;n+=1)i[Rm[n].charCodeAt(0)]=-2;for(let n=0;n<Ll.length;n+=1)i[Ll[n].charCodeAt(0)]=n;return i})();function Dm(i,n,r){if(i!==null)for(n.queue=n.queue<<8|i,n.queuedBits+=8;n.queuedBits>=6;){const l=n.queue>>n.queuedBits-6&63;r(Ll[l]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const l=n.queue>>n.queuedBits-6&63;r(Ll[l]),n.queuedBits-=6}}function sg(i,n,r){const l=Gy[i];if(l>-1)for(n.queue=n.queue<<6|l,n.queuedBits+=6;n.queuedBits>=8;)r(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(l===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function Um(i){const n=[],r=m=>{n.push(String.fromCodePoint(m))},l={utf8seq:0,codepoint:0},d={queue:0,queuedBits:0},h=m=>{Ky(m,l,r)};for(let m=0;m<i.length;m+=1)sg(i.charCodeAt(m),d,h);return n.join("")}function Vy(i,n){if(i<=127){n(i);return}else if(i<=2047){n(192|i>>6),n(128|i&63);return}else if(i<=65535){n(224|i>>12),n(128|i>>6&63),n(128|i&63);return}else if(i<=1114111){n(240|i>>18),n(128|i>>12&63),n(128|i>>6&63),n(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function Yy(i,n){for(let r=0;r<i.length;r+=1){let l=i.charCodeAt(r);if(l>55295&&l<=56319){const d=(l-55296)*1024&65535;l=(i.charCodeAt(r+1)-56320&65535|d)+65536,r+=1}Vy(l,n)}}function Ky(i,n,r){if(n.utf8seq===0){if(i<=127){r(i);return}for(let l=1;l<6;l+=1)if((i>>7-l&1)===0){n.utf8seq=l;break}if(n.utf8seq===2)n.codepoint=i&31;else if(n.utf8seq===3)n.codepoint=i&15;else if(n.utf8seq===4)n.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|i&63,n.utf8seq-=1,n.utf8seq===0&&r(n.codepoint)}}function ci(i){const n=[],r={queue:0,queuedBits:0},l=d=>{n.push(d)};for(let d=0;d<i.length;d+=1)sg(i.charCodeAt(d),r,l);return new Uint8Array(n)}function Iy(i){const n=[];return Yy(i,r=>n.push(r)),new Uint8Array(n)}function vs(i){const n=[],r={queue:0,queuedBits:0},l=d=>{n.push(d)};return i.forEach(d=>Dm(d,r,l)),Dm(null,r,l),n.join("")}function Xy(i){return Math.round(Date.now()/1e3)+i}function Qy(){return Symbol("auth-callback")}const Bt=()=>typeof window<"u"&&typeof document<"u",fs={tested:!1,writable:!1},ig=()=>{if(!Bt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(fs.tested)return fs.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),fs.tested=!0,fs.writable=!0}catch{fs.tested=!0,fs.writable=!1}return fs.writable};function Jy(i){const n={},r=new URL(i);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((d,h)=>{n[h]=d})}catch{}return r.searchParams.forEach((l,d)=>{n[d]=l}),n}const rg=i=>i?(...n)=>i(...n):(...n)=>fetch(...n),Zy=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",li=async(i,n,r)=>{await i.setItem(n,JSON.stringify(r))},ms=async(i,n)=>{const r=await i.getItem(n);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Lt=async(i,n)=>{await i.removeItem(n)};class Vl{constructor(){this.promise=new Vl.promiseConstructor((n,r)=>{this.resolve=n,this.reject=r})}}Vl.promiseConstructor=Promise;function zl(i){const n=i.split(".");if(n.length!==3)throw new wu("Invalid JWT structure");for(let l=0;l<n.length;l++)if(!My.test(n[l]))throw new wu("JWT not in base64url format");return{header:JSON.parse(Um(n[0])),payload:JSON.parse(Um(n[1])),signature:ci(n[2]),raw:{header:n[0],payload:n[1]}}}async function Py(i){return await new Promise(n=>{setTimeout(()=>n(null),i)})}function Wy(i,n){return new Promise((l,d)=>{(async()=>{for(let h=0;h<1/0;h++)try{const m=await i(h);if(!n(h,null,m)){l(m);return}}catch(m){if(!n(h,m)){d(m);return}}})()})}function Fy(i){return("0"+i.toString(16)).substr(-2)}function ev(){const n=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",l=r.length;let d="";for(let h=0;h<56;h++)d+=r.charAt(Math.floor(Math.random()*l));return d}return crypto.getRandomValues(n),Array.from(n,Fy).join("")}async function tv(i){const r=new TextEncoder().encode(i),l=await crypto.subtle.digest("SHA-256",r),d=new Uint8Array(l);return Array.from(d).map(h=>String.fromCharCode(h)).join("")}async function av(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const r=await tv(i);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ti(i,n,r=!1){const l=ev();let d=l;r&&(d+="/PASSWORD_RECOVERY"),await li(i,`${n}-code-verifier`,d);const h=await av(l);return[h,l===h?"plain":"s256"]}const nv=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function sv(i){const n=i.headers.get(bu);if(!n||!n.match(nv))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function iv(i){if(!i)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(i<=n)throw new Error("JWT has expired")}function rv(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const lv=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ai(i){if(!lv.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function uu(){const i={};return new Proxy(i,{get:(n,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const l=r.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ov(i,n){return new Proxy(i,{get:(r,l,d)=>{if(l==="__isInsecureUserWarningProxy")return!0;if(typeof l=="symbol"){const h=l.toString();if(h==="Symbol(Symbol.toPrimitive)"||h==="Symbol(Symbol.toStringTag)"||h==="Symbol(util.inspect.custom)"||h==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,l,d)}return!n.value&&typeof l=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(r,l,d)}})}function zm(i){return JSON.parse(JSON.stringify(i))}const gs=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),cv=[502,503,504];async function Mm(i){var n;if(!Zy(i))throw new xu(gs(i),0);if(cv.includes(i.status))throw new xu(gs(i),i.status);let r;try{r=await i.json()}catch(h){throw new ys(gs(h),h)}let l;const d=sv(i);if(d&&d.getTime()>=ng["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?l=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(l=r.error_code),l){if(l==="weak_password")throw new km(gs(r),i.status,((n=r.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(l==="session_not_found")throw new la}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((h,m)=>h&&typeof m=="string",!0))throw new km(gs(r),i.status,r.weak_password.reasons);throw new By(gs(r),i.status||500,l)}const uv=(i,n,r,l)=>{const d={method:i,headers:(n==null?void 0:n.headers)||{}};return i==="GET"?d:(d.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n==null?void 0:n.headers),d.body=JSON.stringify(l),Object.assign(Object.assign({},d),r))};async function pe(i,n,r,l){var d;const h=Object.assign({},l==null?void 0:l.headers);h[bu]||(h[bu]=ng["2024-01-01"].name),l!=null&&l.jwt&&(h.Authorization=`Bearer ${l.jwt}`);const m=(d=l==null?void 0:l.query)!==null&&d!==void 0?d:{};l!=null&&l.redirectTo&&(m.redirect_to=l.redirectTo);const g=Object.keys(m).length?"?"+new URLSearchParams(m).toString():"",y=await dv(i,n,r+g,{headers:h,noResolveJson:l==null?void 0:l.noResolveJson},{},l==null?void 0:l.body);return l!=null&&l.xform?l==null?void 0:l.xform(y):{data:Object.assign({},y),error:null}}async function dv(i,n,r,l,d,h){const m=uv(n,l,d,h);let g;try{g=await i(r,Object.assign({},m))}catch(y){throw console.error(y),new xu(gs(y),0)}if(g.ok||await Mm(g),l!=null&&l.noResolveJson)return g;try{return await g.json()}catch(y){await Mm(y)}}function Ta(i){var n;let r=null;mv(i)&&(r=Object.assign({},i),i.expires_at||(r.expires_at=Xy(i.expires_in)));const l=(n=i.user)!==null&&n!==void 0?n:i;return{data:{session:r,user:l},error:null}}function Lm(i){const n=Ta(i);return!n.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((r,l)=>r&&typeof l=="string",!0)&&(n.data.weak_password=i.weak_password),n}function Vn(i){var n;return{data:{user:(n=i.user)!==null&&n!==void 0?n:i},error:null}}function hv(i){return{data:i,error:null}}function fv(i){const{action_link:n,email_otp:r,hashed_token:l,redirect_to:d,verification_type:h}=i,m=Hl(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),g={action_link:n,email_otp:r,hashed_token:l,redirect_to:d,verification_type:h},y=Object.assign({},m);return{data:{properties:g,user:y},error:null}}function Bm(i){return i}function mv(i){return i.access_token&&i.refresh_token&&i.expires_in}const du=["global","local","others"];class gv{constructor({url:n="",headers:r={},fetch:l}){this.url=n,this.headers=r,this.fetch=rg(l),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,r=du[0]){if(du.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${du.join(", ")}`);try{return await pe(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(l){if(oe(l))return{data:null,error:l};throw l}}async inviteUserByEmail(n,r={}){try{return await pe(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Vn})}catch(l){if(oe(l))return{data:{user:null},error:l};throw l}}async generateLink(n){try{const{options:r}=n,l=Hl(n,["options"]),d=Object.assign(Object.assign({},l),r);return"newEmail"in l&&(d.new_email=l==null?void 0:l.newEmail,delete d.newEmail),await pe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:d,headers:this.headers,xform:fv,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(oe(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(n){try{return await pe(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:Vn})}catch(r){if(oe(r))return{data:{user:null},error:r};throw r}}async listUsers(n){var r,l,d,h,m,g,y;try{const p={nextPage:null,lastPage:0,total:0},b=await pe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(r=n==null?void 0:n.page)===null||r===void 0?void 0:r.toString())!==null&&l!==void 0?l:"",per_page:(h=(d=n==null?void 0:n.perPage)===null||d===void 0?void 0:d.toString())!==null&&h!==void 0?h:""},xform:Bm});if(b.error)throw b.error;const j=await b.json(),T=(m=b.headers.get("x-total-count"))!==null&&m!==void 0?m:0,E=(y=(g=b.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&y!==void 0?y:[];return E.length>0&&(E.forEach(S=>{const A=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),D=JSON.parse(S.split(";")[1].split("=")[1]);p[`${D}Page`]=A}),p.total=parseInt(T)),{data:Object.assign(Object.assign({},j),p),error:null}}catch(p){if(oe(p))return{data:{users:[]},error:p};throw p}}async getUserById(n){ai(n);try{return await pe(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:Vn})}catch(r){if(oe(r))return{data:{user:null},error:r};throw r}}async updateUserById(n,r){ai(n);try{return await pe(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:r,headers:this.headers,xform:Vn})}catch(l){if(oe(l))return{data:{user:null},error:l};throw l}}async deleteUser(n,r=!1){ai(n);try{return await pe(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:r},xform:Vn})}catch(l){if(oe(l))return{data:{user:null},error:l};throw l}}async _listFactors(n){ai(n.userId);try{const{data:r,error:l}=await pe(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:d=>({data:{factors:d},error:null})});return{data:r,error:l}}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _deleteFactor(n){ai(n.userId),ai(n.id);try{return{data:await pe(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _listOAuthClients(n){var r,l,d,h,m,g,y;try{const p={nextPage:null,lastPage:0,total:0},b=await pe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(r=n==null?void 0:n.page)===null||r===void 0?void 0:r.toString())!==null&&l!==void 0?l:"",per_page:(h=(d=n==null?void 0:n.perPage)===null||d===void 0?void 0:d.toString())!==null&&h!==void 0?h:""},xform:Bm});if(b.error)throw b.error;const j=await b.json(),T=(m=b.headers.get("x-total-count"))!==null&&m!==void 0?m:0,E=(y=(g=b.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&y!==void 0?y:[];return E.length>0&&(E.forEach(S=>{const A=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),D=JSON.parse(S.split(";")[1].split("=")[1]);p[`${D}Page`]=A}),p.total=parseInt(T)),{data:Object.assign(Object.assign({},j),p),error:null}}catch(p){if(oe(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(n){try{return await pe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _getOAuthClient(n){try{return await pe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _updateOAuthClient(n,r){try{return await pe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${n}`,{body:r,headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(oe(l))return{data:null,error:l};throw l}}async _deleteOAuthClient(n){try{return await pe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(n){try{return await pe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(oe(r))return{data:null,error:r};throw r}}}function qm(i={}){return{getItem:n=>i[n]||null,setItem:(n,r)=>{i[n]=r},removeItem:n=>{delete i[n]}}}const ni={debug:!!(globalThis&&ig()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class lg extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class Hm extends lg{}async function pv(i,n,r){ni.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,n);const l=new globalThis.AbortController;n>0&&setTimeout(()=>{l.abort(),ni.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},n),await Promise.resolve();try{return await globalThis.navigator.locks.request(i,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:l.signal},async d=>{if(d){ni.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,d.name);try{return await r()}finally{ni.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,d.name)}}else{if(n===0)throw ni.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new Hm(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(ni.debug)try{const h=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(h,null,"  "))}catch(h){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",h)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}})}catch(d){throw(d==null?void 0:d.name)==="AbortError"?new Hm(`Acquiring an exclusive Navigator LockManager lock "${i}" timed out waiting ${n}ms`):d}}function yv(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function og(i){if(!/^0x[a-fA-F0-9]{40}$/.test(i))throw new Error(`@supabase/auth-js: Address "${i}" is invalid.`);return i.toLowerCase()}function vv(i){return parseInt(i,16)}function bv(i){const n=new TextEncoder().encode(i);return"0x"+Array.from(n,l=>l.toString(16).padStart(2,"0")).join("")}function xv(i){var n;const{chainId:r,domain:l,expirationTime:d,issuedAt:h=new Date,nonce:m,notBefore:g,requestId:y,resources:p,scheme:b,uri:j,version:T}=i;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!l)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(m&&m.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${m}`);if(!j)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(T!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${T}`);if(!((n=i.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${i.statement}`)}const E=og(i.address),S=b?`${b}://${l}`:l,A=i.statement?`${i.statement}
`:"",D=`${S} wants you to sign in with your Ethereum account:
${E}

${A}`;let Y=`URI: ${j}
Version: ${T}
Chain ID: ${r}${m?`
Nonce: ${m}`:""}
Issued At: ${h.toISOString()}`;if(d&&(Y+=`
Expiration Time: ${d.toISOString()}`),g&&(Y+=`
Not Before: ${g.toISOString()}`),y&&(Y+=`
Request ID: ${y}`),p){let K=`
Resources:`;for(const H of p){if(!H||typeof H!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${H}`);K+=`
- ${H}`}Y+=K}return`${D}
${Y}`}class St extends Error{constructor({message:n,code:r,cause:l,name:d}){var h;super(n,{cause:l}),this.__isWebAuthnError=!0,this.name=(h=d??(l instanceof Error?l.name:void 0))!==null&&h!==void 0?h:"Unknown Error",this.code=r}}class Bl extends St{constructor(n,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:n}),this.name="WebAuthnUnknownError",this.originalError=r}}function wv({error:i,options:n}){var r,l,d;const{publicKey:h}=n;if(!h)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(n.signal instanceof AbortSignal)return new St({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else if(i.name==="ConstraintError"){if(((r=h.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new St({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:i});if(n.mediation==="conditional"&&((l=h.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new St({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:i});if(((d=h.authenticatorSelection)===null||d===void 0?void 0:d.userVerification)==="required")return new St({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:i})}else{if(i.name==="InvalidStateError")return new St({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:i});if(i.name==="NotAllowedError")return new St({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="NotSupportedError")return h.pubKeyCredParams.filter(g=>g.type==="public-key").length===0?new St({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:i}):new St({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:i});if(i.name==="SecurityError"){const m=window.location.hostname;if(cg(m)){if(h.rp.id!==m)return new St({message:`The RP ID "${h.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new St({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="TypeError"){if(h.user.id.byteLength<1||h.user.id.byteLength>64)return new St({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:i})}else if(i.name==="UnknownError")return new St({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new St({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}function _v({error:i,options:n}){const{publicKey:r}=n;if(!r)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(n.signal instanceof AbortSignal)return new St({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else{if(i.name==="NotAllowedError")return new St({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="SecurityError"){const l=window.location.hostname;if(cg(l)){if(r.rpId!==l)return new St({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new St({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="UnknownError")return new St({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new St({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}class Sv{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const jv=new Sv;function Ev(i){if(!i)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(i);const{challenge:n,user:r,excludeCredentials:l}=i,d=Hl(i,["challenge","user","excludeCredentials"]),h=ci(n).buffer,m=Object.assign(Object.assign({},r),{id:ci(r.id).buffer}),g=Object.assign(Object.assign({},d),{challenge:h,user:m});if(l&&l.length>0){g.excludeCredentials=new Array(l.length);for(let y=0;y<l.length;y++){const p=l[y];g.excludeCredentials[y]=Object.assign(Object.assign({},p),{id:ci(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return g}function Nv(i){if(!i)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(i);const{challenge:n,allowCredentials:r}=i,l=Hl(i,["challenge","allowCredentials"]),d=ci(n).buffer,h=Object.assign(Object.assign({},l),{challenge:d});if(r&&r.length>0){h.allowCredentials=new Array(r.length);for(let m=0;m<r.length;m++){const g=r[m];h.allowCredentials[m]=Object.assign(Object.assign({},g),{id:ci(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return h}function Tv(i){var n;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const r=i;return{id:i.id,rawId:i.id,response:{attestationObject:vs(new Uint8Array(i.response.attestationObject)),clientDataJSON:vs(new Uint8Array(i.response.clientDataJSON))},type:"public-key",clientExtensionResults:i.getClientExtensionResults(),authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function Av(i){var n;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const r=i,l=i.getClientExtensionResults(),d=i.response;return{id:i.id,rawId:i.id,response:{authenticatorData:vs(new Uint8Array(d.authenticatorData)),clientDataJSON:vs(new Uint8Array(d.clientDataJSON)),signature:vs(new Uint8Array(d.signature)),userHandle:d.userHandle?vs(new Uint8Array(d.userHandle)):void 0},type:"public-key",clientExtensionResults:l,authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function cg(i){return i==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(i)}function $m(){var i,n;return!!(Bt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((i=navigator==null?void 0:navigator.credentials)===null||i===void 0?void 0:i.create)=="function"&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.get)=="function")}async function Ov(i){try{const n=await navigator.credentials.create(i);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new Bl("Browser returned unexpected credential type",n)}:{data:null,error:new Bl("Empty credential response",n)}}catch(n){return{data:null,error:wv({error:n,options:i})}}}async function Cv(i){try{const n=await navigator.credentials.get(i);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new Bl("Browser returned unexpected credential type",n)}:{data:null,error:new Bl("Empty credential response",n)}}catch(n){return{data:null,error:_v({error:n,options:i})}}}const kv={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Rv={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function ql(...i){const n=d=>d!==null&&typeof d=="object"&&!Array.isArray(d),r=d=>d instanceof ArrayBuffer||ArrayBuffer.isView(d),l={};for(const d of i)if(d)for(const h in d){const m=d[h];if(m!==void 0)if(Array.isArray(m))l[h]=m;else if(r(m))l[h]=m;else if(n(m)){const g=l[h];n(g)?l[h]=ql(g,m):l[h]=ql(m)}else l[h]=m}return l}function Dv(i,n){return ql(kv,i,n||{})}function Uv(i,n){return ql(Rv,i,n||{})}class zv{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:r,friendlyName:l,signal:d},h){var m;try{const{data:g,error:y}=await this.client.mfa.challenge({factorId:n,webauthn:r});if(!g)return{data:null,error:y};const p=d??jv.createNewAbortSignal();if(g.webauthn.type==="create"){const{user:b}=g.webauthn.credential_options.publicKey;if(!b.name){const j=l;if(j)b.name=`${b.id}:${j}`;else{const E=(await this.client.getUser()).data.user,S=((m=E==null?void 0:E.user_metadata)===null||m===void 0?void 0:m.name)||(E==null?void 0:E.email)||(E==null?void 0:E.id)||"User";b.name=`${b.id}:${S}`}}b.displayName||(b.displayName=b.name)}switch(g.webauthn.type){case"create":{const b=Dv(g.webauthn.credential_options.publicKey,h==null?void 0:h.create),{data:j,error:T}=await Ov({publicKey:b,signal:p});return j?{data:{factorId:n,challengeId:g.id,webauthn:{type:g.webauthn.type,credential_response:j}},error:null}:{data:null,error:T}}case"request":{const b=Uv(g.webauthn.credential_options.publicKey,h==null?void 0:h.request),{data:j,error:T}=await Cv(Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:b,signal:p}));return j?{data:{factorId:n,challengeId:g.id,webauthn:{type:g.webauthn.type,credential_response:j}},error:null}:{data:null,error:T}}}}catch(g){return oe(g)?{data:null,error:g}:{data:null,error:new ys("Unexpected error in challenge",g)}}}async _verify({challengeId:n,factorId:r,webauthn:l}){return this.client.mfa.verify({factorId:r,challengeId:n,webauthn:l})}async _authenticate({factorId:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:d}={}},h){if(!r)return{data:null,error:new fr("rpId is required for WebAuthn authentication")};try{if(!$m())return{data:null,error:new ys("Browser does not support WebAuthn",null)};const{data:m,error:g}=await this.challenge({factorId:n,webauthn:{rpId:r,rpOrigins:l},signal:d},{request:h});if(!m)return{data:null,error:g};const{webauthn:y}=m;return this._verify({factorId:n,challengeId:m.challengeId,webauthn:{type:y.type,rpId:r,rpOrigins:l,credential_response:y.credential_response}})}catch(m){return oe(m)?{data:null,error:m}:{data:null,error:new ys("Unexpected error in authenticate",m)}}}async _register({friendlyName:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:d}={}},h){if(!r)return{data:null,error:new fr("rpId is required for WebAuthn registration")};try{if(!$m())return{data:null,error:new ys("Browser does not support WebAuthn",null)};const{data:m,error:g}=await this._enroll({friendlyName:n});if(!m)return await this.client.mfa.listFactors().then(b=>{var j;return(j=b.data)===null||j===void 0?void 0:j.all.find(T=>T.factor_type==="webauthn"&&T.friendly_name===n&&T.status!=="unverified")}).then(b=>b?this.client.mfa.unenroll({factorId:b==null?void 0:b.id}):void 0),{data:null,error:g};const{data:y,error:p}=await this._challenge({factorId:m.id,friendlyName:m.friendly_name,webauthn:{rpId:r,rpOrigins:l},signal:d},{create:h});return y?this._verify({factorId:m.id,challengeId:y.challengeId,webauthn:{rpId:r,rpOrigins:l,type:y.webauthn.type,credential_response:y.webauthn.credential_response}}):{data:null,error:p}}catch(m){return oe(m)?{data:null,error:m}:{data:null,error:new ys("Unexpected error in register",m)}}}}yv();const Mv={url:Dy,storageKey:Uy,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:zy,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4,skipAutoInitialize:!1};async function Gm(i,n,r){return await r()}const si={};class mr{get jwks(){var n,r;return(r=(n=si[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(n){si[this.storageKey]=Object.assign(Object.assign({},si[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,r;return(r=(n=si[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){si[this.storageKey]=Object.assign(Object.assign({},si[this.storageKey]),{cachedAt:n})}constructor(n){var r,l,d;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const h=Object.assign(Object.assign({},Mv),n);if(this.storageKey=h.storageKey,this.instanceID=(r=mr.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,mr.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!h.debug,typeof h.debug=="function"&&(this.logger=h.debug),this.instanceID>0&&Bt()){const m=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(m),this.logDebugMessages&&console.trace(m)}if(this.persistSession=h.persistSession,this.autoRefreshToken=h.autoRefreshToken,this.admin=new gv({url:h.url,headers:h.headers,fetch:h.fetch}),this.url=h.url,this.headers=h.headers,this.fetch=rg(h.fetch),this.lock=h.lock||Gm,this.detectSessionInUrl=h.detectSessionInUrl,this.flowType=h.flowType,this.hasCustomAuthorizationHeader=h.hasCustomAuthorizationHeader,this.throwOnError=h.throwOnError,this.lockAcquireTimeout=h.lockAcquireTimeout,h.lock?this.lock=h.lock:this.persistSession&&Bt()&&(!((l=globalThis==null?void 0:globalThis.navigator)===null||l===void 0)&&l.locks)?this.lock=pv:this.lock=Gm,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new zv(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(h.storage?this.storage=h.storage:ig()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=qm(this.memoryStorage)),h.userStorage&&(this.userStorage=h.userStorage)):(this.memoryStorage={},this.storage=qm(this.memoryStorage)),Bt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(m){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",m)}(d=this.broadcastChannel)===null||d===void 0||d.addEventListener("message",async m=>{this._debug("received broadcast notification from other tab or client",m);try{await this._notifyAllSubscribers(m.data.event,m.data.session,!1)}catch(g){this._debug("#broadcastChannel","error",g)}})}h.skipAutoInitialize||this.initialize().catch(m=>{this._debug("#initialize()","error",m)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${ag}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let r={},l="none";if(Bt()&&(r=Jy(window.location.href),this._isImplicitGrantCallback(r)?l="implicit":await this._isPKCECallback(r)&&(l="pkce")),Bt()&&this.detectSessionInUrl&&l!=="none"){const{data:d,error:h}=await this._getSessionFromURL(r,l);if(h){if(this._debug("#_initialize()","error detecting session from URL",h),Hy(h)){const y=(n=h.details)===null||n===void 0?void 0:n.code;if(y==="identity_already_exists"||y==="identity_not_found"||y==="single_identity_not_deletable")return{error:h}}return{error:h}}const{session:m,redirectType:g}=d;return this._debug("#_initialize()","detected session in URL",m,"redirect type",g),await this._saveSession(m),setTimeout(async()=>{g==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",m):await this._notifyAllSubscribers("SIGNED_IN",m)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return oe(r)?this._returnResult({error:r}):this._returnResult({error:new ys("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var r,l,d;try{const h=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(l=(r=n==null?void 0:n.options)===null||r===void 0?void 0:r.data)!==null&&l!==void 0?l:{},gotrue_meta_security:{captcha_token:(d=n==null?void 0:n.options)===null||d===void 0?void 0:d.captchaToken}},xform:Ta}),{data:m,error:g}=h;if(g||!m)return this._returnResult({data:{user:null,session:null},error:g});const y=m.session,p=m.user;return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",y)),this._returnResult({data:{user:p,session:y},error:null})}catch(h){if(oe(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async signUp(n){var r,l,d;try{let h;if("email"in n){const{email:b,password:j,options:T}=n;let E=null,S=null;this.flowType==="pkce"&&([E,S]=await ti(this.storage,this.storageKey)),h=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:T==null?void 0:T.emailRedirectTo,body:{email:b,password:j,data:(r=T==null?void 0:T.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:T==null?void 0:T.captchaToken},code_challenge:E,code_challenge_method:S},xform:Ta})}else if("phone"in n){const{phone:b,password:j,options:T}=n;h=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:b,password:j,data:(l=T==null?void 0:T.data)!==null&&l!==void 0?l:{},channel:(d=T==null?void 0:T.channel)!==null&&d!==void 0?d:"sms",gotrue_meta_security:{captcha_token:T==null?void 0:T.captchaToken}},xform:Ta})}else throw new Dl("You must provide either an email or phone number and a password");const{data:m,error:g}=h;if(g||!m)return await Lt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:g});const y=m.session,p=m.user;return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",y)),this._returnResult({data:{user:p,session:y},error:null})}catch(h){if(await Lt(this.storage,`${this.storageKey}-code-verifier`),oe(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async signInWithPassword(n){try{let r;if("email"in n){const{email:h,password:m,options:g}=n;r=await pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:h,password:m,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:Lm})}else if("phone"in n){const{phone:h,password:m,options:g}=n;r=await pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:h,password:m,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:Lm})}else throw new Dl("You must provide either an email or phone number and a password");const{data:l,error:d}=r;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!l||!l.session||!l.user){const h=new ei;return this._returnResult({data:{user:null,session:null},error:h})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign({user:l.user,session:l.session},l.weak_password?{weakPassword:l.weak_password}:null),error:d})}catch(r){if(oe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(n){var r,l,d,h;return await this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(l=n.options)===null||l===void 0?void 0:l.scopes,queryParams:(d=n.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:(h=n.options)===null||h===void 0?void 0:h.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:r}=n;switch(r){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(n){var r,l,d,h,m,g,y,p,b,j,T;let E,S;if("message"in n)E=n.message,S=n.signature;else{const{chain:A,wallet:D,statement:Y,options:K}=n;let H;if(Bt())if(typeof D=="object")H=D;else{const F=window;if("ethereum"in F&&typeof F.ethereum=="object"&&"request"in F.ethereum&&typeof F.ethereum.request=="function")H=F.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof D!="object"||!(K!=null&&K.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");H=D}const I=new URL((r=K==null?void 0:K.url)!==null&&r!==void 0?r:window.location.href),le=await H.request({method:"eth_requestAccounts"}).then(F=>F).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!le||le.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const ne=og(le[0]);let X=(l=K==null?void 0:K.signInWithEthereum)===null||l===void 0?void 0:l.chainId;if(!X){const F=await H.request({method:"eth_chainId"});X=vv(F)}const G={domain:I.host,address:ne,statement:Y,uri:I.href,version:"1",chainId:X,nonce:(d=K==null?void 0:K.signInWithEthereum)===null||d===void 0?void 0:d.nonce,issuedAt:(m=(h=K==null?void 0:K.signInWithEthereum)===null||h===void 0?void 0:h.issuedAt)!==null&&m!==void 0?m:new Date,expirationTime:(g=K==null?void 0:K.signInWithEthereum)===null||g===void 0?void 0:g.expirationTime,notBefore:(y=K==null?void 0:K.signInWithEthereum)===null||y===void 0?void 0:y.notBefore,requestId:(p=K==null?void 0:K.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(b=K==null?void 0:K.signInWithEthereum)===null||b===void 0?void 0:b.resources};E=xv(G),S=await H.request({method:"personal_sign",params:[bv(E),ne]})}try{const{data:A,error:D}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:E,signature:S},!((j=n.options)===null||j===void 0)&&j.captchaToken?{gotrue_meta_security:{captcha_token:(T=n.options)===null||T===void 0?void 0:T.captchaToken}}:null),xform:Ta});if(D)throw D;if(!A||!A.session||!A.user){const Y=new ei;return this._returnResult({data:{user:null,session:null},error:Y})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:D})}catch(A){if(oe(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async signInWithSolana(n){var r,l,d,h,m,g,y,p,b,j,T,E;let S,A;if("message"in n)S=n.message,A=n.signature;else{const{chain:D,wallet:Y,statement:K,options:H}=n;let I;if(Bt())if(typeof Y=="object")I=Y;else{const ne=window;if("solana"in ne&&typeof ne.solana=="object"&&("signIn"in ne.solana&&typeof ne.solana.signIn=="function"||"signMessage"in ne.solana&&typeof ne.solana.signMessage=="function"))I=ne.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof Y!="object"||!(H!=null&&H.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");I=Y}const le=new URL((r=H==null?void 0:H.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in I&&I.signIn){const ne=await I.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},H==null?void 0:H.signInWithSolana),{version:"1",domain:le.host,uri:le.href}),K?{statement:K}:null));let X;if(Array.isArray(ne)&&ne[0]&&typeof ne[0]=="object")X=ne[0];else if(ne&&typeof ne=="object"&&"signedMessage"in ne&&"signature"in ne)X=ne;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in X&&"signature"in X&&(typeof X.signedMessage=="string"||X.signedMessage instanceof Uint8Array)&&X.signature instanceof Uint8Array)S=typeof X.signedMessage=="string"?X.signedMessage:new TextDecoder().decode(X.signedMessage),A=X.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in I)||typeof I.signMessage!="function"||!("publicKey"in I)||typeof I!="object"||!I.publicKey||!("toBase58"in I.publicKey)||typeof I.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${le.host} wants you to sign in with your Solana account:`,I.publicKey.toBase58(),...K?["",K,""]:[""],"Version: 1",`URI: ${le.href}`,`Issued At: ${(d=(l=H==null?void 0:H.signInWithSolana)===null||l===void 0?void 0:l.issuedAt)!==null&&d!==void 0?d:new Date().toISOString()}`,...!((h=H==null?void 0:H.signInWithSolana)===null||h===void 0)&&h.notBefore?[`Not Before: ${H.signInWithSolana.notBefore}`]:[],...!((m=H==null?void 0:H.signInWithSolana)===null||m===void 0)&&m.expirationTime?[`Expiration Time: ${H.signInWithSolana.expirationTime}`]:[],...!((g=H==null?void 0:H.signInWithSolana)===null||g===void 0)&&g.chainId?[`Chain ID: ${H.signInWithSolana.chainId}`]:[],...!((y=H==null?void 0:H.signInWithSolana)===null||y===void 0)&&y.nonce?[`Nonce: ${H.signInWithSolana.nonce}`]:[],...!((p=H==null?void 0:H.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${H.signInWithSolana.requestId}`]:[],...!((j=(b=H==null?void 0:H.signInWithSolana)===null||b===void 0?void 0:b.resources)===null||j===void 0)&&j.length?["Resources",...H.signInWithSolana.resources.map(X=>`- ${X}`)]:[]].join(`
`);const ne=await I.signMessage(new TextEncoder().encode(S),"utf8");if(!ne||!(ne instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");A=ne}}try{const{data:D,error:Y}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:vs(A)},!((T=n.options)===null||T===void 0)&&T.captchaToken?{gotrue_meta_security:{captcha_token:(E=n.options)===null||E===void 0?void 0:E.captchaToken}}:null),xform:Ta});if(Y)throw Y;if(!D||!D.session||!D.user){const K=new ei;return this._returnResult({data:{user:null,session:null},error:K})}return D.session&&(await this._saveSession(D.session),await this._notifyAllSubscribers("SIGNED_IN",D.session)),this._returnResult({data:Object.assign({},D),error:Y})}catch(D){if(oe(D))return this._returnResult({data:{user:null,session:null},error:D});throw D}}async _exchangeCodeForSession(n){const r=await ms(this.storage,`${this.storageKey}-code-verifier`),[l,d]=(r??"").split("/");try{if(!l&&this.flowType==="pkce")throw new $y;const{data:h,error:m}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:l},xform:Ta});if(await Lt(this.storage,`${this.storageKey}-code-verifier`),m)throw m;if(!h||!h.session||!h.user){const g=new ei;return this._returnResult({data:{user:null,session:null,redirectType:null},error:g})}return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),this._returnResult({data:Object.assign(Object.assign({},h),{redirectType:d??null}),error:m})}catch(h){if(await Lt(this.storage,`${this.storageKey}-code-verifier`),oe(h))return this._returnResult({data:{user:null,session:null,redirectType:null},error:h});throw h}}async signInWithIdToken(n){try{const{options:r,provider:l,token:d,access_token:h,nonce:m}=n,g=await pe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:l,id_token:d,access_token:h,nonce:m,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Ta}),{data:y,error:p}=g;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!y||!y.session||!y.user){const b=new ei;return this._returnResult({data:{user:null,session:null},error:b})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:y,error:p})}catch(r){if(oe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(n){var r,l,d,h,m;try{if("email"in n){const{email:g,options:y}=n;let p=null,b=null;this.flowType==="pkce"&&([p,b]=await ti(this.storage,this.storageKey));const{error:j}=await pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:g,data:(r=y==null?void 0:y.data)!==null&&r!==void 0?r:{},create_user:(l=y==null?void 0:y.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:p,code_challenge_method:b},redirectTo:y==null?void 0:y.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:j})}if("phone"in n){const{phone:g,options:y}=n,{data:p,error:b}=await pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:g,data:(d=y==null?void 0:y.data)!==null&&d!==void 0?d:{},create_user:(h=y==null?void 0:y.shouldCreateUser)!==null&&h!==void 0?h:!0,gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},channel:(m=y==null?void 0:y.channel)!==null&&m!==void 0?m:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:b})}throw new Dl("You must provide either an email or phone number.")}catch(g){if(await Lt(this.storage,`${this.storageKey}-code-verifier`),oe(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async verifyOtp(n){var r,l;try{let d,h;"options"in n&&(d=(r=n.options)===null||r===void 0?void 0:r.redirectTo,h=(l=n.options)===null||l===void 0?void 0:l.captchaToken);const{data:m,error:g}=await pe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:h}}),redirectTo:d,xform:Ta});if(g)throw g;if(!m)throw new Error("An error occurred on token verification.");const y=m.session,p=m.user;return y!=null&&y.access_token&&(await this._saveSession(y),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",y)),this._returnResult({data:{user:p,session:y},error:null})}catch(d){if(oe(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signInWithSSO(n){var r,l,d,h,m;try{let g=null,y=null;this.flowType==="pkce"&&([g,y]=await ti(this.storage,this.storageKey));const p=await pe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(l=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&l!==void 0?l:void 0}),!((d=n==null?void 0:n.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:g,code_challenge_method:y}),headers:this.headers,xform:hv});return!((h=p.data)===null||h===void 0)&&h.url&&Bt()&&!(!((m=n.options)===null||m===void 0)&&m.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(g){if(await Lt(this.storage,`${this.storageKey}-code-verifier`),oe(g))return this._returnResult({data:null,error:g});throw g}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:r},error:l}=n;if(l)throw l;if(!r)throw new la;const{error:d}=await pe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:d})})}catch(n){if(oe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{const r=`${this.url}/resend`;if("email"in n){const{email:l,type:d,options:h}=n,{error:m}=await pe(this.fetch,"POST",r,{headers:this.headers,body:{email:l,type:d,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},redirectTo:h==null?void 0:h.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:m})}else if("phone"in n){const{phone:l,type:d,options:h}=n,{data:m,error:g}=await pe(this.fetch,"POST",r,{headers:this.headers,body:{phone:l,type:d,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:g})}throw new Dl("You must provide either an email or phone number and a type")}catch(r){if(oe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(n,r){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const l=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),d=(async()=>(await l,await r()))();return this.pendingInLock.push((async()=>{try{await d}catch{}})()),d}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const l=r();for(this.pendingInLock.push((async()=>{try{await l}catch{}})()),await l;this.pendingInLock.length;){const d=[...this.pendingInLock];await Promise.all(d),this.pendingInLock.splice(0,d.length)}return await l}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await n(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const r=await ms(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const l=n.expires_at?n.expires_at*1e3-Date.now()<lu:!1;if(this._debug("#__loadSession()",`session has${l?"":" not"} expired`,"expires_at",n.expires_at),!l){if(this.userStorage){const m=await ms(this.userStorage,this.storageKey+"-user");m!=null&&m.user?n.user=m.user:n.user=uu()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){const m={value:this.suppressGetSessionWarning};n.user=ov(n.user,m),m.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}const{data:d,error:h}=await this._callRefreshToken(n.refresh_token);return h?this._returnResult({data:{session:null},error:h}):this._returnResult({data:{session:d},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){if(n)return await this._getUser(n);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(n){try{return n?await pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:Vn}):await this._useSession(async r=>{var l,d,h;const{data:m,error:g}=r;if(g)throw g;return!(!((l=m.session)===null||l===void 0)&&l.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new la}:await pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(h=(d=m.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0,xform:Vn})})}catch(r){if(oe(r))return ou(r)&&(await this._removeSession(),await Lt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(n,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(n,r))}async _updateUser(n,r={}){try{return await this._useSession(async l=>{const{data:d,error:h}=l;if(h)throw h;if(!d.session)throw new la;const m=d.session;let g=null,y=null;this.flowType==="pkce"&&n.email!=null&&([g,y]=await ti(this.storage,this.storageKey));const{data:p,error:b}=await pe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:g,code_challenge_method:y}),jwt:m.access_token,xform:Vn});if(b)throw b;return m.user=p.user,await this._saveSession(m),await this._notifyAllSubscribers("USER_UPDATED",m),this._returnResult({data:{user:m.user},error:null})})}catch(l){if(await Lt(this.storage,`${this.storageKey}-code-verifier`),oe(l))return this._returnResult({data:{user:null},error:l});throw l}}async setSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new la;const r=Date.now()/1e3;let l=r,d=!0,h=null;const{payload:m}=zl(n.access_token);if(m.exp&&(l=m.exp,d=l<=r),d){const{data:g,error:y}=await this._callRefreshToken(n.refresh_token);if(y)return this._returnResult({data:{user:null,session:null},error:y});if(!g)return{data:{user:null,session:null},error:null};h=g}else{const{data:g,error:y}=await this._getUser(n.access_token);if(y)return this._returnResult({data:{user:null,session:null},error:y});h={access_token:n.access_token,refresh_token:n.refresh_token,user:g.user,token_type:"bearer",expires_in:l-r,expires_at:l},await this._saveSession(h),await this._notifyAllSubscribers("SIGNED_IN",h)}return this._returnResult({data:{user:h.user,session:h},error:null})}catch(r){if(oe(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async r=>{var l;if(!n){const{data:m,error:g}=r;if(g)throw g;n=(l=m.session)!==null&&l!==void 0?l:void 0}if(!(n!=null&&n.refresh_token))throw new la;const{data:d,error:h}=await this._callRefreshToken(n.refresh_token);return h?this._returnResult({data:{user:null,session:null},error:h}):d?this._returnResult({data:{user:d.user,session:d},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(oe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(n,r){try{if(!Bt())throw new Ul("No browser detected.");if(n.error||n.error_description||n.error_code)throw new Ul(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Cm("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ul("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new Cm("No code detected.");const{data:K,error:H}=await this._exchangeCodeForSession(n.code);if(H)throw H;const I=new URL(window.location.href);return I.searchParams.delete("code"),window.history.replaceState(window.history.state,"",I.toString()),{data:{session:K.session,redirectType:null},error:null}}const{provider_token:l,provider_refresh_token:d,access_token:h,refresh_token:m,expires_in:g,expires_at:y,token_type:p}=n;if(!h||!g||!m||!p)throw new Ul("No session defined in URL");const b=Math.round(Date.now()/1e3),j=parseInt(g);let T=b+j;y&&(T=parseInt(y));const E=T-b;E*1e3<=ri&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${E}s, should have been closer to ${j}s`);const S=T-j;b-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,T,b):b-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,T,b);const{data:A,error:D}=await this._getUser(h);if(D)throw D;const Y={provider_token:l,provider_refresh_token:d,access_token:h,expires_in:j,expires_at:T,refresh_token:m,token_type:p,user:A.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:Y,redirectType:n.type},error:null})}catch(l){if(oe(l))return this._returnResult({data:{session:null,redirectType:null},error:l});throw l}}_isImplicitGrantCallback(n){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),n):!!(n.access_token||n.error_description)}async _isPKCECallback(n){const r=await ms(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async r=>{var l;const{data:d,error:h}=r;if(h&&!ou(h))return this._returnResult({error:h});const m=(l=d.session)===null||l===void 0?void 0:l.access_token;if(m){const{error:g}=await this.admin.signOut(m,n);if(g&&!(qy(g)&&(g.status===404||g.status===401||g.status===403)||ou(g)))return this._returnResult({error:g})}return n!=="others"&&(await this._removeSession(),await Lt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){const r=Qy(),l={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,l),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:l}}}async _emitInitialSession(n){return await this._useSession(async r=>{var l,d;try{const{data:{session:h},error:m}=r;if(m)throw m;await((l=this.stateChangeEmitters.get(n))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",h)),this._debug("INITIAL_SESSION","callback id",n,"session",h)}catch(h){await((d=this.stateChangeEmitters.get(n))===null||d===void 0?void 0:d.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",h),console.error(h)}})}async resetPasswordForEmail(n,r={}){let l=null,d=null;this.flowType==="pkce"&&([l,d]=await ti(this.storage,this.storageKey,!0));try{return await pe(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:l,code_challenge_method:d,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(h){if(await Lt(this.storage,`${this.storageKey}-code-verifier`),oe(h))return this._returnResult({data:null,error:h});throw h}}async getUserIdentities(){var n;try{const{data:r,error:l}=await this.getUser();if(l)throw l;return this._returnResult({data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var r;try{const{data:l,error:d}=await this._useSession(async h=>{var m,g,y,p,b;const{data:j,error:T}=h;if(T)throw T;const E=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(m=n.options)===null||m===void 0?void 0:m.redirectTo,scopes:(g=n.options)===null||g===void 0?void 0:g.scopes,queryParams:(y=n.options)===null||y===void 0?void 0:y.queryParams,skipBrowserRedirect:!0});return await pe(this.fetch,"GET",E,{headers:this.headers,jwt:(b=(p=j.session)===null||p===void 0?void 0:p.access_token)!==null&&b!==void 0?b:void 0})});if(d)throw d;return Bt()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(l==null?void 0:l.url),this._returnResult({data:{provider:n.provider,url:l==null?void 0:l.url},error:null})}catch(l){if(oe(l))return this._returnResult({data:{provider:n.provider,url:null},error:l});throw l}}async linkIdentityIdToken(n){return await this._useSession(async r=>{var l;try{const{error:d,data:{session:h}}=r;if(d)throw d;const{options:m,provider:g,token:y,access_token:p,nonce:b}=n,j=await pe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(l=h==null?void 0:h.access_token)!==null&&l!==void 0?l:void 0,body:{provider:g,id_token:y,access_token:p,nonce:b,link_identity:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Ta}),{data:T,error:E}=j;return E?this._returnResult({data:{user:null,session:null},error:E}):!T||!T.session||!T.user?this._returnResult({data:{user:null,session:null},error:new ei}):(T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("USER_UPDATED",T.session)),this._returnResult({data:T,error:E}))}catch(d){if(await Lt(this.storage,`${this.storageKey}-code-verifier`),oe(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}})}async unlinkIdentity(n){try{return await this._useSession(async r=>{var l,d;const{data:h,error:m}=r;if(m)throw m;return await pe(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(d=(l=h.session)===null||l===void 0?void 0:l.access_token)!==null&&d!==void 0?d:void 0})})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(n){const r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{const l=Date.now();return await Wy(async d=>(d>0&&await Py(200*Math.pow(2,d-1)),this._debug(r,"refreshing attempt",d),await pe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:Ta})),(d,h)=>{const m=200*Math.pow(2,d);return h&&cu(h)&&Date.now()+m-l<ri})}catch(l){if(this._debug(r,"error",l),oe(l))return this._returnResult({data:{session:null,user:null},error:l});throw l}finally{this._debug(r,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,r){const l=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",l),Bt()&&!r.skipBrowserRedirect&&window.location.assign(l),{data:{provider:n,url:l},error:null}}async _recoverAndRefresh(){var n,r;const l="#_recoverAndRefresh()";this._debug(l,"begin");try{const d=await ms(this.storage,this.storageKey);if(d&&this.userStorage){let m=await ms(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!m&&(m={user:d.user},await li(this.userStorage,this.storageKey+"-user",m)),d.user=(n=m==null?void 0:m.user)!==null&&n!==void 0?n:uu()}else if(d&&!d.user&&!d.user){const m=await ms(this.storage,this.storageKey+"-user");m&&(m!=null&&m.user)?(d.user=m.user,await Lt(this.storage,this.storageKey+"-user"),await li(this.storage,this.storageKey,d)):d.user=uu()}if(this._debug(l,"session from storage",d),!this._isValidSession(d)){this._debug(l,"session is not valid"),d!==null&&await this._removeSession();return}const h=((r=d.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<lu;if(this._debug(l,`session has${h?"":" not"} expired with margin of ${lu}s`),h){if(this.autoRefreshToken&&d.refresh_token){const{error:m}=await this._callRefreshToken(d.refresh_token);m&&(console.error(m),cu(m)||(this._debug(l,"refresh failed with a non-retryable error, removing the session",m),await this._removeSession()))}}else if(d.user&&d.user.__isUserNotAvailableProxy===!0)try{const{data:m,error:g}=await this._getUser(d.access_token);!g&&(m!=null&&m.user)?(d.user=m.user,await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)):this._debug(l,"could not get user data, skipping SIGNED_IN notification")}catch(m){console.error("Error getting user data:",m),this._debug(l,"error getting user data, skipping SIGNED_IN notification",m)}else await this._notifyAllSubscribers("SIGNED_IN",d)}catch(d){this._debug(l,"error",d),console.error(d);return}finally{this._debug(l,"end")}}async _callRefreshToken(n){var r,l;if(!n)throw new la;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const d=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(d,"begin");try{this.refreshingDeferred=new Vl;const{data:h,error:m}=await this._refreshAccessToken(n);if(m)throw m;if(!h.session)throw new la;await this._saveSession(h.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",h.session);const g={data:h.session,error:null};return this.refreshingDeferred.resolve(g),g}catch(h){if(this._debug(d,"error",h),oe(h)){const m={data:null,error:h};return cu(h)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(m),m}throw(l=this.refreshingDeferred)===null||l===void 0||l.reject(h),h}finally{this.refreshingDeferred=null,this._debug(d,"end")}}async _notifyAllSubscribers(n,r,l=!0){const d=`#_notifyAllSubscribers(${n})`;this._debug(d,"begin",r,`broadcast = ${l}`);try{this.broadcastChannel&&l&&this.broadcastChannel.postMessage({event:n,session:r});const h=[],m=Array.from(this.stateChangeEmitters.values()).map(async g=>{try{await g.callback(n,r)}catch(y){h.push(y)}});if(await Promise.all(m),h.length>0){for(let g=0;g<h.length;g+=1)console.error(h[g]);throw h[0]}}finally{this._debug(d,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await Lt(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},n),l=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!l&&r.user&&await li(this.userStorage,this.storageKey+"-user",{user:r.user});const d=Object.assign({},r);delete d.user;const h=zm(d);await li(this.storage,this.storageKey,h)}else{const d=zm(r);await li(this.storage,this.storageKey,d)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Lt(this.storage,this.storageKey),await Lt(this.storage,this.storageKey+"-code-verifier"),await Lt(this.storage,this.storageKey+"-user"),this.userStorage&&await Lt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&Bt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),ri);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async r=>{const{data:{session:l}}=r;if(!l||!l.refresh_token||!l.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const d=Math.floor((l.expires_at*1e3-n)/ri);this._debug("#_autoRefreshTokenTick()",`access token expires in ${d} ticks, a tick lasts ${ri}ms, refresh threshold is ${vu} ticks`),d<=vu&&await this._callRefreshToken(l.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof lg)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Bt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(n){this._debug("#visibilityChangedCallback","error",n)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,r,l){const d=[`provider=${encodeURIComponent(r)}`];if(l!=null&&l.redirectTo&&d.push(`redirect_to=${encodeURIComponent(l.redirectTo)}`),l!=null&&l.scopes&&d.push(`scopes=${encodeURIComponent(l.scopes)}`),this.flowType==="pkce"){const[h,m]=await ti(this.storage,this.storageKey),g=new URLSearchParams({code_challenge:`${encodeURIComponent(h)}`,code_challenge_method:`${encodeURIComponent(m)}`});d.push(g.toString())}if(l!=null&&l.queryParams){const h=new URLSearchParams(l.queryParams);d.push(h.toString())}return l!=null&&l.skipBrowserRedirect&&d.push(`skip_http_redirect=${l.skipBrowserRedirect}`),`${n}?${d.join("&")}`}async _unenroll(n){try{return await this._useSession(async r=>{var l;const{data:d,error:h}=r;return h?this._returnResult({data:null,error:h}):await pe(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(l=d==null?void 0:d.session)===null||l===void 0?void 0:l.access_token})})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(n){try{return await this._useSession(async r=>{var l,d;const{data:h,error:m}=r;if(m)return this._returnResult({data:null,error:m});const g=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:y,error:p}=await pe(this.fetch,"POST",`${this.url}/factors`,{body:g,headers:this.headers,jwt:(l=h==null?void 0:h.session)===null||l===void 0?void 0:l.access_token});return p?this._returnResult({data:null,error:p}):(n.factorType==="totp"&&y.type==="totp"&&(!((d=y==null?void 0:y.totp)===null||d===void 0)&&d.qr_code)&&(y.totp.qr_code=`data:image/svg+xml;utf-8,${y.totp.qr_code}`),this._returnResult({data:y,error:null}))})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}}async _verify(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var l;const{data:d,error:h}=r;if(h)return this._returnResult({data:null,error:h});const m=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?Tv(n.webauthn.credential_response):Av(n.webauthn.credential_response)})}:{code:n.code}),{data:g,error:y}=await pe(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:m,headers:this.headers,jwt:(l=d==null?void 0:d.session)===null||l===void 0?void 0:l.access_token});return y?this._returnResult({data:null,error:y}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+g.expires_in},g)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",g),this._returnResult({data:g,error:y}))})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var l;const{data:d,error:h}=r;if(h)return this._returnResult({data:null,error:h});const m=await pe(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(l=d==null?void 0:d.session)===null||l===void 0?void 0:l.access_token});if(m.error)return m;const{data:g}=m;if(g.type!=="webauthn")return{data:g,error:null};switch(g.webauthn.type){case"create":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:Ev(g.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:Nv(g.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(n){const{data:r,error:l}=await this._challenge({factorId:n.factorId});return l?this._returnResult({data:null,error:l}):await this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})}async _listFactors(){var n;const{data:{user:r},error:l}=await this.getUser();if(l)return{data:null,error:l};const d={all:[],phone:[],totp:[],webauthn:[]};for(const h of(n=r==null?void 0:r.factors)!==null&&n!==void 0?n:[])d.all.push(h),h.status==="verified"&&d[h.factor_type].push(h);return{data:d,error:null}}async _getAuthenticatorAssuranceLevel(n){var r,l,d,h;if(n)try{const{payload:E}=zl(n);let S=null;E.aal&&(S=E.aal);let A=S;const{data:{user:D},error:Y}=await this.getUser(n);if(Y)return this._returnResult({data:null,error:Y});((l=(r=D==null?void 0:D.factors)===null||r===void 0?void 0:r.filter(I=>I.status==="verified"))!==null&&l!==void 0?l:[]).length>0&&(A="aal2");const H=E.amr||[];return{data:{currentLevel:S,nextLevel:A,currentAuthenticationMethods:H},error:null}}catch(E){if(oe(E))return this._returnResult({data:null,error:E});throw E}const{data:{session:m},error:g}=await this.getSession();if(g)return this._returnResult({data:null,error:g});if(!m)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:y}=zl(m.access_token);let p=null;y.aal&&(p=y.aal);let b=p;((h=(d=m.user.factors)===null||d===void 0?void 0:d.filter(E=>E.status==="verified"))!==null&&h!==void 0?h:[]).length>0&&(b="aal2");const T=y.amr||[];return{data:{currentLevel:p,nextLevel:b,currentAuthenticationMethods:T},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async r=>{const{data:{session:l},error:d}=r;return d?this._returnResult({data:null,error:d}):l?await pe(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:l.access_token,xform:h=>({data:h,error:null})}):this._returnResult({data:null,error:new la})})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(n,r){try{return await this._useSession(async l=>{const{data:{session:d},error:h}=l;if(h)return this._returnResult({data:null,error:h});if(!d)return this._returnResult({data:null,error:new la});const m=await pe(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:d.access_token,body:{action:"approve"},xform:g=>({data:g,error:null})});return m.data&&m.data.redirect_url&&Bt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(m.data.redirect_url),m})}catch(l){if(oe(l))return this._returnResult({data:null,error:l});throw l}}async _denyAuthorization(n,r){try{return await this._useSession(async l=>{const{data:{session:d},error:h}=l;if(h)return this._returnResult({data:null,error:h});if(!d)return this._returnResult({data:null,error:new la});const m=await pe(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:d.access_token,body:{action:"deny"},xform:g=>({data:g,error:null})});return m.data&&m.data.redirect_url&&Bt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(m.data.redirect_url),m})}catch(l){if(oe(l))return this._returnResult({data:null,error:l});throw l}}async _listOAuthGrants(){try{return await this._useSession(async n=>{const{data:{session:r},error:l}=n;return l?this._returnResult({data:null,error:l}):r?await pe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:d=>({data:d,error:null})}):this._returnResult({data:null,error:new la})})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async r=>{const{data:{session:l},error:d}=r;return d?this._returnResult({data:null,error:d}):l?(await pe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:l.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new la})})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(n,r={keys:[]}){let l=r.keys.find(g=>g.kid===n);if(l)return l;const d=Date.now();if(l=this.jwks.keys.find(g=>g.kid===n),l&&this.jwks_cached_at+Ly>d)return l;const{data:h,error:m}=await pe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(m)throw m;return!h.keys||h.keys.length===0||(this.jwks=h,this.jwks_cached_at=d,l=h.keys.find(g=>g.kid===n),!l)?null:l}async getClaims(n,r={}){try{let l=n;if(!l){const{data:E,error:S}=await this.getSession();if(S||!E.session)return this._returnResult({data:null,error:S});l=E.session.access_token}const{header:d,payload:h,signature:m,raw:{header:g,payload:y}}=zl(l);r!=null&&r.allowExpired||iv(h.exp);const p=!d.alg||d.alg.startsWith("HS")||!d.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(d.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!p){const{error:E}=await this.getUser(l);if(E)throw E;return{data:{claims:h,header:d,signature:m},error:null}}const b=rv(d.alg),j=await crypto.subtle.importKey("jwk",p,b,!0,["verify"]);if(!await crypto.subtle.verify(b,j,m,Iy(`${g}.${y}`)))throw new wu("Invalid JWT signature");return{data:{claims:h,header:d,signature:m},error:null}}catch(l){if(oe(l))return this._returnResult({data:null,error:l});throw l}}}mr.nextInstanceID={};const Lv=mr,Bv="2.97.0";let rr="";typeof Deno<"u"?rr="deno":typeof document<"u"?rr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?rr="react-native":rr="node";const qv={"X-Client-Info":`supabase-js-${rr}/${Bv}`},Hv={headers:qv},$v={schema:"public"},Gv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Vv={};function gr(i){"@babel/helpers - typeof";return gr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},gr(i)}function Yv(i,n){if(gr(i)!="object"||!i)return i;var r=i[Symbol.toPrimitive];if(r!==void 0){var l=r.call(i,n);if(gr(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(i)}function Kv(i){var n=Yv(i,"string");return gr(n)=="symbol"?n:n+""}function Iv(i,n,r){return(n=Kv(n))in i?Object.defineProperty(i,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[n]=r,i}function Vm(i,n){var r=Object.keys(i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);n&&(l=l.filter(function(d){return Object.getOwnPropertyDescriptor(i,d).enumerable})),r.push.apply(r,l)}return r}function dt(i){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Vm(Object(r),!0).forEach(function(l){Iv(i,l,r[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(r)):Vm(Object(r)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(r,l))})}return i}const Xv=i=>i?(...n)=>i(...n):(...n)=>fetch(...n),Qv=()=>Headers,Jv=(i,n,r)=>{const l=Xv(r),d=Qv();return async(h,m)=>{var g;const y=(g=await n())!==null&&g!==void 0?g:i;let p=new d(m==null?void 0:m.headers);return p.has("apikey")||p.set("apikey",i),p.has("Authorization")||p.set("Authorization",`Bearer ${y}`),l(h,dt(dt({},m),{},{headers:p}))}};function Zv(i){return i.endsWith("/")?i:i+"/"}function Pv(i,n){var r,l;const{db:d,auth:h,realtime:m,global:g}=i,{db:y,auth:p,realtime:b,global:j}=n,T={db:dt(dt({},y),d),auth:dt(dt({},p),h),realtime:dt(dt({},b),m),storage:{},global:dt(dt(dt({},j),g),{},{headers:dt(dt({},(r=j==null?void 0:j.headers)!==null&&r!==void 0?r:{}),(l=g==null?void 0:g.headers)!==null&&l!==void 0?l:{})}),accessToken:async()=>""};return i.accessToken?T.accessToken=i.accessToken:delete T.accessToken,T}function Wv(i){const n=i==null?void 0:i.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Zv(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Fv=class extends Lv{constructor(i){super(i)}},eb=class{constructor(i,n,r){var l,d;this.supabaseUrl=i,this.supabaseKey=n;const h=Wv(i);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",h),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",h),this.storageUrl=new URL("storage/v1",h),this.functionsUrl=new URL("functions/v1",h);const m=`sb-${h.hostname.split(".")[0]}-auth-token`,g={db:$v,realtime:Vv,auth:dt(dt({},Gv),{},{storageKey:m}),global:Hv},y=Pv(r??{},g);if(this.storageKey=(l=y.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(d=y.global.headers)!==null&&d!==void 0?d:{},y.accessToken)this.accessToken=y.accessToken,this.auth=new Proxy({},{get:(b,j)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(j)} is not possible`)}});else{var p;this.auth=this._initSupabaseAuthClient((p=y.auth)!==null&&p!==void 0?p:{},this.headers,y.global.fetch)}this.fetch=Jv(n,this._getAccessToken.bind(this),y.global.fetch),this.realtime=this._initRealtimeClient(dt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},y.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(b=>this.realtime.setAuth(b)).catch(b=>console.warn("Failed to set initial Realtime auth token:",b)),this.rest=new qp(new URL("rest/v1",h).href,{headers:this.headers,schema:y.db.schema,fetch:this.fetch,timeout:y.db.timeout,urlLengthLimit:y.db.urlLengthLimit}),this.storage=new Ry(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),y.accessToken||this._listenForAuthEvents()}get functions(){return new kp(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(i){return this.rest.from(i)}schema(i){return this.rest.schema(i)}rpc(i,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(i,n,r)}channel(i,n={config:{}}){return this.realtime.channel(i,n)}getChannels(){return this.realtime.getChannels()}removeChannel(i){return this.realtime.removeChannel(i)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var i=this,n,r;if(i.accessToken)return await i.accessToken();const{data:l}=await i.auth.getSession();return(n=(r=l.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:i.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:i,persistSession:n,detectSessionInUrl:r,storage:l,userStorage:d,storageKey:h,flowType:m,lock:g,debug:y,throwOnError:p},b,j){const T={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Fv({url:this.authUrl.href,headers:dt(dt({},T),b),storageKey:h,autoRefreshToken:i,persistSession:n,detectSessionInUrl:r,storage:l,userStorage:d,flowType:m,lock:g,debug:y,throwOnError:p,fetch:j,hasCustomAuthorizationHeader:Object.keys(this.headers).some(E=>E.toLowerCase()==="authorization")})}_initRealtimeClient(i){return new ay(this.realtimeUrl.href,dt(dt({},i),{},{params:dt(dt({},{apikey:this.supabaseKey}),i==null?void 0:i.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((i,n)=>{this._handleTokenChanged(i,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(i,n,r){(i==="TOKEN_REFRESHED"||i==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):i==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const tb=(i,n,r)=>new eb(i,n,r);function ab(){if(typeof window<"u")return!1;const i=globalThis.process;if(!i)return!1;const n=i.version;if(n==null)return!1;const r=n.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}ab()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const nb="https://wofipjazcxwxzzxjsflh.supabase.co",sb="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndvZmlwamF6Y3h3eHp6eGpzZmxoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4MDA2NjcsImV4cCI6MjA3NDM3NjY2N30.gKjTEhXbrvRxKcn3cNvgMlbigXypbshDWyVaLqDjcpQ",W=tb(nb,sb);var _u=(i=>(i[i.REQUIRED_SECTOR=2]="REQUIRED_SECTOR",i[i.REQUIRED_ROLE=7]="REQUIRED_ROLE",i))(_u||{});const ib=({onSuccess:i})=>{const[n,r]=V.useState(""),[l,d]=V.useState(""),[h,m]=V.useState(!0),[g,y]=V.useState(!1),[p,b]=V.useState(null),j=async E=>{const{data:S,error:A}=await W.from("users").select("sector, role").eq("user_id",E).single();return A?(console.error(A),!1):S?S.sector===_u.REQUIRED_SECTOR||S.role===_u.REQUIRED_ROLE:!1},T=async E=>{E.preventDefault(),y(!0),b(null);try{if(h){const{data:S,error:A}=await W.auth.signInWithPassword({email:n,password:l});if(A)throw A;S.user&&(await j(S.user.id)?i():(await W.auth.signOut(),b("Acesso negado. Permisso insuficiente.")))}else{const{data:S,error:A}=await W.auth.signUp({email:n,password:l});if(A)throw A;S.user&&b("Cadastro realizado! Aguarde aprovao.")}}catch(S){b(S.message)}finally{y(!1)}};return u.jsxs("div",{className:"min-h-screen flex items-center justify-center p-6 relative overflow-hidden bg-[#F2F2F7]",children:[u.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[500px] h-[500px] rounded-full bg-ios-primary/20 blur-[100px] animate-pulse"}),u.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[500px] h-[500px] rounded-full bg-ios-secondary/20 blur-[100px] animate-pulse delay-1000"}),u.jsxs("div",{className:"w-full max-w-[400px] bg-white/70 backdrop-blur-3xl rounded-[32px] p-10 shadow-float border border-white/60 relative z-10",children:[u.jsxs("div",{className:"text-center mb-10",children:[u.jsx("div",{className:"w-20 h-20 bg-gradient-to-tr from-ios-primary to-ios-secondary rounded-[24px] mx-auto flex items-center justify-center shadow-lg shadow-ios-primary/30 mb-6 transform rotate-3",children:u.jsx("img",{src:"https://wofipjazcxwxzzxjsflh.supabase.co/storage/v1/object/public/Media/Image/image-removebg-preview%20(2).png",alt:"Gama Center Logo",className:"w-14 h-14 object-contain brightness-0 invert"})}),u.jsx("h1",{className:"text-3xl font-bold text-ios-text tracking-tight",children:"Gama Center"}),u.jsx("p",{className:"text-ios-subtext text-sm font-medium mt-2",children:"Health OS 26"})]}),u.jsxs("form",{onSubmit:T,className:"space-y-5",children:[u.jsx("div",{className:"space-y-1",children:u.jsx("input",{type:"email",required:!0,value:n,onChange:E=>r(E.target.value),className:"w-full h-14 px-5 rounded-2xl bg-white border border-gray-200 focus:border-ios-primary focus:ring-4 focus:ring-ios-primary/10 outline-none transition-all placeholder-gray-400 text-ios-text text-lg shadow-sm",placeholder:"Email"})}),u.jsx("div",{className:"space-y-1",children:u.jsx("input",{type:"password",required:!0,value:l,onChange:E=>d(E.target.value),className:"w-full h-14 px-5 rounded-2xl bg-white border border-gray-200 focus:border-ios-primary focus:ring-4 focus:ring-ios-primary/10 outline-none transition-all placeholder-gray-400 text-ios-text text-lg shadow-sm",placeholder:"Senha"})}),p&&u.jsx("div",{className:"p-4 bg-red-50 text-red-600 text-xs font-semibold rounded-2xl text-center border border-red-100",children:p}),u.jsx("button",{type:"submit",disabled:g,className:"w-full h-14 bg-ios-text hover:bg-black text-white font-bold text-lg rounded-2xl shadow-xl transition-all active:scale-[0.98] disabled:opacity-70 disabled:cursor-not-allowed mt-4",children:g?"Processando...":h?"Entrar":"Criar Conta"})]}),u.jsx("div",{className:"mt-8 text-center",children:u.jsx("button",{onClick:()=>{m(!h),b(null)},className:"text-sm font-medium text-ios-subtext hover:text-ios-primary transition-colors",children:h?"Criar uma conta":"Voltar para login"})})]})]})},rb=({children:i,activeTab:n,setActiveTab:r,onLogout:l,userId:d})=>{const h=n==="atendimento",m=n==="aso",[g,y]=V.useState(null);V.useEffect(()=>{d&&p()},[d]);const p=async()=>{const{data:b,error:j}=await W.from("users").select("*").eq("user_id",d).single();b&&y(b)};return u.jsxs("div",{className:`flex h-screen w-full overflow-hidden ${h||m?"p-0":"p-0 lg:p-4 gap-6"} flex-col lg:flex-row`,children:[!h&&!m&&u.jsxs("header",{className:"lg:hidden flex items-center justify-between px-6 py-4 bg-white/80 backdrop-blur-md border-b border-gray-100 z-30 sticky top-0",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-8 h-8 rounded-xl bg-gradient-to-br from-ios-primary to-ios-secondary flex items-center justify-center shadow-md shadow-ios-primary/20 overflow-hidden",children:u.jsx("img",{src:"https://wofipjazcxwxzzxjsflh.supabase.co/storage/v1/object/public/Media/Image/image-removebg-preview%20(2).png",alt:"Logo",className:"w-5 h-5 object-contain brightness-0 invert"})}),u.jsx("h1",{className:"text-lg font-bold text-ios-text tracking-tight",children:"Gama Center"})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("img",{src:(g==null?void 0:g.img_url)||`https://ui-avatars.com/api/?name=${(g==null?void 0:g.username)||"User"}&background=04a7bd&color=fff`,alt:"Profile",className:"w-8 h-8 rounded-full bg-gray-100 object-cover ring-2 ring-white shadow-sm"}),u.jsx("button",{onClick:l,className:"text-red-500",children:u.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})]}),!h&&!m&&u.jsxs("aside",{className:"hidden lg:flex w-64 flex-shrink-0 glass-sidebar rounded-ios flex-col py-8 px-4 transition-all duration-500 shadow-glass relative overflow-hidden",children:[u.jsxs("div",{className:"mb-12 flex flex-col items-start px-4 relative z-10",children:[u.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-ios-primary to-ios-secondary flex items-center justify-center shadow-lg shadow-ios-primary/30 mb-3 overflow-hidden",children:u.jsx("img",{src:"https://wofipjazcxwxzzxjsflh.supabase.co/storage/v1/object/public/Media/Image/image-removebg-preview%20(2).png",alt:"Gama Center Logo",className:"w-8 h-8 object-contain brightness-0 invert"})}),u.jsx("h1",{className:"text-xl font-bold tracking-tight text-ios-text",children:"Gama Center"}),u.jsx("p",{className:"text-[10px] uppercase tracking-wider text-ios-subtext font-semibold mt-0.5",children:"Health OS 26"})]}),u.jsxs("nav",{className:"flex-1 space-y-2 relative z-10",children:[u.jsxs("button",{onClick:()=>r("dashboard"),className:`w-full flex items-center justify-start gap-4 px-4 py-3.5 rounded-ios-btn transition-all duration-300 group ${n==="dashboard"?"bg-ios-primary text-white shadow-lg shadow-ios-primary/25":"text-ios-subtext hover:bg-white hover:text-ios-text"}`,children:[u.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),u.jsx("span",{className:"font-medium tracking-wide",children:"Incio"})]}),u.jsxs("button",{onClick:()=>r("agenda"),className:`w-full flex items-center justify-start gap-4 px-4 py-3.5 rounded-ios-btn transition-all duration-300 group ${n==="agenda"||n==="novo"?"bg-ios-primary text-white shadow-lg shadow-ios-primary/25":"text-ios-subtext hover:bg-white hover:text-ios-text"}`,children:[u.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),u.jsx("span",{className:"font-medium tracking-wide",children:"Agenda"})]}),u.jsxs("button",{onClick:()=>r("chamada"),className:`w-full flex items-center justify-start gap-4 px-4 py-3.5 rounded-ios-btn transition-all duration-300 group ${n==="chamada"?"bg-ios-primary text-white shadow-lg shadow-ios-primary/25":"text-ios-subtext hover:bg-white hover:text-ios-text"}`,children:[u.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),u.jsx("span",{className:"font-medium tracking-wide",children:"Chamada"})]}),u.jsxs("button",{onClick:()=>r("stats"),className:`w-full flex items-center justify-start gap-4 px-4 py-3.5 rounded-ios-btn transition-all duration-300 group ${n==="stats"?"bg-ios-primary text-white shadow-lg shadow-ios-primary/25":"text-ios-subtext hover:bg-white hover:text-ios-text"}`,children:[u.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),u.jsx("span",{className:"font-medium tracking-wide",children:"Estatsticas"})]})]}),u.jsxs("div",{className:"mt-auto pt-6 flex flex-col items-start px-2 gap-4 relative z-10 border-t border-gray-100",children:[u.jsxs("div",{className:"flex items-center gap-3 w-full bg-white/50 p-2 rounded-2xl border border-white/50 shadow-sm",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 overflow-hidden ring-2 ring-white shadow-sm flex-shrink-0",children:u.jsx("img",{src:(g==null?void 0:g.img_url)||`https://ui-avatars.com/api/?name=${(g==null?void 0:g.username)||"User"}&background=04a7bd&color=fff`,alt:"Profile",className:"w-full h-full object-cover"})}),u.jsxs("div",{className:"min-w-0 flex-1",children:[u.jsx("p",{className:"text-sm font-bold text-ios-text truncate leading-tight",children:(g==null?void 0:g.username)||"Carregando..."}),u.jsx("p",{className:"text-[10px] text-ios-secondary font-medium",children:"Conectado"})]})]}),u.jsxs("button",{onClick:l,className:"w-full text-left py-2 text-xs text-red-500 font-semibold hover:opacity-70 transition-opacity flex items-center justify-start gap-2",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),u.jsx("span",{children:"Encerrar Sesso"})]})]})]}),u.jsx("main",{className:`flex-1 overflow-hidden relative transition-all duration-500 flex flex-col ${h||m?"bg-white":"bg-ios-bg lg:rounded-ios"}`,children:u.jsxs("div",{className:`flex-1 overflow-y-auto custom-scrollbar ${h||m?"p-0":"p-4 pb-24 lg:p-10 lg:pb-10"}`,children:[h&&u.jsx("button",{onClick:()=>r("agenda"),className:"absolute top-6 left-6 z-50 p-3 bg-white/10 backdrop-blur-md text-white rounded-full hover:bg-white/20 transition-all border border-white/10 shadow-lg",title:"Sair do modo TV",children:u.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),i]})}),!h&&!m&&u.jsxs("nav",{className:"lg:hidden fixed bottom-0 left-0 right-0 bg-white/90 backdrop-blur-xl border-t border-gray-200 pb-safe pt-2 px-6 flex justify-around items-center z-40 pb-4",children:[u.jsxs("button",{onClick:()=>r("dashboard"),className:`flex flex-col items-center gap-1 p-2 transition-colors ${n==="dashboard"?"text-ios-primary":"text-gray-400"}`,children:[u.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),u.jsx("span",{className:"text-[10px] font-medium",children:"Incio"})]}),u.jsxs("button",{onClick:()=>r("agenda"),className:`flex flex-col items-center gap-1 p-2 transition-colors ${n==="agenda"?"text-ios-primary":"text-gray-400"}`,children:[u.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),u.jsx("span",{className:"text-[10px] font-medium",children:"Agenda"})]}),u.jsx("button",{onClick:()=>r("novo"),className:"flex flex-col items-center justify-center -mt-6",children:u.jsx("div",{className:"w-14 h-14 bg-gradient-to-tr from-ios-primary to-ios-secondary rounded-full shadow-lg shadow-ios-primary/30 flex items-center justify-center text-white transform active:scale-95 transition-transform",children:u.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})}),u.jsxs("button",{onClick:()=>r("chamada"),className:`flex flex-col items-center gap-1 p-2 transition-colors ${n==="chamada"?"text-ios-primary":"text-gray-400"}`,children:[u.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),u.jsx("span",{className:"text-[10px] font-medium",children:"Chamada"})]}),u.jsxs("button",{onClick:()=>r("stats"),className:`flex flex-col items-center gap-1 p-2 transition-colors ${n==="stats"?"text-ios-primary":"text-gray-400"}`,children:[u.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),u.jsx("span",{className:"text-[10px] font-medium",children:"Stats"})]})]})]})},lb=[{key:"consultorio",label:"Mdico"},{key:"salaexames",label:"Exames"},{key:"salacoleta",label:"Coleta"},{key:"audiometria",label:"Audio"},{key:"raiox",label:"Raio-X"}],Ym=()=>{const[i,n]=V.useState(!0),[r,l]=V.useState(""),[d,h]=V.useState({total:0,present:0,waiting:0}),[m,g]=V.useState([]);V.useEffect(()=>{p(),y()},[]);const y=async()=>{const{data:{user:S}}=await W.auth.getUser();if(S){const{data:A}=await W.from("users").select("username").eq("user_id",S.id).single();A&&l(A.username)}},p=async()=>{n(!0);const S=new Date().toISOString().split("T")[0],{data:A,error:D}=await W.from("agendamentos").select("compareceu, consultorio, salaexames, salacoleta, audiometria, raiox").eq("data_atendimento",S);if(D||!A){console.error("Error fetching dashboard data",D),n(!1);return}const Y=A,K=Y.length,H=Y.filter(X=>X.compareceu).length;let I=0;const ne=lb.map(X=>{const G=Y.filter(F=>F.compareceu&&(F[X.key]==="Aguardando"||F[X.key]==="atendido")).length;return G>I&&(I=G),{label:X.label,count:G}}).map(X=>({...X,height:I===0?0:X.count/I*100}));h({total:K,present:H,waiting:K-H}),g(ne),n(!1)},b=new Date().toLocaleDateString("pt-BR",{weekday:"long",day:"numeric",month:"long"}),j=d.total>0?Math.round(d.present/d.total*100):0,T=2*Math.PI*54,E=T-j/100*T;return i?u.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center space-y-4",children:[u.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-ios-primary"}),u.jsx("p",{className:"text-ios-subtext animate-pulse",children:"Carregando painel..."})]}):u.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[u.jsxs("div",{children:[u.jsxs("h1",{className:"text-4xl font-bold text-ios-text tracking-tight mb-2",children:["Bem vindo(a), ",r||"Usurio"," "]}),u.jsxs("p",{className:"text-lg text-ios-subtext font-medium",children:["Hoje  ",u.jsx("span",{className:"capitalize text-ios-text font-semibold",children:b}),".",u.jsx("br",{className:"hidden md:block"})," Aqui est um resumo da sua operao:"]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"bg-white rounded-[32px] p-8 shadow-sm border border-gray-100 relative overflow-hidden group hover:shadow-float transition-all duration-500",children:[u.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10 group-hover:opacity-20 transition-opacity",children:u.jsx("svg",{className:"w-32 h-32 text-ios-primary",fill:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{d:"M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.89-1.99 2L3 20a2 2 0 002 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zM9 14H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2zm-8 4H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2z"})})}),u.jsxs("div",{className:"relative z-10",children:[u.jsx("div",{className:"w-12 h-12 rounded-2xl bg-ios-primary/10 flex items-center justify-center text-ios-primary mb-6",children:u.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),u.jsx("h3",{className:"text-ios-subtext font-semibold text-sm uppercase tracking-wider mb-1",children:"Agendados Hoje"}),u.jsxs("div",{className:"flex items-baseline gap-2",children:[u.jsx("span",{className:"text-5xl font-bold text-ios-text tracking-tighter",children:d.total}),u.jsx("span",{className:"text-sm font-medium text-gray-400",children:"pacientes"})]}),u.jsx("div",{className:"mt-4 flex gap-2",children:u.jsxs("span",{className:"px-3 py-1 rounded-full bg-gray-50 text-xs font-bold text-gray-500 border border-gray-100",children:[d.waiting," aguardando"]})})]})]}),u.jsxs("div",{className:"bg-white rounded-[32px] p-8 shadow-sm border border-gray-100 flex items-center justify-between hover:shadow-float transition-all duration-500",children:[u.jsxs("div",{className:"flex flex-col justify-center h-full",children:[u.jsx("div",{className:"w-12 h-12 rounded-2xl bg-green-100 flex items-center justify-center text-green-600 mb-4",children:u.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-ios-subtext font-semibold text-sm uppercase tracking-wider mb-1",children:"Taxa de Presena"}),u.jsxs("div",{className:"flex items-baseline gap-2",children:[u.jsx("span",{className:"text-5xl font-bold text-ios-text tracking-tighter",children:d.present}),u.jsxs("span",{className:"text-sm font-medium text-gray-400",children:["/ ",d.total]})]}),u.jsx("p",{className:"text-xs text-gray-400 font-medium mt-2",children:"Colaboradores presentes"})]})]}),u.jsxs("div",{className:"relative w-32 h-32 flex-shrink-0 ml-4",children:[u.jsxs("svg",{className:"w-full h-full transform -rotate-90",viewBox:"0 0 128 128",children:[u.jsx("circle",{cx:"64",cy:"64",r:"54",stroke:"currentColor",strokeWidth:"10",fill:"transparent",className:"text-gray-100"}),u.jsx("circle",{cx:"64",cy:"64",r:"54",stroke:"currentColor",strokeWidth:"10",fill:"transparent",strokeDasharray:T,strokeDashoffset:E,className:"text-green-500 transition-all duration-1000 ease-out",strokeLinecap:"round"})]}),u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsxs("span",{className:"text-2xl font-black text-gray-800 tracking-tight leading-none",children:[j,"%"]})})]})]})]}),u.jsxs("div",{className:"bg-white rounded-[32px] p-8 shadow-sm border border-gray-100 flex flex-col hover:shadow-float transition-all duration-500",children:[u.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsx("div",{className:"w-10 h-10 rounded-xl bg-ios-secondary/10 flex items-center justify-center text-ios-secondary",children:u.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),u.jsx("h3",{className:"text-ios-subtext font-semibold text-sm uppercase tracking-wider",children:"Ocupao em Tempo Real"})]}),u.jsx("p",{className:"text-ios-text font-bold text-2xl",children:"Colaboradores na Clnica"})]}),u.jsx("div",{className:"text-right hidden sm:block",children:u.jsxs("span",{className:"text-sm font-medium text-green-500 flex items-center gap-1 justify-end",children:[u.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),"Atualizado agora"]})})]}),u.jsx("div",{className:"flex-1 flex items-end justify-between gap-4 h-48 pt-4 pb-2 border-b border-gray-50",children:m.map((S,A)=>u.jsxs("div",{className:"flex flex-col items-center gap-3 flex-1 group h-full justify-end",children:[u.jsx("div",{className:"w-full max-w-[80px] bg-gray-50 rounded-2xl relative flex items-end overflow-hidden h-full group-hover:bg-gray-100 transition-colors",children:u.jsx("div",{style:{height:`${S.height}%`},className:"w-full bg-gradient-to-t from-ios-primary to-ios-secondary rounded-2xl transition-all duration-1000 ease-out relative shadow-lg shadow-ios-primary/20",children:u.jsxs("div",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 text-sm font-bold text-ios-text bg-white px-2 py-0.5 rounded-lg shadow-sm border border-gray-100 opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10",children:[S.count," pessoas"]})})}),u.jsx("span",{className:"text-xs md:text-sm font-bold text-gray-500",children:S.label})]},A))}),u.jsx("div",{className:"mt-4 text-center text-xs text-gray-400 font-medium",children:'Quantidade de colaboradores com status "Aguardando" ou "Atendido" por setor.'})]})]})},Km=[{idx:0,id:447,nome:"Avaliao Clnica"},{idx:1,id:448,nome:"Audiometria"},{idx:2,id:449,nome:"Acuidade Visual"},{idx:3,id:450,nome:"Espirometria"},{idx:4,id:451,nome:"Eletrocardiograma"},{idx:5,id:452,nome:"Eletroencefalograma"},{idx:6,id:453,nome:"Raio-X Trax PA OIT"},{idx:7,id:454,nome:"Raio-X Coluna L-Sacra"},{idx:8,id:455,nome:"Raio-X Mos e Braos"},{idx:9,id:456,nome:"Raio-X Punho"},{idx:10,id:457,nome:"Hemograma Completo"},{idx:11,id:458,nome:"Glicemia em Jejum"},{idx:12,id:459,nome:"EPF (parasitolgico fezes)"},{idx:13,id:460,nome:"EAS (urina)"},{idx:14,id:461,nome:"Grupo Sanguneo + Fator RH"},{idx:15,id:462,nome:"Gama GT"},{idx:16,id:463,nome:"TGO / TGP"},{idx:17,id:464,nome:"cido Trans. Muconico"},{idx:18,id:465,nome:"cido rico"},{idx:19,id:466,nome:"cido Hipr. (Tolueno urina)"},{idx:20,id:467,nome:"cido Metil Hiprico"},{idx:21,id:468,nome:"cido Mandlico"},{idx:22,id:469,nome:"ALA-U"},{idx:23,id:470,nome:"Hemoglobina glicada"},{idx:24,id:471,nome:"Coprocultura"},{idx:25,id:472,nome:"Colesterol T e F"},{idx:26,id:473,nome:"Chumbo Srico"},{idx:27,id:474,nome:"Creatinina"},{idx:28,id:475,nome:"Ferro Srico"},{idx:29,id:476,nome:"Mangans Urinrio"},{idx:30,id:477,nome:"Mangans Sanguneo"},{idx:31,id:478,nome:"Reticulcitos"},{idx:32,id:479,nome:"Triglicerdeos"},{idx:33,id:480,nome:"IGE Especfica - Abelha"},{idx:34,id:481,nome:"Acetona Urinria"},{idx:35,id:482,nome:"Anti HAV"},{idx:36,id:483,nome:"Anti HBS"},{idx:37,id:484,nome:"Anti HBSAG"},{idx:38,id:485,nome:"Anti HCV"},{idx:39,id:486,nome:"Carboxihemoglobina"},{idx:40,id:487,nome:"Exame Toxicolgico Pelo"},{idx:41,id:488,nome:"Avaliao Vocal"},{idx:42,id:489,nome:"Avaliao Psicossocial"},{idx:43,id:490,nome:"Avaliao Psicolgica"},{idx:44,id:491,nome:"Aspecto da Pele"},{idx:45,id:492,nome:"Questionrio Epilepsia"},{idx:46,id:493,nome:"Teste Palogrfico"},{idx:47,id:494,nome:"Teste de Ateno"},{idx:48,id:495,nome:"Teste Romberg"},{idx:49,id:496,nome:"Exame Toxicolgico Urina"},{idx:50,id:497,nome:"Higidez"},{idx:51,id:498,nome:"Grupo Sanguneo"}],Im=({onNewAppointment:i,onEditAppointment:n,onGenerateAso:r})=>{var ht,Wt,Ha,ka;const[l,d]=V.useState([]),[h,m]=V.useState(!0),[g,y]=V.useState(new Date().toISOString().split("T")[0]),[p,b]=V.useState("day"),[j,T]=V.useState(!1),E=V.useRef(null),[S,A]=V.useState(""),[D,Y]=V.useState(!1),[K,H]=V.useState(!1),[I,le]=V.useState(new Date().toISOString().split("T")[0]),[ne,X]=V.useState(new Date().toISOString().split("T")[0]),[G,F]=V.useState(!1),[Se,ge]=V.useState(!0),de=V.useRef(null),we=V.useRef(null),Ee=V.useRef(null),[Ne,U]=V.useState(null),[Q,ae]=V.useState(!1),[ue,ve]=V.useState(null),[w,B]=V.useState(!1);V.useEffect(()=>{const M=setTimeout(()=>{S.trim()?je():(Y(!1),te())},500);return()=>clearTimeout(M)},[g,S,p,j]);const P=()=>{const M=new Date(g+"T00:00:00");let he=g,ie=g;if(p==="week"){const be=M.getDay(),Ae=M.getDate()-be,Te=new Date(M);Te.setDate(Ae);const J=new Date(Te);J.setDate(Te.getDate()+6),he=Te.toISOString().split("T")[0],ie=J.toISOString().split("T")[0]}else if(p==="month"){const be=new Date(M.getFullYear(),M.getMonth(),1),Ae=new Date(M.getFullYear(),M.getMonth()+1,0);he=be.toISOString().split("T")[0],ie=Ae.toISOString().split("T")[0]}return{start:he,end:ie}},te=async()=>{if(S.trim())return;m(!0);const{start:M,end:he}=P();let ie=W.from("agendamentos").select(`
        *,
        colaboradores:colaboradores!agendamentos_colaborador_id_fkey (id, nome, cpf, data_nascimento, sexo, cargos(nome), setor),
        unidades:unidades!agendamentos_unidade_fkey (id, nome_unidade),
        prontuarios:prontuarios_agendamentos!prontuarios_agendamentos_agendamento_id_fkey(*)
      `).gte("data_atendimento",M).lte("data_atendimento",he);j&&(ie=ie.or("compareceu.eq.false,compareceu.is.null")),ie=ie.order("data_atendimento",{ascending:!0}).order("prioridade",{ascending:!1,nullsFirst:!1}).order("id",{ascending:!1});const{data:be,error:Ae}=await ie;Ae?console.error("Error fetching agenda:",JSON.stringify(Ae,null,2)):d(be),m(!1)},je=async()=>{m(!0),Y(!0);const{data:M,error:he}=await W.from("agendamentos").select(`
        *,
        colaboradores:colaboradores!agendamentos_colaborador_id_fkey!inner (id, nome, cpf, data_nascimento, sexo, cargos(nome), setor),
        unidades:unidades!agendamentos_unidade_fkey (id, nome_unidade),
        prontuarios:prontuarios_agendamentos!prontuarios_agendamentos_agendamento_id_fkey(*)
      `).ilike("colaboradores.nome",`%${S}%`).order("prioridade",{ascending:!1,nullsFirst:!1}).order("data_atendimento",{ascending:!1}).limit(50);he?console.error("Error searching:",he):d(M),m(!1)},Ce=async(M,he)=>{var xe,Et;const ie=l.find(ot=>ot.id===M);if(!ie)return;const be=!he,Ae=new Date,Te=ot=>ot.toString().padStart(2,"0"),J=`${Te(Ae.getHours())}:${Te(Ae.getMinutes())}:${Te(Ae.getSeconds())}`,_e=be?J:null;d(ot=>ot.map(rt=>rt.id===M?{...rt,compareceu:be,chegou_em:_e}:rt));try{const{error:ot}=await W.from("agendamentos").update({compareceu:be,chegou_em:_e}).eq("id",M);if(ot)throw ot;if(be&&ie.unidade){const{data:rt}=await W.from("unidades").select("empresaid").eq("id",ie.unidade).single();if(rt&&rt.empresaid){let He=0,De="Pendente",st=0;const et={},{data:ua}=await W.from("clientes").select("envia_esoc, valor_esoc").eq("id",rt.empresaid).single();if(ua&&ua.envia_esoc&&(st=Number(ua.valor_esoc||0)*2,st>0&&(et[1]=(et[1]||0)+st)),((xe=ie.unidades)==null?void 0:xe.nome_unidade)==="Prefeitura/ Estado"&&ie.valor&&Number(ie.valor)>0&&(et[20]=(et[20]||0)+Number(ie.valor),He=Number(ie.valor),De="pago"),ie.exames_snapshot&&ie.exames_snapshot.length>0){const{data:Nt}=await W.from("preco_exames").select("nome, preco").eq("empresaId",rt.empresaid);Nt&&Nt.length>0&&ie.exames_snapshot.forEach(Yt=>{const Ht=Nt.find(Tt=>Tt.nome&&Tt.nome.toLowerCase().trim()===Yt.toLowerCase().trim());if(Ht&&Ht.preco){const Tt=Number(Ht.preco);He+=Tt;const Pe=Yt.toLowerCase();let We=0;Pe.includes("avaliao clnica")||Pe.includes("avaliacao clinica")?We=25:Pe.includes("audiometria")?We=12:Pe.includes("raio-x")||Pe.includes("raio x")?We=13:Pe.includes("eletrocardiograma")?We=15:Pe.includes("eletroencefalograma")?We=16:Pe.includes("acuidade visual")?We=17:Pe.includes("psicossocial")||Pe.includes("psicolgica")?We=18:Pe.includes("toxicolgico")?We=19:Pe.includes("espirometria")?We=21:["hemograma","glicemia","sanguneo","colesterol","gama gt","tgo","tgp","cido","creatinina","ferro","mangans","reticulcitos","triglicerdeos","anti ","chumbo","carboxihemoglobina","eas","epf","coprocultura","acetona"].some(ft=>Pe.includes(ft))&&(We=14),We>0&&(et[We]=(et[We]||0)+Tt)}})}He===0&&ie.valor&&Number(ie.valor)>0&&(He=Number(ie.valor),De="pago");const dn=He+st;let _a=[];const Ft=ie.exames_snapshot;if(Array.isArray(Ft))_a=Ft;else if(typeof Ft=="string"&&Ft.trim().startsWith("["))try{const Nt=JSON.parse(Ft);_a=Array.isArray(Nt)?Nt:[]}catch{_a=[]}await W.from("financeiro_receitas").insert({contratante:rt.empresaid,unidade_contratante:ie.unidade,valor_med:He,valor_total:dn,valor_esoc:st,status:De,data_executada:new Date().toISOString(),data_projetada:new Date(ie.data_atendimento).toISOString(),descricao:`Atendimento - ${((Et=ie.colaboradores)==null?void 0:Et.nome)||"Desconhecido"}`,empresa_resp:"Gama medicina",exames_snapshot:_a});const Vt=new Date,In=new Date(Vt.getFullYear(),Vt.getMonth(),1).toISOString(),$a=new Date(Vt.getFullYear(),Vt.getMonth()+1,0);$a.setHours(23,59,59,999);const Ga=$a.toISOString();for(const[Nt,Yt]of Object.entries(et)){const Ht=Number(Nt),{data:Tt}=await W.from("gerencia_meta").select("id, faturamento").eq("gerencia",Ht).gte("created_at",In).lte("created_at",Ga).maybeSingle();Tt?await W.from("gerencia_meta").update({faturamento:Number(Tt.faturamento)+Number(Yt)}).eq("id",Tt.id):await W.from("gerencia_meta").insert({gerencia:Ht,faturamento:Number(Yt)})}}}}catch(ot){console.error("Error updating status/financial:",JSON.stringify(ot,null,2)),d(rt=>rt.map(He=>He.id===M?{...He,compareceu:ie.compareceu,chegou_em:ie.chegou_em}:He)),alert(`Erro ao atualizar status: ${ot.message}`)}},Me=async(M,he)=>{const ie=l.find(Ae=>Ae.id===M);if(!ie)return;const be=!he;d(Ae=>Ae.map(Te=>Te.id===M?{...Te,aso_feito:be}:Te));try{const{error:Ae}=await W.from("agendamentos").update({aso_feito:be}).eq("id",M);if(Ae)throw Ae}catch{d(Te=>Te.map(J=>J.id===M?{...J,aso_feito:ie.aso_feito}:J))}},jt=async(M,he)=>{const ie=l.find(be=>be.id===M);d(be=>be.map(Ae=>Ae.id===M?{...Ae,aso_liberado:he||null}:Ae));try{const{error:be}=await W.from("agendamentos").update({aso_liberado:he||null}).eq("id",M);if(be)throw be}catch{ie&&d(Ae=>Ae.map(Te=>Te.id===M?{...Te,aso_liberado:ie.aso_liberado}:Te))}},Ze=M=>{M?window.open(M,"_blank"):alert("Ficha no disponvel.")},La=M=>{ve(M.id),B(!0)},Ca=M=>{U(M),de.current&&(de.current.value="",de.current.click())},Yn=async M=>{var ie;const he=(ie=M.target.files)==null?void 0:ie[0];if(!(!he||!Ne)){ae(!0);try{const be=new Date().getTime(),Ae=`aso_${Ne}_${be}.pdf`,{error:Te}=await W.storage.from("asos").upload(Ae,he);if(Te)throw Te;const{data:{publicUrl:J}}=W.storage.from("asos").getPublicUrl(Ae),{error:_e}=await W.from("agendamentos").update({aso_url:J}).eq("id",Ne);if(_e)throw _e;d(xe=>xe.map(Et=>Et.id===Ne?{...Et,aso_url:J}:Et)),alert("ASO enviado com sucesso!")}catch(be){console.error("Upload error:",be),alert(`Erro ao enviar ASO: ${be.message}`)}finally{ae(!1),U(null)}}},Kn=()=>{we.current&&(we.current.value="",we.current.click())},vt=async M=>{const he=M.target.files;if(!he||he.length===0||!ue)return;ae(!0);let ie=0;try{const be=Array.from(he);for(const Ae of be){const Te=new Date().getTime(),J=Ae.name;let _e="esoc",xe="Indefinido";J.includes("2240")?(_e="esoc/2240",xe="2240"):J.includes("2220")&&(_e="esoc/2220",xe="2220");const Et=`${_e}/${ue}_${Te}_${J}`,{error:ot}=await W.storage.from("documents").upload(Et,Ae);if(ot)throw ot;const{data:{publicUrl:rt}}=W.storage.from("documents").getPublicUrl(Et),{error:He}=await W.from("esoc_agendamentos").insert({agendamento_id:ue,evento:xe,url:rt});if(He)throw He;ie++}alert(`${ie} arquivo(s) do E-social enviado(s) com sucesso!`),w||ve(null)}catch(be){console.error("Esoc Upload error:",be),alert(`Erro ao enviar arquivos: ${be.message}`)}finally{ae(!1),we.current&&(we.current.value="")}},xa=()=>{Ee.current&&(Ee.current.value="",Ee.current.click())},un=async M=>{const he=M.target.files;if(!he||he.length===0||!ue)return;ae(!0);let ie=0;const be=[];try{const Ae=Array.from(he);for(const Te of Ae){const J=Te.name.toUpperCase();let _e="outros",xe="Outros";J.startsWith("ACU")?(_e="acuidade",xe="Acuidade"):J.startsWith("AUDIO")?(_e="audio",xe="Audiometria"):J.startsWith("ECG")?(_e="ecg",xe="Eletrocardiograma"):J.startsWith("EEG")?(_e="eeg",xe="Eletroencefalograma"):J.startsWith("ESP")?(_e="espiro",xe="Espirometria"):J.startsWith("LAB")?(_e="lab",xe="Laboratorio"):J.startsWith("PSICO")?(_e="psico",xe="Psicossocial"):J.startsWith("RX")&&(_e="rx",xe="Raio X");const Et=new Date().getTime(),ot=Te.name.replace(/[^a-zA-Z0-9.-]/g,"_"),rt=`${_e}/${ue}_${Et}_${ot}`,{error:He}=await W.storage.from("prontuarios").upload(rt,Te);if(He)throw He;const{data:{publicUrl:De}}=W.storage.from("prontuarios").getPublicUrl(rt),{data:st,error:et}=await W.from("prontuarios_agendamentos").insert({agendamento_id:ue,tipo:xe,url:De}).select().single();if(et)throw et;st&&be.push(st),ie++}alert(`${ie} pronturio(s) enviado(s) com sucesso!`),be.length>0&&d(Te=>Te.map(J=>J.id===ue?{...J,prontuarios:[...J.prontuarios||[],...be]}:J)),w||ve(null)}catch(Ae){console.error("Prontuario Upload error:",Ae),alert(`Erro ao enviar arquivos: ${Ae.message}`)}finally{ae(!1),Ee.current&&(Ee.current.value="")}},di=async()=>{F(!0);try{let he=[],ie=0,be=!0;for(;be;){let De=W.from("agendamentos").select(`
                    *,
                    colaboradores:colaboradores!agendamentos_colaborador_id_fkey (id, nome, cpf, data_nascimento, sector:setor, cargos(nome)),
                    unidades:unidades!agendamentos_unidade_fkey (id, nome_unidade)
                `).gte("data_atendimento",I).lte("data_atendimento",ne).order("data_atendimento",{ascending:!0});Se||(De=De.eq("compareceu",!0));const{data:st,error:et}=await De.range(ie,ie+500-1);if(et)throw et;st&&st.length>0?(he=[...he,...st],st.length<500?be=!1:ie+=500):be=!1}if(he.length===0){alert("Nenhum dado encontrado no perodo selecionado."),F(!1);return}const Ae=he,Te=`
            <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
            <head>
                <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
                <!--[if gte mso 9]>
                <xml>
                <x:ExcelWorkbook>
                <x:ExcelWorksheets>
                <x:ExcelWorksheet>
                <x:Name>Agendamentos</x:Name>
                <x:WorksheetOptions>
                <x:DisplayGridlines/>
                </x:WorksheetOptions>
                </x:ExcelWorksheet>
                </x:ExcelWorksheets>
                </x:ExcelWorkbook>
                </xml>
                <![endif]-->
            </head>
            <body>
        `;let J='<table border="1"><thead><tr>';const _e='style="background-color:#70AD47; color:white; font-weight:bold; text-align:center;"',xe='style="background-color:#4472C4; color:white; font-weight:bold; text-align:center;"';J+=`<th ${_e}>Nome</th>`,J+=`<th ${_e}>Data Atendimento</th>`,J+=`<th ${_e}>Status</th>`,J+=`<th ${_e}>Cargo</th>`,J+=`<th ${_e}>Setor</th>`,J+=`<th ${_e}>Tipo de Exame</th>`,J+=`<th ${_e}>Unidade</th>`,J+=`<th ${_e}>Valor</th>`,J+=`<th ${_e}>Data Nascimento</th>`,J+=`<th ${_e}>CPF</th>`,J+=`<th ${_e}>Data de liberao</th>`,J+=`<th ${_e}>Observaes</th>`,Km.forEach(De=>{J+=`<th ${xe}>${De.nome}</th>`}),J+="</tr></thead><tbody>",Ae.forEach(De=>{var Yt,Ht,Tt,Pe,We,lt,ft;const st=((Yt=De.colaboradores)==null?void 0:Yt.nome)||"N/A",et=De.data_atendimento?new Date(De.data_atendimento).toLocaleDateString("pt-BR",{timeZone:"UTC"}):"",ua=((Tt=(Ht=De.colaboradores)==null?void 0:Ht.cargos)==null?void 0:Tt.nome)||"N/A",da=((Pe=De.colaboradores)==null?void 0:Pe.sector)||"N/A",dn=((We=De.unidades)==null?void 0:We.nome_unidade)||"Avulso",_a=(lt=De.colaboradores)!=null&&lt.data_nascimento?new Date(De.colaboradores.data_nascimento).toLocaleDateString("pt-BR",{timeZone:"UTC"}):"",Ft=((ft=De.colaboradores)==null?void 0:ft.cpf)||"",Vt=De.aso_liberado?new Date(De.aso_liberado).toLocaleDateString("pt-BR",{timeZone:"UTC"}):"",In=De.obs_agendamento||"",$a=De.tipo||"",Ga=De.valor?De.valor.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}):"";let Nt="Pendente";De.compareceu===!0?Nt="Compareceu":De.compareceu===!1&&(Nt="Faltou"),J+="<tr>",J+=`<td>${st}</td>`,J+=`<td>${et}</td>`,J+=`<td>${Nt}</td>`,J+=`<td>${ua}</td>`,J+=`<td>${da}</td>`,J+=`<td>${$a}</td>`,J+=`<td>${dn}</td>`,J+=`<td>${Ga}</td>`,J+=`<td>${_a}</td>`,J+=`<td style="mso-number-format:'\\@'">${Ft}</td>`,J+=`<td>${Vt}</td>`,J+=`<td>${In}</td>`,Km.forEach(Ra=>{const Xn=De.exames_snapshot&&De.exames_snapshot.includes(Ra.nome);J+=`<td style="text-align:center; vertical-align:middle;">${Xn?"X":""}</td>`}),J+="</tr>"}),J+="</tbody></table></body></html>";const Et=Te+J,ot=new Blob([Et],{type:"application/vnd.ms-excel"}),rt=window.URL.createObjectURL(ot),He=document.createElement("a");He.href=rt,He.download=`agendamentos_${I}_${ne}.xls`,document.body.appendChild(He),He.click(),document.body.removeChild(He),window.URL.revokeObjectURL(rt),H(!1)}catch(M){alert(`Erro na exportao: ${M.message}`)}finally{F(!1)}},wa=M=>{const he=new Date(g+"T00:00:00"),ie=M==="next"?1:-1;p==="day"?he.setDate(he.getDate()+ie):p==="week"?he.setDate(he.getDate()+ie*7):p==="month"&&he.setMonth(he.getMonth()+ie),y(he.toISOString().split("T")[0]),A("")},Ba=()=>{y(new Date().toISOString().split("T")[0]),A("")},ca=()=>{if(E.current)if("showPicker"in E.current)try{E.current.showPicker()}catch{E.current.click()}else E.current.click()},qa=M=>{const he=new Date(M+"T00:00:00");return p==="month"?he.toLocaleDateString("pt-BR",{month:"long",year:"numeric"}):he.toLocaleDateString("pt-BR",{weekday:"long",day:"numeric",month:"long"})},bs=M=>M?new Date(M+"T00:00:00").toLocaleDateString("pt-BR"):"",xs=g===new Date().toISOString().split("T")[0];return u.jsxs("div",{className:"space-y-6",children:[u.jsx("input",{type:"file",ref:de,className:"hidden",accept:"application/pdf",onChange:Yn}),u.jsx("input",{type:"file",ref:we,className:"hidden",multiple:!0,onChange:vt}),u.jsx("input",{type:"file",ref:Ee,className:"hidden",multiple:!0,onChange:un}),u.jsx("div",{className:"flex flex-col gap-6",children:u.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-end justify-between gap-6",children:[u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsx("h2",{className:"text-3xl font-bold text-ios-text tracking-tight",children:"Agenda"}),!D&&u.jsxs("div",{className:"flex flex-wrap items-center gap-4 animate-in fade-in",children:[u.jsx("div",{className:"bg-gray-100 p-1 rounded-xl flex items-center shadow-inner",children:["day","week","month"].map(M=>u.jsx("button",{onClick:()=>b(M),className:`px-4 py-1.5 rounded-lg text-sm font-semibold transition-all ${p===M?"bg-white text-ios-text shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:M==="day"?"Dia":M==="week"?"Semana":"Ms"},M))}),u.jsxs("div",{className:"inline-flex items-center bg-white rounded-full p-1.5 shadow-sm border border-gray-100 gap-2",children:[u.jsx("button",{onClick:()=>wa("prev"),className:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-gray-100 text-gray-500 hover:text-ios-primary transition-colors",children:u.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),u.jsxs("div",{onClick:ca,className:"relative group px-4 py-1.5 cursor-pointer hover:bg-gray-50 rounded-xl transition-colors min-w-[140px] text-center",children:[u.jsx("input",{ref:E,type:"date",value:g,onChange:M=>y(M.target.value),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer -z-10"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-0.5",children:new Date(g+"T00:00:00").getFullYear()}),u.jsx("div",{className:"flex items-center justify-center gap-2",children:u.jsx("p",{className:"text-sm font-bold text-ios-text capitalize whitespace-nowrap",children:qa(g)})})]})]}),u.jsx("button",{onClick:()=>wa("next"),className:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-gray-100 text-gray-500 hover:text-ios-primary transition-colors",children:u.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),!xs&&u.jsx("button",{onClick:Ba,className:"text-sm font-medium text-ios-primary hover:underline",children:"Hoje"})]}),D&&u.jsx("div",{className:"flex items-center gap-2 h-14 animate-in fade-in",children:u.jsx("span",{className:"text-lg font-semibold text-gray-400",children:"Resultados da pesquisa"})})]}),u.jsxs("div",{className:"flex flex-col lg:flex-row items-stretch lg:items-center gap-3 w-full xl:w-auto",children:[u.jsxs("div",{className:"bg-gray-100 p-1 rounded-xl flex items-center shadow-inner h-12",children:[u.jsx("button",{onClick:()=>T(!1),className:`h-full px-5 rounded-lg text-xs font-bold uppercase tracking-wider transition-all flex items-center justify-center gap-2 ${j?"text-gray-400 hover:text-gray-600":"bg-white text-ios-text shadow-sm"}`,children:"Todos"}),u.jsxs("button",{onClick:()=>T(!0),className:`h-full px-5 rounded-lg text-xs font-bold uppercase tracking-wider transition-all flex items-center justify-center gap-2 ${j?"bg-white text-orange-500 shadow-sm":"text-gray-400 hover:text-gray-600"}`,children:[u.jsx("span",{className:`w-2 h-2 rounded-full ${j?"bg-orange-500":"bg-gray-300"}`}),"Pendentes"]})]}),u.jsxs("div",{className:"relative group w-full lg:w-64 transition-all focus-within:w-full lg:focus-within:w-80",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx("svg",{className:"h-5 w-5 text-gray-400 group-focus-within:text-ios-primary transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),u.jsx("input",{type:"text",value:S,onChange:M=>A(M.target.value),placeholder:"Pesquisar...",className:"w-full h-12 pl-10 pr-10 rounded-full bg-white border border-gray-100 focus:border-ios-primary focus:ring-4 focus:ring-ios-primary/10 outline-none transition-all shadow-sm placeholder-gray-400 text-sm font-medium"}),S&&u.jsx("button",{onClick:()=>{A(""),Y(!1)},className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:u.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("button",{onClick:()=>H(!0),className:"bg-white text-ios-text border border-gray-200 hover:bg-gray-50 px-6 py-2.5 rounded-full shadow-sm transition-all font-semibold text-sm flex items-center justify-center gap-2 whitespace-nowrap",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Exportar Excel"]}),u.jsxs("button",{onClick:i,className:"bg-gradient-to-r from-ios-primary to-ios-secondary text-white px-6 py-2.5 rounded-full shadow-lg shadow-ios-primary/30 hover:shadow-ios-primary/50 transition-all font-semibold text-sm flex items-center justify-center gap-2 active:scale-95 transform whitespace-nowrap",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Novo"]})]})]})]})}),h?u.jsxs("div",{className:"w-full h-64 flex flex-col items-center justify-center text-ios-subtext",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-ios-primary mb-2"}),D?"Pesquisando...":"Carregando agenda..."]}):l.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center py-24 bg-white rounded-ios border border-gray-100 text-center shadow-sm animate-in fade-in zoom-in duration-300",children:[u.jsx("div",{className:"w-20 h-20 bg-gray-50 rounded-full flex items-center justify-center text-4xl mb-6 shadow-inner text-gray-300",children:D?"":""}),u.jsx("h3",{className:"text-xl font-bold text-ios-text",children:D?"Nenhum resultado":"Tudo livre por aqui"}),u.jsx("p",{className:"text-ios-subtext mt-2",children:D?`No encontramos ningum com "${S}"`:j?"Todos os pacientes j foram atendidos!":"Nenhum agendamento encontrado para este perodo."}),!D&&u.jsx("button",{onClick:i,className:"mt-6 text-ios-primary font-semibold hover:underline",children:"Agendar agora"})]}):u.jsx("div",{className:"grid gap-4 animate-in slide-in-from-bottom-4 duration-500",children:l.map(M=>{var he,ie,be,Ae,Te,J,_e;return u.jsxs("div",{className:`group bg-white hover:bg-ios-cardHover p-5 rounded-ios-sm shadow-sm hover:shadow-md border transition-all duration-300 flex flex-col md:flex-row md:items-center justify-between gap-4 ${M.prioridade?"border-l-4 border-l-red-500 border-t-gray-100 border-r-gray-100 border-b-gray-100":"border-gray-100"}`,children:[u.jsxs("div",{className:"flex items-center gap-5 flex-1 cursor-pointer",onClick:()=>n(M),title:"Clique para editar detalhes",children:[u.jsx("div",{className:`w-14 h-14 rounded-2xl flex-shrink-0 flex items-center justify-center text-xl font-bold shadow-sm transition-colors ${M.compareceu?"bg-green-100 text-green-600":"bg-gray-100 text-gray-400"}`,children:((ie=(he=M.colaboradores)==null?void 0:he.nome)==null?void 0:ie.charAt(0))||"?"}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("h4",{className:"font-bold text-lg text-ios-text leading-tight group-hover:text-ios-primary transition-colors",children:((be=M.colaboradores)==null?void 0:be.nome)||"Desconhecido"}),M.prioridade&&u.jsx("span",{className:"bg-red-50 text-red-600 text-[10px] font-bold uppercase tracking-wider px-2 py-0.5 rounded-full border border-red-100",children:"Prioridade"}),M.enviado_empresa&&u.jsxs("span",{className:"bg-indigo-50 text-indigo-600 text-[10px] font-bold uppercase tracking-wider px-2 py-0.5 rounded-full border border-indigo-100 flex items-center gap-1",children:[u.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Agendado via sistema"]})]}),u.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-1",children:[u.jsxs("span",{className:"text-[10px] font-bold uppercase tracking-wide px-2 py-0.5 rounded-md bg-gray-100 text-gray-600 flex items-center gap-1",children:[" ",bs(M.data_atendimento)]}),u.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wide px-2 py-0.5 rounded-md bg-ios-primary/10 text-ios-primary",children:((Ae=M.unidades)==null?void 0:Ae.nome_unidade)||"N/A"}),((J=(Te=M.colaboradores)==null?void 0:Te.cargos)==null?void 0:J.nome)&&u.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wide px-2 py-0.5 rounded-md bg-gray-100 text-gray-600 truncate max-w-[150px]",children:M.colaboradores.cargos.nome}),u.jsx("span",{className:"hidden md:inline text-xs text-ios-subtext",children:""}),u.jsx("span",{className:"text-xs text-ios-subtext font-medium",children:M.tipo||"Geral"})]}),u.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-1",children:[M.obs_agendamento&&u.jsxs("div",{className:"inline-flex items-center gap-1 text-xs text-yellow-600 bg-yellow-50 px-2 py-1 rounded-md border border-yellow-100 max-w-full md:max-w-xs truncate",title:M.obs_agendamento,children:[u.jsx("svg",{className:"w-3 h-3 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),u.jsx("span",{className:"truncate font-medium",children:M.obs_agendamento})]}),((_e=M.unidades)==null?void 0:_e.nome_unidade)==="Prefeitura/ Estado"&&M.valor&&u.jsxs("div",{className:"inline-flex items-center gap-1 text-xs text-blue-700 bg-blue-50 px-2 py-1 rounded-md border border-blue-100",children:[u.jsxs("span",{className:"font-bold",children:["R$ ",Number(M.valor).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),M.metodo_pagamento&&u.jsx("span",{className:"text-blue-500 border-l border-blue-200 pl-1 ml-1 text-[10px] uppercase font-bold",children:M.metodo_pagamento})]})]})]})]}),u.jsxs("div",{className:"flex items-center justify-between md:justify-end gap-4 md:gap-6 border-t md:border-t-0 border-gray-50 pt-4 md:pt-0 flex-wrap",children:[u.jsxs("div",{className:"flex flex-col items-center gap-1.5",children:[u.jsx("span",{className:"text-[10px] uppercase font-bold text-gray-300 tracking-wider",children:"ASO"}),u.jsx("button",{onClick:xe=>{xe.stopPropagation(),Me(M.id,M.aso_feito)},className:`w-8 h-8 rounded-full shadow-inner transition-all duration-500 relative flex items-center justify-center ${M.aso_feito?"bg-green-500 shadow-green-200":"bg-red-500 shadow-red-200"} hover:scale-105 active:scale-95`,title:M.aso_feito?"ASO Feito":"ASO Pendente",children:M.aso_feito?u.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}):u.jsx("div",{className:"w-2 h-2 bg-white rounded-full opacity-50"})})]}),u.jsxs("div",{className:"flex flex-col items-center gap-1.5",children:[u.jsx("span",{className:"text-[10px] uppercase font-bold text-gray-300 tracking-wider",children:"Status"}),u.jsx("button",{onClick:xe=>{xe.stopPropagation(),Ce(M.id,M.compareceu)},className:`w-8 h-8 rounded-full shadow-inner transition-all duration-500 relative flex items-center justify-center ${M.compareceu?"bg-green-500 shadow-green-200":"bg-red-500 shadow-red-200"} hover:scale-105 active:scale-95`,title:M.compareceu?"Presente":"Ausente",children:M.compareceu?u.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}):u.jsx("div",{className:"w-2 h-2 bg-white rounded-full opacity-50"})})]}),u.jsx("div",{className:"hidden md:block h-10 w-px bg-gray-100"}),u.jsxs("div",{className:"flex flex-col items-center gap-1.5",onClick:xe=>xe.stopPropagation(),children:[u.jsx("span",{className:"text-[10px] uppercase font-bold text-gray-300 tracking-wider",children:"Liberado em"}),u.jsxs("div",{className:"flex items-center gap-2 relative",children:[u.jsx("input",{type:"date",value:M.aso_liberado||"",onChange:xe=>jt(M.id,xe.target.value),className:`h-8 w-28 text-xs font-bold rounded-lg border px-2 outline-none transition-all ${M.aso_liberado?"bg-white border-gray-200 text-gray-800 shadow-sm":"bg-gray-50 border-transparent text-gray-400"}`}),u.jsx("button",{onClick:()=>ve(M.id),className:`w-8 h-8 rounded-lg flex items-center justify-center transition-all ${M.aso_url?"bg-blue-100 text-blue-600 hover:bg-blue-200":"bg-gray-100 text-gray-400 hover:bg-gray-200"}`,title:M.aso_url?"Substituir ASO":"Enviar ASO",disabled:Q&&Ne===M.id,children:Q&&Ne===M.id?u.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-blue-500 border-t-transparent rounded-full"}):u.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),u.jsx("button",{onClick:()=>La(M),className:`w-8 h-8 rounded-lg flex items-center justify-center transition-all border ${M.prontuarios&&M.prontuarios.length>0?"bg-purple-50 text-purple-600 border-purple-200 hover:bg-purple-100":"bg-gray-50 text-gray-400 border-gray-100 hover:bg-gray-100"}`,title:"Pronturios e Exames",children:u.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),M.aso_url&&u.jsx("button",{onClick:()=>window.open(M.aso_url||"","_blank"),className:"w-8 h-8 rounded-lg flex items-center justify-center bg-green-50 text-green-600 hover:bg-green-100 transition-all border border-green-100",title:"Visualizar ASO",children:u.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),u.jsx("div",{className:"hidden md:block h-10 w-px bg-gray-100"}),r&&u.jsx("button",{onClick:xe=>{xe.stopPropagation(),r(M)},className:"p-3 rounded-xl transition-all text-purple-600 bg-purple-50 hover:bg-purple-100 border border-purple-100",title:"Gerar ASO",children:u.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),u.jsx("button",{onClick:xe=>{xe.stopPropagation(),Ze(M.ficha_url)},className:`p-3 rounded-xl transition-all ${M.ficha_url?"text-ios-primary bg-ios-primary/5 hover:bg-ios-primary/10":"text-gray-300 cursor-not-allowed bg-gray-50"}`,title:M.ficha_url?"Abrir Ficha Clnica":"Ficha indisponvel",disabled:!M.ficha_url,children:u.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})]})]},M.id)})}),ue&&!w&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-4 animate-in fade-in",children:u.jsxs("div",{className:"bg-white rounded-ios p-8 max-w-3xl w-full shadow-2xl relative",children:[u.jsx("button",{onClick:()=>ve(null),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100 transition-colors",children:u.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Enviar Documento"}),u.jsx("p",{className:"text-gray-500 mt-1",children:"Selecione o tipo de documento para anexar ao agendamento."})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[u.jsxs("button",{onClick:()=>{Ca(ue),ve(null)},className:"flex flex-col items-center justify-center p-6 bg-blue-50 hover:bg-blue-100 border-2 border-blue-100 hover:border-blue-200 rounded-2xl transition-all group",children:[u.jsx("div",{className:"w-16 h-16 bg-blue-200 rounded-full flex items-center justify-center mb-4 group-hover:scale-110 transition-transform text-blue-600",children:u.jsx("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),u.jsx("span",{className:"font-bold text-blue-800 text-lg",children:"Subir ASO"})]}),u.jsxs("button",{onClick:xa,className:"flex flex-col items-center justify-center p-6 bg-gray-50 hover:bg-gray-100 border-2 border-gray-100 hover:border-gray-200 rounded-2xl transition-all group",children:[u.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center mb-4 group-hover:scale-110 transition-transform text-gray-600",children:u.jsx("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z"})})}),u.jsx("span",{className:"font-bold text-gray-700 text-lg",children:"Pronturio"})]}),u.jsxs("button",{onClick:Kn,className:"flex flex-col items-center justify-center p-6 bg-green-50 hover:bg-green-100 border-2 border-green-100 hover:border-green-200 rounded-2xl transition-all group",children:[u.jsx("div",{className:"w-16 h-16 bg-green-200 rounded-full flex items-center justify-center mb-4 group-hover:scale-110 transition-transform text-green-600",children:u.jsx("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),u.jsx("span",{className:"font-bold text-green-800 text-lg",children:"E-social"})]})]})]})}),w&&ue&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-4 animate-in fade-in",children:u.jsxs("div",{className:"bg-white rounded-ios p-6 max-w-2xl w-full shadow-2xl relative flex flex-col max-h-[80vh]",children:[u.jsx("button",{onClick:()=>{B(!1),ve(null)},className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100 transition-colors",children:u.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),u.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4 px-2",children:"Pronturios / Exames"}),u.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-2",children:(Wt=(ht=l.find(M=>M.id===ue))==null?void 0:ht.prontuarios)!=null&&Wt.length?u.jsx("div",{className:"space-y-3",children:(ka=(Ha=l.find(M=>M.id===ue))==null?void 0:Ha.prontuarios)==null?void 0:ka.map(M=>u.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl border border-gray-100 hover:border-gray-200 transition-colors",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-100 text-blue-600 flex items-center justify-center",children:u.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-gray-800",children:M.tipo}),u.jsx("p",{className:"text-xs text-gray-400",children:new Date(M.created_at).toLocaleString("pt-BR")})]})]}),u.jsx("button",{onClick:()=>window.open(M.url,"_blank"),className:"px-4 py-2 bg-white border border-gray-200 text-gray-600 text-sm font-semibold rounded-lg hover:bg-gray-50 transition-colors",children:"Visualizar"})]},M.id))}):u.jsx("div",{className:"text-center py-10 text-gray-400",children:u.jsx("p",{children:"Nenhum procedimento anexado."})})}),u.jsx("div",{className:"mt-6 pt-4 border-t border-gray-100 flex justify-end",children:u.jsxs("button",{onClick:xa,className:"flex items-center gap-2 bg-ios-primary text-white px-6 py-3 rounded-xl font-bold shadow-lg shadow-ios-primary/30 hover:bg-ios-secondary transition-all",children:[u.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Adicionar Arquivos"]})})]})}),K&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-4 animate-in fade-in",children:u.jsxs("div",{className:"bg-white rounded-ios p-8 max-w-sm w-full shadow-2xl",children:[u.jsxs("div",{className:"text-center mb-6",children:[u.jsx("div",{className:"w-16 h-16 rounded-full bg-ios-primary/10 flex items-center justify-center text-ios-primary mb-4 mx-auto text-3xl",children:""}),u.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Exportar Excel"}),u.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Selecione o intervalo de datas para exportar os agendamentos."})]}),u.jsxs("div",{className:"space-y-4 mb-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1.5 ml-1 uppercase",children:"Data Inicial"}),u.jsx("input",{type:"date",value:I,onChange:M=>le(M.target.value),className:"w-full h-12 px-4 rounded-xl bg-gray-50 border-transparent focus:bg-white border focus:border-ios-primary outline-none"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1.5 ml-1 uppercase",children:"Data Final"}),u.jsx("input",{type:"date",value:ne,onChange:M=>X(M.target.value),className:"w-full h-12 px-4 rounded-xl bg-gray-50 border-transparent focus:bg-white border focus:border-ios-primary outline-none"})]}),u.jsxs("div",{className:"flex items-center gap-3 bg-gray-50 p-3 rounded-xl border border-gray-100",children:[u.jsx("input",{type:"checkbox",id:"includeAbsent",checked:Se,onChange:M=>ge(M.target.checked),className:"w-5 h-5 text-ios-primary border-gray-300 rounded focus:ring-ios-primary cursor-pointer"}),u.jsx("label",{htmlFor:"includeAbsent",className:"text-sm font-semibold text-gray-700 cursor-pointer select-none",children:"Incluir colaboradores que no compareceram"})]})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>H(!1),className:"flex-1 py-3 font-semibold text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-xl transition-colors",children:"Cancelar"}),u.jsx("button",{onClick:di,disabled:G,className:"flex-1 py-3 font-semibold text-white bg-ios-primary hover:bg-ios-secondary rounded-xl shadow-lg transition-colors flex justify-center",children:G?u.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):"Confirmar"})]})]})})]})},ob=[{idx:0,id:447,nome:"Avaliao Clnica"},{idx:1,id:448,nome:"Audiometria"},{idx:2,id:449,nome:"Acuidade Visual"},{idx:3,id:450,nome:"Espirometria"},{idx:4,id:451,nome:"Eletrocardiograma"},{idx:5,id:452,nome:"Eletroencefalograma"},{idx:6,id:453,nome:"Raio-X Trax PA OIT"},{idx:7,id:454,nome:"Raio-X Coluna L-Sacra"},{idx:8,id:455,nome:"Raio-X Mos e Braos"},{idx:9,id:456,nome:"Raio-X Punho"},{idx:10,id:457,nome:"Hemograma Completo"},{idx:11,id:458,nome:"Glicemia em Jejum"},{idx:12,id:459,nome:"EPF (parasitolgico fezes)"},{idx:13,id:460,nome:"EAS (urina)"},{idx:14,id:461,nome:"Grupo Sanguneo + Fator RH"},{idx:15,id:462,nome:"Gama GT"},{idx:16,id:463,nome:"TGO / TGP"},{idx:17,id:464,nome:"cido Trans. Muconico"},{idx:18,id:465,nome:"cido rico"},{idx:19,id:466,nome:"cido Hipr. (Tolueno urina)"},{idx:20,id:467,nome:"cido Metil Hiprico"},{idx:21,id:468,nome:"cido Mandlico"},{idx:22,id:469,nome:"ALA-U"},{idx:23,id:470,nome:"Hemoglobina glicada"},{idx:24,id:471,nome:"Coprocultura"},{idx:25,id:472,nome:"Colesterol T e F"},{idx:26,id:473,nome:"Chumbo Srico"},{idx:27,id:474,nome:"Creatinina"},{idx:28,id:475,nome:"Ferro Srico"},{idx:29,id:476,nome:"Mangans Urinrio"},{idx:30,id:477,nome:"Mangans Sanguneo"},{idx:31,id:478,nome:"Reticulcitos"},{idx:32,id:479,nome:"Triglicerdeos"},{idx:33,id:480,nome:"IGE Especfica - Abelha"},{idx:34,id:481,nome:"Acetona Urinria"},{idx:35,id:482,nome:"Anti HAV"},{idx:36,id:483,nome:"Anti HBS"},{idx:37,id:484,nome:"Anti HBSAG"},{idx:38,id:485,nome:"Anti HCV"},{idx:39,id:486,nome:"Carboxihemoglobina"},{idx:40,id:487,nome:"Exame Toxicolgico Pelo"},{idx:41,id:488,nome:"Avaliao Vocal"},{idx:42,id:489,nome:"Avaliao Psicossocial"},{idx:43,id:490,nome:"Avaliao Psicolgica"},{idx:44,id:491,nome:"Aspecto da Pele"},{idx:45,id:492,nome:"Questionrio Epilepsia"},{idx:46,id:493,nome:"Teste Palogrfico"},{idx:47,id:494,nome:"Teste de Ateno"},{idx:48,id:495,nome:"Teste Romberg"},{idx:49,id:496,nome:"Exame Toxicolgico Urina"},{idx:50,id:497,nome:"Higidez"},{idx:51,id:498,nome:"Grupo Sanguneo"}],cb=[{label:"Ficha Clnica",value:"FICHA_CLINICA"},{label:"Pronturio Mdico",value:"PRONTUARIO_MEDICO"},{label:"Audiometria",value:"AUDIOMETRIA"},{label:"Acuidade Visual",value:"ACUIDADE_VISUAL"},{label:"Avaliao Psicossocial",value:"AVALIACAO_PSICOSSOCIAL_SIMPLES"}],Ml=({label:i,value:n,onChange:r,onSelect:l,options:d,placeholder:h,required:m,onAddNew:g,addNewLabel:y,noResultText:p})=>{const[b,j]=V.useState(!1),T=V.useRef(null);V.useEffect(()=>{function S(A){T.current&&!T.current.contains(A.target)&&j(!1)}return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[]);const E=d.filter(S=>(S.label||"").toLowerCase().includes((n||"").toLowerCase()));return u.jsxs("div",{ref:T,className:"relative",children:[u.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1.5 ml-1",children:i}),u.jsxs("div",{className:"relative group",children:[u.jsx("input",{type:"text",required:m,value:n,onChange:S=>{r(S.target.value),j(!0)},onFocus:()=>j(!0),placeholder:h,className:"w-full h-12 px-4 rounded-xl bg-gray-50 border-transparent focus:bg-white focus:border-ios-primary focus:ring-4 focus:ring-ios-primary/10 outline-none transition-all text-gray-800"}),u.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:u.jsx("svg",{className:"h-4 w-4 text-gray-400 group-focus-within:text-ios-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),b&&n&&u.jsx("div",{className:"absolute z-30 w-full mt-2 bg-white border border-gray-100 rounded-xl shadow-float max-h-48 overflow-y-auto custom-scrollbar",children:E.length>0?E.map(S=>u.jsx("button",{type:"button",onClick:()=>{l(S.label),j(!1)},className:"w-full text-left px-5 py-3 hover:bg-gray-50 transition-colors border-b border-gray-50 last:border-0 text-sm text-gray-700 font-medium",children:S.label},S.id)):g?u.jsxs("button",{type:"button",onClick:()=>{j(!1),g()},className:"w-full text-left px-5 py-3 bg-blue-50 hover:bg-blue-100 transition-colors text-sm text-ios-primary font-bold flex items-center gap-2",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),y||"+ Cadastrar nova"]}):u.jsx("div",{className:"px-4 py-3 text-center text-gray-400 text-xs italic",children:p||`"${n}" ser adicionado como novo.`})})]})},ub=({initialAppointment:i,onCancel:n})=>{const[r,l]=V.useState("existing"),[d,h]=V.useState([]),[m,g]=V.useState([]),[y,p]=V.useState([]),[b,j]=V.useState([]),[T,E]=V.useState(null),[S,A]=V.useState({nome:"",cpf:"",data_nascimento:"",sexo:"M",setor:"",funcao:""}),[D,Y]=V.useState(""),[K,H]=V.useState(""),[I,le]=V.useState({data_atendimento:new Date().toISOString().split("T")[0],tipo:"Admissional",unidade:""}),[ne,X]=V.useState(""),[G,F]=V.useState(!1),[Se,ge]=V.useState(""),[de,we]=V.useState("Pix"),[Ee,Ne]=V.useState(""),[U,Q]=V.useState(""),[ae,ue]=V.useState(!1),[ve,w]=V.useState(!1),[B,P]=V.useState(""),[te,je]=V.useState([]),[Ce,Me]=V.useState(""),[jt,Ze]=V.useState(null),[La,Ca]=V.useState(!1),[Yn,Kn]=V.useState(""),[vt,xa]=V.useState([]),[un,di]=V.useState(""),[wa,Ba]=V.useState(["FICHA_CLINICA"]),[ca,qa]=V.useState(""),[bs,xs]=V.useState(""),[ht,Wt]=V.useState(!1),[Ha,ka]=V.useState(null),[M,he]=V.useState(null),[ie,be]=V.useState(!1),[Ae,Te]=V.useState(!1),[J,_e]=V.useState(""),[xe,Et]=V.useState(!1),[ot,rt]=V.useState([]),[He,De]=V.useState(null),[st,et]=V.useState(!1),[ua,da]=V.useState(!1),dn=ne==="Prefeitura/ Estado";V.useEffect(()=>{Vt(),Ft()},[]),V.useEffect(()=>{i&&(l("existing"),le({data_atendimento:i.data_atendimento,tipo:i.tipo||"Admissional",unidade:i.unidade?String(i.unidade):""}),i.unidade&&W.from("unidades").select("nome_unidade").eq("id",i.unidade).single().then(({data:O})=>{O&&(X(O.nome_unidade),O.nome_unidade.toLowerCase().includes("avulso")&&(F(!0),ge(i.valor?i.valor.toString():""),i.metodo_pagamento&&we(i.metodo_pagamento)),O.nome_unidade==="Prefeitura/ Estado"&&(i.valor&&ge(i.valor.toString()),i.metodo_pagamento&&(["Pix","Boleto","Carto","Dinheiro"].includes(i.metodo_pagamento)?we(i.metodo_pagamento):(we("Outro"),Ne(i.metodo_pagamento)))))}),i.exames_snapshot&&xa(i.exames_snapshot),i.obs_agendamento&&Q(i.obs_agendamento),i.prioridade&&ue(i.prioridade),i.valor&&i.valor>0&&ge(i.valor.toString()),i.observacoes&&qa(i.observacoes),_a(i.colaborador_id))},[i]);const _a=async O=>{const{data:Z,error:ye}=await W.from("colaboradores").select("*, cargos ( nome )").eq("id",O).single();Z&&Ga(Z)},Ft=async()=>{const{data:{user:O}}=await W.auth.getUser();if(O){const{data:Z}=await W.from("users").select("username, sector").eq("user_id",O.id).single();Z&&E(Z)}},Vt=async()=>{const{data:O}=await W.from("colaboradores").select("id, nome, cpf, data_nascimento, sexo, setor, cargo"),{data:Z}=await W.from("unidades").select("id, nome_unidade"),{data:ye}=await W.from("setor").select("id, nome"),{data:Ve}=await W.from("cargos").select("id, nome");O&&h(O),Z&&g(Z),ye&&p(ye.map(gt=>({id:gt.id,label:gt.nome}))),Ve&&j(Ve.map(gt=>({id:gt.id,label:gt.nome})))},In=O=>{vt.includes(O)?xa(vt.filter(Z=>Z!==O)):xa([...vt,O])},$a=O=>{wa.includes(O)?Ba(wa.filter(Z=>Z!==O)):Ba([...wa,O])},Ga=O=>{Y(O.id);let Z="";if(O.cargos&&O.cargos.nome)Z=O.cargos.nome;else if(O.cargo){const ye=b.find(Ve=>Ve.id===O.cargo);ye&&(Z=ye.label)}A({nome:O.nome,cpf:O.cpf,data_nascimento:O.data_nascimento,sexo:O.sexo||"M",setor:O.setor||"",funcao:Z}),H("")},Nt=O=>{const Z=m.find(ye=>ye.nome_unidade===O);Z&&(le({...I,unidade:Z.id.toString()}),X(Z.nome_unidade),Z.nome_unidade!=="Prefeitura/ Estado"&&(ge(""),we("Pix"),Ne("")))},Yt=O=>{const Z=te.find(ye=>ye.label===O);Z&&(Ze(Z.id),Me(Z.label))},Ht=async()=>{let O=jt;if(!O&&Ce.trim()){const Z=te.find(ye=>ye.label.toLowerCase()===Ce.trim().toLowerCase());Z&&(O=Z.id)}if(!B.trim()){Kn("Informe o nome da unidade."),Ca(!0);return}if(!O){Kn("Selecione um cliente (Matriz) para continuar."),Ca(!0);return}Wt(!0);try{const{data:Z,error:ye}=await W.from("unidades").insert({nome_unidade:B,empresaid:O}).select("id, nome_unidade").single();if(ye)throw ye;Z&&(g(Ve=>[...Ve,Z]),le({...I,unidade:Z.id.toString()}),X(Z.nome_unidade),w(!1),P(""),Ze(null),Me(""),ka({type:"success",text:"Unidade cadastrada!"}))}catch(Z){alert(`Erro: ${Z.message}`)}finally{Wt(!1)}},Tt=()=>{A({nome:"",cpf:"",data_nascimento:"",sexo:"M",setor:"",funcao:""}),xa([]),Ba(["FICHA_CLINICA"]),qa(""),xs(""),Y(""),H(""),X(""),le(O=>({...O,unidade:""})),Q(""),ue(!1),F(!1),ge(""),we("Pix"),Ne(""),he(null)},Pe=()=>{Tt(),n&&n()},We=()=>da(!0),lt=async()=>{if(da(!1),!!(i!=null&&i.id)){Wt(!0);try{const{error:O,count:Z}=await W.from("agendamentos").delete({count:"exact"}).eq("id",i.id);if(O)throw O;Z===0?alert("Erro ao excluir."):n&&n()}catch(O){alert(`Erro: ${O.message}`)}finally{Wt(!1)}}},ft=O=>{let Z="";const ye="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let Ve=0;Ve<O;Ve++)Z+=ye.charAt(Math.floor(Math.random()*ye.length));return Z},Ra=async O=>{try{const Z=await fetch("https://ficha-api.vercel.app/prontuarios",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)});if(!Z.ok)throw new Error("Erro PDF");const ye=await Z.json();return ye.publicUrl||ye.url||ye.pdf_url||ye.link||(typeof ye=="string"&&ye.startsWith("http")?ye:null)}catch(Z){return console.error("PDF Error:",Z),null}},Xn=async()=>{be(!1),Wt(!0);try{const{data:O}=await W.from("chat_tags").select("*").order("chatname");O&&O.length>0?(rt(O),_e(""),Te(!0)):(alert("Nenhum contato encontrado."),Pe())}catch(O){alert("Erro ao buscar contatos: "+O.message),Pe()}finally{Wt(!1)}},Yl=()=>{be(!1),Pe()},Kl=O=>{De(O),Te(!1),Et(!0)},yr=async()=>{if(!He||!M||!T)return;et(!0);const O=M.data.split("-").reverse().join("/"),Z=M.exames.map(Va=>`- ${Va}`).join(`
`);let ye=`- Levar RG e CPF!
- Fazer repouso auditivo de 12 horas.`;M.exames.some(Va=>{const gn=Va.toLowerCase();return gn.includes("hemoglobina glicada")||gn.includes("glicemia")})&&(ye+=`
- Necessrio jejum de 8 horas.`);const gt=`*${T.username}:*

Exame Ocupacional do(a) paciente *${M.pacienteName}* est agendado para *${O}*, *s 7:00*:
_Atendimento por ordem de chegada!_

*Exames Solicitados:*
${Z}

*Orientaes dos exames ocupacionais:*
${ye}

_Endereo da Clnica Gama Center: Rua Baro de Pouso Alegre, 90, So Sebastio, Conselheiro Lafaiete (ao lado da Igreja So Sebastio)._`;try{await fetch("https://api.z-api.io/instances/3E8112AFC26DD1A98FF7B2116B9188C4/token/A5112854C9B41DACC9EA5B85/send-text",{method:"POST",headers:{"Client-Token":"F53f53bad10a9494f92d5e33804220a26S","Content-Type":"application/json"},body:JSON.stringify({phone:He.phone,message:gt})}),alert("Notificao enviada!")}catch{alert("Erro ao enviar mensagem.")}finally{et(!1),Et(!1),Pe()}},Qn=async O=>{if(!(O!=null&&O.trim()))return null;const Z=O.trim(),{data:ye}=await W.from("cargos").select("id").ilike("nome",Z).maybeSingle();if(ye)return ye.id;const{data:Ve}=await W.from("cargos").insert({nome:Z,ativo:!0}).select().single();return Ve&&j(gt=>[...gt,{id:Ve.id,label:Ve.nome}]),Ve==null?void 0:Ve.id},hi=async O=>{if(!(O!=null&&O.trim()))return null;const Z=O.trim(),{data:ye}=await W.from("setor").select("id, nome").ilike("nome",Z).maybeSingle();if(ye)return ye.nome;const{data:Ve}=await W.from("setor").insert({nome:Z}).select().single();return Ve&&p(gt=>[...gt,{id:Ve.id,label:Ve.nome}]),Ve==null?void 0:Ve.nome},hn=async O=>{O.preventDefault(),Wt(!0),ka(null);try{let Z=D,ye=I.unidade?parseInt(I.unidade):null,Ve=0,gt="medicao";if(G){if(!Se)throw new Error("Informe o valor.");const{data:Ct}=await W.from("unidades").select("id, empresaid").ilike("nome_unidade","%Avulsos%").limit(1).maybeSingle();if(!Ct)throw new Error("Unidade 'Avulsos' no encontrada.");ye=Ct.id,Ve=parseFloat(Se.replace(",",".")),gt=de}else if(dn){if(!Se)throw new Error("Informe o valor.");if(Ve=parseFloat(Se.replace(",",".")),gt=de==="Outro"?Ee:de,!gt.trim())throw new Error("Informe a forma de pagamento.")}let Va=S.funcao?await Qn(S.funcao):null,gn=S.setor&&await hi(S.setor)||S.setor;const Zn={nome:S.nome,cpf:S.cpf,data_nascimento:S.data_nascimento,sexo:S.sexo,setor:gn,unidade:ye,cargo:Va};if(r==="new"){const{data:Ct,error:Rt}=await W.from("colaboradores").insert([Zn]).select().single();if(Rt)throw Rt;Z=Ct.id}else await W.from("colaboradores").update(Zn).eq("id",Z);const pn=G?{nome_unidade:"Avulsos"}:m.find(Ct=>Ct.id===ye),Sa=vt.map(Ct=>Ct==="Higidez"?"Higidez Mental":Ct),$t=await Ra({agendamentoId:ft(23),empresa:(pn==null?void 0:pn.nome_unidade)||"Matriz",nome:S.nome,dataExame:I.data_atendimento,funcao:S.funcao||gn||"No informado",cpf:S.cpf,dataNascimento:S.data_nascimento,sexo:S.sexo,tipoExame:I.tipo,setor:gn||"Operacional",tipo_exame:[I.tipo],exames_requisitados:Sa,observacoesClinica:ca,observacoesLaboratorial:bs,observacoes:ca,formularios:wa}),vr=(Ct=>{const Rt=Ct.map(ee=>ee.toLowerCase()),Xl=Rt.some(ee=>ee.includes("avaliao clnica")||ee.includes("avaliacao clinica")||ee.includes("higidez")||ee.includes("psicossocial")||ee.includes("psicolgica")||ee.includes("psicologica")||ee.includes("questionrio epilepsia")||ee.includes("questionario epilepsia")||ee.includes("aspecto da pele")||ee.includes("avaliao vocal")||ee.includes("avaliacao vocal"))?"Aguardando":"nao aplicavel",Kt=Rt.some(ee=>ee.includes("acuidade visual")||ee.includes("espirometria")||ee.includes("eletrocardiograma")||ee.includes("eletroencefalograma")||ee.includes("teste palogrfico")||ee.includes("teste palografico")||ee.includes("teste de ateno")||ee.includes("teste de atencao")||ee.includes("teste romberg"))?"Aguardando":"nao aplicavel",mi=Rt.some(ee=>ee.includes("hemograma")||ee.includes("glicemia")||ee.includes("epf")||ee.includes("eas")||ee.includes("grupo sanguneo")||ee.includes("grupo sanguineo")||ee.includes("gama gt")||ee.includes("tgo")||ee.includes("tgp")||ee.includes("cido")||ee.includes("acido")||ee.includes("ala-u")||ee.includes("hemoglobina")||ee.includes("coprocultura")||ee.includes("colesterol")||ee.includes("chumbo")||ee.includes("creatinina")||ee.includes("ferro srico")||ee.includes("ferro serico")||ee.includes("mangans")||ee.includes("manganes")||ee.includes("reticulcitos")||ee.includes("reticulocitos")||ee.includes("triglicerdeos")||ee.includes("triglicerideos")||ee.includes("ige especfica")||ee.includes("ige especifica")||ee.includes("acetona")||ee.includes("anti hav")||ee.includes("anti hbs")||ee.includes("anti hbsag")||ee.includes("anti hcv")||ee.includes("carboxihemoglobina")||ee.includes("toxicolgico")||ee.includes("toxicologico"))?"Aguardando":"nao aplicavel",br=Rt.some(ee=>ee.includes("audiometria"))?"Aguardando":"nao aplicavel",gi=Rt.some(ee=>ee.includes("raio-x")||ee.includes("raio x"))?"Aguardando":"nao aplicavel";return{consultorio:Xl,salaexames:Kt,salacoleta:mi,audiometria:br,raiox:gi}})(vt);let yn;if(i){const Ct={colaborador_id:Z,data_atendimento:I.data_atendimento,tipo:I.tipo,unidade:ye,exames_snapshot:vt,ficha_url:$t||i.ficha_url,obs_agendamento:U||null,prioridade:ae,valor:Ve||i.valor||0,metodo_pagamento:gt!=="medicao"?gt:i.metodo_pagamento||"medicao",observacoes:ca||null,...vr},{error:Rt}=await W.from("agendamentos").update(Ct).eq("id",i.id);yn=Rt}else{const Ct={colaborador_id:Z,data_atendimento:I.data_atendimento,tipo:I.tipo,unidade:ye,exames_snapshot:vt,ficha_url:$t,obs_agendamento:U||null,prioridade:ae,valor:Ve,metodo_pagamento:gt,observacoes:ca||null,compareceu:!1,status:"pendente",recepcao:"Aguardando",...vr},{error:Rt}=await W.from("agendamentos").insert([Ct]);yn=Rt}if(yn)throw yn;ka({type:"success",text:i?"Agendamento atualizado!":"Agendamento salvo!"}),he({pacienteName:S.nome,data:I.data_atendimento,exames:vt,obsClinica:ca}),be(!0)}catch(Z){console.error(Z),ka({type:"error",text:Z.message})}finally{Wt(!1)}},fn=d.filter(O=>O.nome&&(O.nome||"").toLowerCase().includes((K||"").toLowerCase())||O.cpf&&(O.cpf||"").includes(K||"")),Jn=m.map(O=>({id:O.id,label:O.nome_unidade})),mn=ob.filter(O=>(O.nome||"").toLowerCase().includes((un||"").toLowerCase())),mt=O=>O.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z\s]/g,"").trim(),fi=ot.filter(O=>{if(!J.trim())return!1;const Z=mt(J);return Z?mt(O.chatname||"").includes(Z):!1});return u.jsxs("div",{className:"max-w-5xl mx-auto pb-10 relative",children:[u.jsxs("div",{className:"flex justify-between items-center mb-8",children:[u.jsx("h2",{className:"text-3xl font-bold text-ios-text tracking-tight",children:i?"Editar Agendamento":"Novo Agendamento"}),n&&u.jsx("button",{onClick:n,className:"text-ios-primary font-semibold hover:underline",children:"Voltar"})]}),u.jsxs("div",{className:"bg-white rounded-ios p-8 shadow-sm border border-gray-100",children:[Ha&&u.jsxs("div",{className:`mb-6 p-4 rounded-xl text-sm font-medium flex items-center gap-2 ${Ha.type==="success"?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:[u.jsx("span",{className:"w-2 h-2 rounded-full bg-current"}),Ha.text]}),!i&&u.jsxs("div",{className:"flex bg-gray-100 p-1.5 rounded-2xl mb-8",children:[u.jsx("button",{type:"button",onClick:()=>{l("existing"),Tt()},className:`flex-1 py-3 text-sm font-semibold rounded-xl transition-all ${r==="existing"?"bg-white text-ios-primary shadow-sm":"text-gray-500"}`,children:"Colaborador Existente"}),u.jsx("button",{type:"button",onClick:()=>{l("new"),Tt()},className:`flex-1 py-3 text-sm font-semibold rounded-xl transition-all ${r==="new"?"bg-white text-ios-primary shadow-sm":"text-gray-500"}`,children:"Novo Cadastro"})]}),u.jsxs("form",{onSubmit:hn,className:"space-y-8",children:[!i&&u.jsxs("div",{className:"flex flex-col gap-3 animate-in fade-in slide-in-from-top-2",children:[u.jsxs("div",{className:"flex items-center gap-3 bg-gray-50 p-4 rounded-xl border border-gray-100",children:[u.jsx("input",{type:"checkbox",id:"avulsoCheck",checked:G,onChange:O=>{F(O.target.checked),O.target.checked?(le(Z=>({...Z,unidade:""})),X("Avulsos")):(X(""),ge(""))},className:"w-5 h-5 text-ios-primary border-gray-300 rounded focus:ring-ios-primary"}),u.jsx("div",{className:"flex flex-col",children:u.jsx("label",{htmlFor:"avulsoCheck",className:"text-sm font-bold text-gray-700 cursor-pointer select-none",children:"Lanamento Avulso (Particular)"})})]}),G&&u.jsxs("div",{className:"bg-yellow-50 p-4 rounded-xl border border-yellow-100 animate-in fade-in slide-in-from-top-2 space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-yellow-600 mb-1.5 ml-1 uppercase",children:"Valor"}),u.jsxs("div",{className:"relative",children:[u.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-yellow-600 font-bold",children:"R$"}),u.jsx("input",{type:"number",step:"0.01",required:G,value:Se,onChange:O=>ge(O.target.value),className:"w-full h-12 pl-10 pr-4 rounded-xl bg-white border-2 border-yellow-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-400/20 outline-none transition-all text-gray-800 font-bold text-lg",placeholder:"0,00"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-yellow-600 mb-1.5 ml-1 uppercase",children:"Pagamento"}),u.jsxs("select",{value:de,onChange:O=>we(O.target.value),className:"w-full h-12 px-4 rounded-xl bg-white border-2 border-yellow-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-400/20 outline-none transition-all text-gray-800 font-medium",children:[u.jsx("option",{value:"Pix",children:"Pix"}),u.jsx("option",{value:"Dinheiro",children:"Dinheiro"}),u.jsx("option",{value:"Carto de Crdito",children:"Carto de Crdito"}),u.jsx("option",{value:"Carto de Dbito",children:"Carto de Dbito"})]})]})]})]}),r==="existing"&&!D&&!i&&u.jsxs("div",{className:"relative mb-8",children:[u.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-2 uppercase tracking-wide ml-1",children:"Buscar Colaborador"}),u.jsx("input",{type:"text",placeholder:"Pesquisar por nome ou CPF...",value:K,onChange:O=>H(O.target.value),className:"w-full h-14 px-4 rounded-xl bg-gray-50 border-transparent focus:bg-white focus:border-ios-primary outline-none transition-all text-ios-text font-medium"}),K&&u.jsx("div",{className:"absolute z-20 w-full mt-2 bg-white border border-gray-100 rounded-xl shadow-float max-h-60 overflow-y-auto custom-scrollbar",children:fn.map(O=>u.jsx("button",{type:"button",onClick:()=>Ga(O),className:"w-full text-left px-5 py-4 hover:bg-gray-50 border-b border-gray-50 flex justify-between",children:u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-gray-800",children:O.nome}),u.jsx("p",{className:"text-xs text-gray-400 font-mono",children:O.cpf})]})},O.id))})]}),(r==="new"||D)&&u.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[u.jsx("div",{className:"flex justify-between items-center border-b border-gray-100 pb-2",children:u.jsx("h3",{className:"text-sm uppercase tracking-wider text-ios-subtext font-bold",children:"Dados Pessoais"})}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1.5 ml-1",children:"Nome"}),u.jsx("input",{type:"text",required:!0,value:S.nome,onChange:O=>A({...S,nome:O.target.value}),className:"w-full h-12 px-4 rounded-xl bg-gray-50 border-transparent focus:bg-white outline-none"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1.5 ml-1",children:"CPF"}),u.jsx("input",{type:"text",required:!0,value:S.cpf,onChange:O=>A({...S,cpf:O.target.value}),className:"w-full h-12 px-4 rounded-xl bg-gray-50 border-transparent focus:bg-white outline-none"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1.5 ml-1",children:"Nascimento"}),u.jsx("input",{type:"date",required:!0,value:S.data_nascimento,onChange:O=>A({...S,data_nascimento:O.target.value}),className:"w-full h-12 px-4 rounded-xl bg-gray-50 border-transparent focus:bg-white outline-none"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1.5 ml-1",children:"Sexo"}),u.jsxs("select",{required:!0,value:S.sexo,onChange:O=>A({...S,sexo:O.target.value}),className:"w-full h-12 px-4 rounded-xl bg-gray-50 border-transparent focus:bg-white outline-none",children:[u.jsx("option",{value:"M",children:"Masculino"}),u.jsx("option",{value:"F",children:"Feminino"})]})]}),u.jsx("div",{children:u.jsx(Ml,{label:"Setor",value:S.setor,onChange:O=>A({...S,setor:O}),onSelect:O=>A({...S,setor:O}),options:y})}),u.jsx("div",{children:u.jsx(Ml,{label:"Funo",value:S.funcao,onChange:O=>A({...S,funcao:O}),onSelect:O=>A({...S,funcao:O}),options:b})})]})]}),u.jsx("div",{className:"h-px bg-gray-100 w-full"}),u.jsxs("div",{className:"space-y-6",children:[u.jsx("h3",{className:"text-sm uppercase tracking-wider text-ios-subtext font-bold border-b border-gray-100 pb-2",children:"Detalhes"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1.5 ml-1",children:"Data"}),u.jsx("input",{type:"date",required:!0,value:I.data_atendimento,onChange:O=>le({...I,data_atendimento:O.target.value}),className:"w-full h-12 px-4 rounded-xl bg-gray-50 border-transparent focus:bg-white outline-none"})]}),u.jsx("div",{children:G?u.jsxs("div",{className:"opacity-50 pointer-events-none",children:[u.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1.5 ml-1",children:"Empresa"}),u.jsx("input",{type:"text",value:"Avulsos",readOnly:!0,className:"w-full h-12 px-4 rounded-xl bg-gray-100"})]}):u.jsxs(u.Fragment,{children:[u.jsx(Ml,{label:"Empresa / Unidade",value:ne,onChange:O=>{X(O),le(Z=>({...Z,unidade:""})),O!=="Prefeitura/ Estado"&&(ge(""),we("Pix"),Ne(""))},onSelect:Nt,options:Jn,required:!G,onAddNew:async()=>{P(ne);const{data:O}=await W.from("clientes").select("id, nome_fantasia").order("nome_fantasia");O&&je(O.map(Z=>({id:Z.id,label:Z.nome_fantasia}))),w(!0)},addNewLabel:"+ Nova Unidade"}),dn&&u.jsxs("div",{className:"mt-4 p-4 bg-blue-50 rounded-xl border border-blue-100 animate-in fade-in slide-in-from-top-2 space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-blue-600 mb-1.5 ml-1 uppercase",children:"Valor (R$)"}),u.jsxs("div",{className:"relative",children:[u.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-blue-600 font-bold",children:"R$"}),u.jsx("input",{type:"number",step:"0.01",required:!0,value:Se,onChange:O=>ge(O.target.value),className:"w-full h-12 pl-10 pr-4 rounded-xl bg-white border border-blue-200 focus:border-blue-400 focus:ring-4 focus:ring-blue-400/20 outline-none transition-all text-gray-800 font-bold text-lg",placeholder:"0,00"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-blue-600 mb-1.5 ml-1 uppercase",children:"Forma de Pagamento"}),u.jsxs("select",{value:de,onChange:O=>we(O.target.value),className:"w-full h-12 px-4 rounded-xl bg-white border border-blue-200 focus:border-blue-400 focus:ring-4 focus:ring-blue-400/20 outline-none transition-all text-gray-800 font-medium",children:[u.jsx("option",{value:"Pix",children:"Pix"}),u.jsx("option",{value:"Dinheiro",children:"Dinheiro"}),u.jsx("option",{value:"Boleto",children:"Boleto"}),u.jsx("option",{value:"Carto",children:"Carto"}),u.jsx("option",{value:"Outro",children:"Outro"})]})]}),de==="Outro"&&u.jsxs("div",{className:"animate-in fade-in slide-in-from-top-1",children:[u.jsx("label",{className:"block text-xs font-bold text-blue-600 mb-1.5 ml-1 uppercase",children:"Especifique"}),u.jsx("input",{type:"text",required:!0,value:Ee,onChange:O=>Ne(O.target.value),className:"w-full h-12 px-4 rounded-xl bg-white border border-blue-200 focus:border-blue-400 focus:ring-4 focus:ring-blue-400/20 outline-none transition-all text-gray-800",placeholder:"Digite a forma de pagamento..."})]})]})]})}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1.5 ml-1",children:"Tipo"}),u.jsxs("select",{value:I.tipo,onChange:O=>le({...I,tipo:O.target.value}),className:"w-full h-12 px-4 rounded-xl bg-gray-50 border-transparent focus:bg-white outline-none",children:[u.jsx("option",{value:"Admissional",children:"Admissional"}),u.jsx("option",{value:"Demissional",children:"Demissional"}),u.jsx("option",{value:"Peridico",children:"Peridico"}),u.jsx("option",{value:"Retorno",children:"Retorno ao Trabalho"}),u.jsx("option",{value:"Mudana",children:"Mudana de Funo"}),u.jsx("option",{value:"Outros",children:"Outros"})]})]})]}),u.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[u.jsxs("div",{className:"w-full",children:[u.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1.5 ml-1",children:"Obs. Agendamento"}),u.jsx("textarea",{rows:2,value:U,onChange:O=>Q(O.target.value),className:"w-full p-4 rounded-xl bg-yellow-50 border-transparent focus:bg-white outline-none resize-none"})]}),u.jsxs("div",{className:"md:w-64",children:[u.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1.5 ml-1",children:"Prioridade"}),u.jsxs("div",{onClick:()=>ue(!ae),className:`flex items-center gap-3 p-4 rounded-xl border cursor-pointer ${ae?"bg-red-50 border-red-200":"bg-gray-50 border-transparent"}`,children:[u.jsx("div",{className:`w-6 h-6 rounded-md border flex items-center justify-center ${ae?"bg-red-500 border-red-500":"bg-white border-gray-300"}`,children:ae&&u.jsx("span",{className:"text-white font-bold",children:""})}),u.jsx("span",{className:"text-sm font-bold text-gray-500",children:"Marcar Prioridade"})]})]})]})]}),u.jsx("div",{className:"h-px bg-gray-100 w-full"}),u.jsx("div",{className:"space-y-4",children:u.jsx("div",{className:"flex flex-wrap gap-2",children:cb.map(O=>u.jsx("button",{type:"button",onClick:()=>$a(O.value),className:`px-4 py-2.5 rounded-xl text-sm font-semibold border ${wa.includes(O.value)?"bg-ios-secondary text-white border-ios-secondary":"bg-white text-gray-600 border-gray-200"}`,children:O.label},O.value))})}),u.jsxs("div",{className:"space-y-6",children:[u.jsx("h3",{className:"text-sm uppercase tracking-wider text-ios-subtext font-bold",children:"Observaes Clnicas"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsx("textarea",{rows:3,value:ca,onChange:O=>qa(O.target.value),className:"w-full p-4 rounded-xl bg-gray-50 border-transparent focus:bg-white outline-none",placeholder:"Obs Clnicas"}),u.jsx("textarea",{rows:3,value:bs,onChange:O=>xs(O.target.value),className:"w-full p-4 rounded-xl bg-gray-50 border-transparent focus:bg-white outline-none",placeholder:"Obs Laboratoriais"})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("h3",{className:"text-sm uppercase tracking-wider text-ios-subtext font-bold",children:["Exames (",vt.length,")"]}),u.jsx("input",{type:"text",placeholder:"Filtrar exames...",value:un,onChange:O=>di(O.target.value),className:"w-full h-12 px-4 mb-4 rounded-xl bg-gray-50 border-transparent focus:bg-white outline-none"}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 max-h-[400px] overflow-y-auto custom-scrollbar p-1",children:mn.map(O=>u.jsx("button",{type:"button",onClick:()=>In(O.nome),className:`p-3 rounded-xl border text-left text-sm font-medium ${vt.includes(O.nome)?"bg-ios-primary text-white border-ios-primary":"bg-white border-gray-100"}`,children:O.nome},O.id))})]}),u.jsxs("div",{className:"pt-6 space-y-4",children:[u.jsx("button",{type:"submit",disabled:ht,className:`w-full h-14 rounded-2xl font-bold text-lg text-white shadow-xl ${ht?"bg-gray-300":"bg-ios-primary"}`,children:ht?"...":i?"Atualizar Agendamento":"Confirmar"}),i&&u.jsx("button",{type:"button",onClick:We,disabled:ht,className:"w-full h-14 rounded-2xl font-bold text-lg text-red-500 bg-red-50 border border-red-100",children:"Excluir"})]})]})]}),ve&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-4",children:u.jsxs("div",{className:"bg-white rounded-ios p-6 max-w-md w-full shadow-2xl space-y-4",children:[u.jsx("h3",{className:"text-xl font-bold",children:"Nova Unidade"}),u.jsxs("div",{className:"space-y-4",children:[u.jsx(Ml,{label:"Cliente / Empresa Matriz",value:Ce,onChange:O=>{Me(O),Ze(null)},onSelect:Yt,options:te,placeholder:"Pesquisar cliente...",required:!0,onAddNew:void 0,noResultText:"Entre em contato com a equipe de T.I"}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1.5 ml-1",children:"Nome da Unidade"}),u.jsx("input",{type:"text",value:B,onChange:O=>P(O.target.value),className:"w-full h-14 px-4 rounded-xl bg-gray-50 border-transparent focus:bg-white outline-none",placeholder:"Ex: Filial Centro, Obra 01..."})]})]}),u.jsxs("div",{className:"flex gap-3 mt-6",children:[u.jsx("button",{onClick:()=>w(!1),className:"flex-1 py-3 font-semibold bg-gray-100 rounded-xl",children:"Cancelar"}),u.jsx("button",{onClick:Ht,className:"flex-1 py-3 font-semibold text-white bg-ios-primary rounded-xl",children:"Salvar"})]})]})}),La&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-4 animate-in fade-in",children:u.jsxs("div",{className:"bg-white rounded-ios p-6 max-w-sm w-full shadow-2xl text-center border-t-4 border-red-500",children:[u.jsx("div",{className:"w-16 h-16 rounded-full bg-red-50 flex items-center justify-center text-red-500 mb-4 mx-auto text-3xl",children:""}),u.jsx("h3",{className:"text-xl font-bold mb-2 text-gray-800",children:"Ateno"}),u.jsx("p",{className:"text-gray-600 mb-6 px-2",children:Yn}),u.jsx("button",{onClick:()=>Ca(!1),className:"w-full py-3 font-bold text-white bg-red-500 hover:bg-red-600 rounded-xl transition-colors shadow-lg shadow-red-500/30",children:"Entendido"})]})}),ie&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-4 animate-in fade-in",children:u.jsxs("div",{className:"bg-white rounded-ios p-6 max-w-sm w-full shadow-2xl text-center",children:[u.jsx("div",{className:"w-12 h-12 rounded-full bg-ios-primary/10 flex items-center justify-center text-ios-primary mb-4 mx-auto text-2xl",children:""}),u.jsx("h3",{className:"text-xl font-bold mb-2",children:"Enviar notificao?"}),u.jsx("p",{className:"text-gray-500 mb-6",children:"Deseja enviar mensagem via WhatsApp?"}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:Yl,className:"flex-1 py-3 font-semibold text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-xl",children:"No"}),u.jsx("button",{onClick:Xn,className:"flex-1 py-3 font-semibold text-white bg-ios-primary hover:bg-ios-secondary rounded-xl shadow-lg",children:"Sim"})]})]})}),Ae&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-4 animate-in fade-in",children:u.jsxs("div",{className:"bg-white rounded-ios max-w-md w-full shadow-2xl h-[500px] flex flex-col overflow-hidden",children:[u.jsxs("div",{className:"p-6 border-b border-gray-100",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("h3",{className:"text-xl font-bold",children:"Selecione o Contato"}),u.jsx("button",{onClick:()=>{Te(!1),Pe()},className:"text-gray-400",children:""})]}),u.jsx("input",{type:"text",placeholder:"Pesquisar contato...",value:J,onChange:O=>_e(O.target.value),className:"w-full h-12 px-4 rounded-xl bg-gray-50 border-transparent focus:bg-white focus:border-ios-primary outline-none",autoFocus:!0})]}),u.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 space-y-2 bg-gray-50",children:fi.length>0?fi.map(O=>u.jsxs("button",{onClick:()=>Kl(O),className:"w-full p-4 flex items-center gap-4 bg-white hover:bg-ios-primary/5 rounded-xl transition-all border border-gray-100 hover:border-ios-primary/20 text-left",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center font-bold text-gray-500",children:O.chatname.charAt(0)}),u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-gray-900",children:O.chatname}),u.jsx("p",{className:"text-xs text-gray-400",children:O.phone})]})]},O.phone)):u.jsx("div",{className:"text-center py-10 text-gray-400",children:J.trim()?"Nenhum contato encontrado.":"Digite para pesquisar..."})}),u.jsx("div",{className:"p-4 border-t border-gray-100 text-center",children:u.jsx("button",{onClick:()=>{Te(!1),Pe()},className:"text-gray-500 font-bold text-sm",children:"Pular notificao"})})]})}),xe&&He&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-4",children:u.jsxs("div",{className:"bg-white rounded-ios p-6 max-w-sm w-full shadow-2xl text-center",children:[u.jsx("h3",{className:"text-xl font-bold mb-2",children:"Enviar Confirmao"}),u.jsxs("p",{className:"text-gray-500 mb-6",children:["Para ",u.jsx("span",{className:"font-bold text-gray-800",children:He.chatname}),"?"]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>{Et(!1),Pe()},className:"flex-1 py-3 font-semibold bg-gray-100 rounded-xl",disabled:st,children:"Cancelar"}),u.jsx("button",{onClick:yr,className:"flex-1 py-3 font-semibold text-white bg-green-500 rounded-xl",disabled:st,children:st?"...":"Enviar"})]})]})}),ua&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-4",children:u.jsxs("div",{className:"bg-white rounded-ios p-6 max-w-sm w-full shadow-2xl border border-red-100 text-center",children:[u.jsx("h3",{className:"text-xl font-bold mb-2",children:"Excluir?"}),u.jsx("p",{className:"text-gray-500 mb-6",children:"Essa ao no pode ser desfeita."}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>da(!1),className:"flex-1 py-3 font-semibold bg-gray-100 rounded-xl",children:"Cancelar"}),u.jsx("button",{onClick:lt,className:"flex-1 py-3 font-semibold text-white bg-red-500 rounded-xl",children:"Excluir"})]})]})})]})},$n=[{key:"consultorio",label:"Consultrio Mdico"},{key:"salaexames",label:"Sala Exames"},{key:"salacoleta",label:"Sala Coleta"},{key:"audiometria",label:"Audiometria"},{key:"raiox",label:"Raio-X"}],db=()=>{const[i,n]=V.useState([]),[r,l]=V.useState(!0),[d,h]=V.useState(null),[m,g]=V.useState(null),[y,p]=V.useState(""),[b,j]=V.useState(null),[T,E]=V.useState("00:00");V.useEffect(()=>{S(),D();const G=setInterval(D,1e4);return()=>clearInterval(G)},[]),V.useEffect(()=>{let G;return b?G=setInterval(()=>{const Se=Math.floor((new Date().getTime()-b.startTime.getTime())/1e3),ge=Math.floor(Se/60),de=Se%60,we=`${ge.toString().padStart(2,"0")}:${de.toString().padStart(2,"0")}`;E(we)},1e3):E("00:00"),()=>{G&&clearInterval(G)}},[b]);const S=async()=>{const{data:{user:G}}=await W.auth.getUser();if(G){const{data:F}=await W.from("users").select("id, acesso_med, username").eq("user_id",G.id).single();F&&(h(F.acesso_med),g(F.id),p(F.username),A(F.id))}},A=async G=>{var Se,ge;const{data:F}=await W.from("atendimentos").select(`
        chamou_em,
        agendamentos (
            colaboradores ( nome )
        )
      `).eq("user_id",G).is("finalizou_em",null).maybeSingle();if(F){const de=((ge=(Se=F.agendamentos)==null?void 0:Se.colaboradores)==null?void 0:ge.nome)||"Paciente";j({startTime:new Date(F.chamou_em),patientName:de})}},D=async()=>{const G=new Date().toISOString().split("T")[0],{data:F,error:Se}=await W.from("agendamentos").select(`
        *,
        colaboradores:colaboradores!agendamentos_colaborador_id_fkey (id, nome)
      `).eq("data_atendimento",G).eq("compareceu",!0).order("prioridade",{ascending:!1,nullsFirst:!1}).order("chegou_em",{ascending:!0});if(Se)console.error("Error fetching queue:",Se);else{const ge=F.filter(de=>$n.some(we=>de[we.key]==="Aguardando"||de[we.key]==="atendido"));n(ge)}l(!1)},Y=G=>{const F=$n.find(Se=>Se.key===G);return F?F.label:"Consultrio"},K=G=>{if(!G)return"--:--";if(G.includes("T"))try{return new Date(G).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})}catch{return G}return G.substring(0,5)},H=G=>{if(d===null)return!1;if(d===1)return!0;switch(G){case"consultorio":return d===2;case"salaexames":return d===3;case"salacoleta":return d===4;case"audiometria":return d===5;case"raiox":return d===6;default:return!1}},I=async(G,F,Se,ge)=>{if(!H(F))return;let de="";const we={},Ee=new Date().toISOString();if(Se==="Aguardando"){if(de="atendido",j({startTime:new Date,patientName:ge||"Paciente"}),we.posicao_tela=1,we.sala_chamada=Y(F),await W.from("agendamentos").update({posicao_tela:2}).eq("posicao_tela",1),m){const{error:U}=await W.from("atendimentos").insert({agendamento_id:G,user_id:m,chamou_em:Ee,finalizou_em:null});U&&console.error("Erro ao registrar atendimento:",U)}}else if(Se==="atendido"){if(de="Finalizado",j(null),m){const{error:U}=await W.from("atendimentos").update({finalizou_em:Ee}).eq("agendamento_id",G).is("finalizou_em",null);U&&console.error("Erro ao finalizar atendimento:",U)}if(y){const U=new Date,ae=new Date(U.getFullYear(),U.getMonth()+1,0).toISOString().split("T")[0],{error:ue}=await W.from("financeiro_despesas").insert({desc:"Atendimento por prestador",fornecedor:y,forma_pagamento:"a combinar",centro_custos:"Variavel",responsavel:"Gama Medicina",valor:0,data_projetada:ae,status:"pendente",nome:y,qnt_parcela:1,categoria:"Medicina",recorrente:!1});ue?console.error("Erro ao gerar despesa financeira:",ue):console.log("Despesa gerada com sucesso.")}}else return;we[F]=de,n(U=>U.map(Q=>Q.id===G?{...Q,...we}:Q));const{error:Ne}=await W.from("agendamentos").update(we).eq("id",G);Ne&&(console.error("Error updating room status",Ne),D())},le=(G,F)=>{if(G==="atendido")return`bg-yellow-400 shadow-yellow-400/50 ${F?"cursor-pointer hover:scale-110":"cursor-not-allowed opacity-80"}`;if(!F)return"bg-gray-300 border-gray-300 opacity-30 cursor-not-allowed";switch(G){case"Aguardando":return"bg-red-500 shadow-red-500/50 animate-pulse cursor-pointer hover:scale-110 active:scale-95";case"Finalizado":return"bg-green-500 shadow-green-500/50 cursor-default";default:return"bg-gray-200 border-gray-200"}},X=(()=>{const G=new Set;return i.forEach(F=>{$n.forEach(Se=>{F[Se.key]==="atendido"&&G.add(Se.key)})}),G})();return r?u.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-ios-subtext",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-ios-primary mb-2"}),"Carregando Chamadas..."]}):u.jsxs("div",{className:"space-y-6 relative pb-20",children:[u.jsx("div",{className:"flex justify-between items-end",children:u.jsxs("div",{children:[u.jsx("h2",{className:"text-3xl font-bold text-ios-text tracking-tight",children:"Tela de Chamada"}),u.jsx("p",{className:"text-ios-subtext font-medium mt-1 uppercase text-xs tracking-wider",children:"Fluxo de Atendimento (Ordem de Chegada)"})]})}),i.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-white rounded-ios border border-gray-100 text-center shadow-sm",children:[u.jsx("div",{className:"w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center text-3xl mb-4 shadow-inner",children:""}),u.jsx("h3",{className:"text-xl font-bold text-ios-text",children:"Tudo tranquilo"}),u.jsx("p",{className:"text-ios-subtext mt-2",children:"Nenhum paciente presente aguardando atendimento."})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"hidden md:block bg-white rounded-ios shadow-sm border border-gray-100 overflow-hidden",children:u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b border-gray-100 bg-gray-50/50",children:[u.jsx("th",{className:"px-6 py-5 text-left text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Chegada"}),u.jsx("th",{className:"px-6 py-5 text-left text-xs font-bold text-gray-400 uppercase tracking-wider",children:"Colaborador"}),$n.map(G=>u.jsx("th",{className:"px-6 py-5 text-center text-xs font-bold text-gray-400 uppercase tracking-wider",children:G.label},G.key))]})}),u.jsx("tbody",{className:"divide-y divide-gray-100",children:i.map(G=>{var Se,ge,de,we;const F=(Se=$n.find(Ee=>G[Ee.key]==="atendido"))==null?void 0:Se.key;return u.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[u.jsx("td",{className:"px-6 py-5 whitespace-nowrap",children:u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-xs font-mono text-gray-500",children:K(G.chegou_em)}),G.prioridade&&u.jsx("span",{className:"text-[9px] uppercase font-bold text-red-500 mt-1",children:"Prioridade"})]})}),u.jsx("td",{className:"px-6 py-5 whitespace-nowrap",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-xs font-bold shadow-sm ${G.prioridade?"bg-red-100 text-red-600 ring-2 ring-red-100":"bg-ios-primary/10 text-ios-primary"}`,children:(de=(ge=G.colaboradores)==null?void 0:ge.nome)==null?void 0:de.charAt(0)}),u.jsx("span",{className:"font-semibold text-ios-text text-sm",children:(we=G.colaboradores)==null?void 0:we.nome})]})}),$n.map(Ee=>{const Ne=G[Ee.key],U=Ne==="Aguardando"||Ne==="atendido"||Ne==="Finalizado",Q=H(Ee.key),ue=X.has(Ee.key)&&Ne!=="atendido",ve=Q&&(!F||F===Ee.key)&&!ue;let w=ve?"Ao":"Bloqueado";return Ne==="atendido"&&(w="Em atendimento"),ue&&(w="Sala ocupada por outro paciente"),U?u.jsx("td",{className:"px-6 py-5 whitespace-nowrap text-center",children:u.jsx("button",{onClick:()=>{var B;return ve&&I(G.id,Ee.key,Ne,(B=G.colaboradores)==null?void 0:B.nome)},className:`w-8 h-8 rounded-full shadow-md transition-all duration-300 transform border-2 border-white ${le(Ne,ve)}`,title:w,disabled:!ve||Ne==="Finalizado"})},Ee.key):u.jsx("td",{className:"px-6 py-5"},Ee.key)})]},G.id)})})]})})}),u.jsx("div",{className:"md:hidden space-y-4",children:i.map(G=>{var Se,ge,de,we;const F=(Se=$n.find(Ee=>G[Ee.key]==="atendido"))==null?void 0:Se.key;return u.jsxs("div",{className:`bg-white rounded-ios p-5 shadow-sm border ${G.prioridade?"border-red-200 bg-red-50/20":"border-gray-100"}`,children:[u.jsxs("div",{className:"flex items-center justify-between mb-4 pb-4 border-b border-gray-50",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-sm font-bold shadow-sm ${G.prioridade?"bg-red-100 text-red-600":"bg-ios-primary/10 text-ios-primary"}`,children:(de=(ge=G.colaboradores)==null?void 0:ge.nome)==null?void 0:de.charAt(0)}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-ios-text text-lg",children:(we=G.colaboradores)==null?void 0:we.nome}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("p",{className:"text-xs text-ios-subtext uppercase font-semibold",children:"Paciente"}),G.prioridade&&u.jsx("span",{className:"text-[10px] font-bold text-white bg-red-500 px-1.5 py-0.5 rounded",children:"PRIORIDADE"})]})]})]}),u.jsx("span",{className:"text-xs font-mono font-bold text-gray-400 bg-gray-50 px-2 py-1 rounded-md",children:K(G.chegou_em)})]}),u.jsx("div",{className:"space-y-3",children:$n.map(Ee=>{const Ne=G[Ee.key],U=Ne==="Aguardando"||Ne==="atendido"||Ne==="Finalizado",Q=H(Ee.key),ue=X.has(Ee.key)&&Ne!=="atendido",ve=Q&&(!F||F===Ee.key)&&!ue;return U?u.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-xl p-3",children:[u.jsx("span",{className:`text-sm font-medium ${ve?"text-gray-600":"text-gray-300"}`,children:Ee.label}),u.jsx("button",{onClick:()=>{var w;return ve&&I(G.id,Ee.key,Ne,(w=G.colaboradores)==null?void 0:w.nome)},className:`w-10 h-10 rounded-full shadow-sm transition-all flex items-center justify-center border-2 border-white ${le(Ne,ve)}`,disabled:!ve||Ne==="Finalizado",children:Ne==="atendido"&&ve&&u.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-yellow-400 opacity-20"})})]},Ee.key):null})})]},G.id)})})]}),b&&u.jsx("div",{className:"fixed bottom-6 right-6 lg:bottom-10 lg:right-10 z-50 animate-in fade-in slide-in-from-bottom-4",children:u.jsxs("div",{className:"bg-yellow-400 text-yellow-900 rounded-full shadow-float px-6 py-4 flex items-center gap-4 border-2 border-white transform hover:scale-105 transition-transform cursor-pointer group",children:[u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[10px] uppercase font-bold tracking-wider opacity-70",children:"Em atendimento"}),u.jsx("span",{className:"text-sm font-bold truncate max-w-[150px]",children:b.patientName})]}),u.jsx("div",{className:"h-8 w-px bg-yellow-900/10"}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-2xl font-mono font-bold tracking-tight",children:T}),u.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"})]})]})})]})},hb=()=>{var S;const[i,n]=V.useState(null),[r,l]=V.useState([]),[d,h]=V.useState(!0),[m,g]=V.useState(!1),y=V.useRef(null),p=V.useRef(null),b=V.useRef(null);V.useEffect(()=>{j();const A=W.channel("public:agendamentos").on("postgres_changes",{event:"*",schema:"public",table:"agendamentos"},D=>{j()}).subscribe();return()=>{W.removeChannel(A),b.current&&b.current.close()}},[]);const j=async()=>{const{data:A,error:D}=await W.from("agendamentos").select(`
        *,
        colaboradores:colaboradores!agendamentos_colaborador_id_fkey (id, nome)
      `).not("posicao_tela","is",null).neq("sala_chamada","nenhuma").order("posicao_tela",{ascending:!0}).limit(6);if(D)console.error("Error fetching display data:",D);else if(A){const Y=A,K=Y.find(le=>le.posicao_tela===1)||null,H=Y.filter(le=>le.posicao_tela!==1);K&&(K.id!==y.current||K.sala_chamada!==p.current)&&(y.current=K.id,p.current=K.sala_chamada||null,await E()),n(K),l(H),h(!1)}},T=async()=>{try{const A=window.AudioContext||window.webkitAudioContext,D=new A;b.current=D,await D.resume(),g(!0),E()}catch(A){console.error("Audio Context Init Error",A)}},E=async()=>{const A=b.current;if(A)try{A.state==="suspended"&&await A.resume();const D=A.createOscillator(),Y=A.createGain();D.connect(Y),Y.connect(A.destination),D.type="sine";const K=A.currentTime;D.frequency.setValueAtTime(880,K),D.frequency.exponentialRampToValueAtTime(440,K+.8),Y.gain.setValueAtTime(0,K),Y.gain.linearRampToValueAtTime(.5,K+.05),Y.gain.exponentialRampToValueAtTime(.01,K+1.5),D.start(K),D.stop(K+1.5)}catch(D){console.error("Audio Play Error",D)}};return d?u.jsx("div",{className:"w-full h-full flex items-center justify-center bg-black text-white",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-ios-primary mb-4"})}):u.jsxs("div",{className:"h-full w-full flex flex-col lg:flex-row gap-6 relative bg-black p-4 lg:p-6",children:[!m&&u.jsx("div",{className:"absolute inset-0 z-50 bg-black/90 backdrop-blur-sm flex flex-col items-center justify-center text-white",children:u.jsxs("div",{className:"text-center p-8 border border-white/20 rounded-3xl bg-white/5 shadow-2xl",children:[u.jsx("div",{className:"text-5xl mb-6",children:""}),u.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Painel de Chamada"}),u.jsx("p",{className:"text-gray-400 mb-8 max-w-md",children:"Clique abaixo para ativar o som de alerta."}),u.jsx("button",{onClick:T,className:"bg-ios-primary text-white px-10 py-4 rounded-full font-bold text-lg hover:bg-ios-secondary transition-colors shadow-lg shadow-ios-primary/30",children:"Ativar Som"})]})}),u.jsxs("div",{className:"flex-1 flex flex-col justify-center items-center bg-gradient-to-br from-ios-primary to-ios-secondary rounded-[32px] lg:rounded-[40px] shadow-2xl p-6 lg:p-10 relative overflow-hidden text-white transition-all duration-700 min-h-[50vh]",children:[u.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-white/10 rounded-full blur-3xl transform translate-x-1/2 -translate-y-1/2 animate-pulse"}),u.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-black/10 rounded-full blur-3xl transform -translate-x-1/2 translate-y-1/2"}),i?u.jsxs("div",{className:"relative z-10 text-center space-y-8 lg:space-y-12 animate-in fade-in zoom-in duration-700 w-full",children:[u.jsxs("div",{className:"space-y-2 lg:space-y-4",children:[u.jsx("p",{className:"text-white/80 text-lg lg:text-3xl uppercase font-bold tracking-[0.2em]",children:"Chamada Atual"}),u.jsx("h1",{className:"text-4xl md:text-6xl lg:text-8xl font-black leading-tight drop-shadow-xl break-words w-full px-2",children:(S=i.colaboradores)==null?void 0:S.nome})]}),u.jsx("div",{className:"w-32 lg:w-48 h-1.5 lg:h-2 bg-white/30 mx-auto rounded-full"}),u.jsxs("div",{className:"space-y-2 lg:space-y-4",children:[u.jsx("p",{className:"text-white/80 text-base lg:text-2xl uppercase font-bold tracking-[0.2em]",children:"Dirija-se "}),u.jsx("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-3xl px-8 lg:px-16 py-4 lg:py-8 inline-block shadow-2xl",children:u.jsx("h2",{className:"text-4xl md:text-7xl lg:text-9xl font-black tracking-tighter text-white drop-shadow-lg",children:i.sala_chamada})})]})]}):u.jsxs("div",{className:"relative z-10 text-center opacity-70",children:[u.jsx("div",{className:"w-24 h-24 lg:w-40 lg:h-40 bg-white/10 rounded-full flex items-center justify-center mx-auto mb-6 lg:mb-8 text-5xl lg:text-7xl shadow-inner border border-white/10",children:""}),u.jsx("h1",{className:"text-3xl lg:text-5xl font-bold tracking-tight",children:"Aguardando..."})]})]}),u.jsxs("div",{className:"w-full lg:w-1/3 bg-[#111] rounded-[32px] lg:rounded-[40px] border border-white/10 shadow-glass flex flex-col overflow-hidden max-h-[40vh] lg:max-h-full",children:[u.jsx("div",{className:"p-6 lg:p-8 border-b border-white/10 bg-white/5",children:u.jsxs("h3",{className:"text-xl lg:text-2xl font-bold text-white flex items-center gap-3",children:[u.jsx("svg",{className:"w-6 h-6 lg:w-8 lg:h-8 text-ios-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"ltimas Chamadas"]})}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6 space-y-3 lg:space-y-4 custom-scrollbar",children:r.length>0?r.map(A=>{var D;return u.jsxs("div",{className:"bg-white/5 p-4 lg:p-6 rounded-2xl shadow-sm flex items-center justify-between border border-white/5 hover:bg-white/10 transition-colors animate-in slide-in-from-right duration-500 group",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-lg lg:text-xl text-white mb-1 lg:mb-2 group-hover:text-ios-primary transition-colors",children:(D=A.colaboradores)==null?void 0:D.nome}),u.jsx("span",{className:"inline-block px-2 lg:px-3 py-0.5 lg:py-1 bg-white/10 rounded-lg text-[10px] lg:text-xs text-gray-300 font-bold uppercase tracking-wide",children:"Chamado"})]}),u.jsx("div",{className:"text-right",children:u.jsx("span",{className:"block text-xl lg:text-3xl font-bold text-ios-primary",children:A.sala_chamada})})]},A.id)}):u.jsx("div",{className:"h-full flex flex-col items-center justify-center text-gray-500 opacity-60 min-h-[100px]",children:u.jsx("p",{className:"text-lg lg:text-xl",children:"Histrico vazio"})})})]})]})},fb=()=>{const[i,n]=V.useState(!0),[r,l]=V.useState(0),[d,h]=V.useState(0),[m,g]=V.useState(0),[y,p]=V.useState([]),[b,j]=V.useState("");V.useEffect(()=>{T()},[]);const T=async()=>{n(!0);try{const{data:{user:D}}=await W.auth.getUser();if(!D){n(!1);return}const{data:Y,error:K}=await W.from("users").select("id, username").eq("user_id",D.id).single();if(K||!Y){console.error("Erro ao identificar usurio:",K),n(!1);return}const H=Y.id;j(Y.username);const I=new Date;I.setHours(0,0,0,0);const le=I.toISOString(),{data:ne,error:X}=await W.from("atendimentos").select("id, chamou_em, finalizou_em, user_id").gte("chamou_em",le).not("finalizou_em","is",null).not("chamou_em","is",null);if(X){console.error("Erro ao buscar estatsticas:",X),n(!1);return}E(ne,Y.username,H)}catch(D){console.error("Erro geral:",D)}finally{n(!1)}},E=(D,Y,K)=>{const H=D.filter(ge=>{const de=new Date(ge.chamou_em).getTime(),Ee=(new Date(ge.finalizou_em).getTime()-de)/1e3;return Ee>=0&&Ee<=36e3});let I=0;H.forEach(ge=>{const de=new Date(ge.chamou_em).getTime(),we=new Date(ge.finalizou_em).getTime();I+=(we-de)/1e3});const le=H.length,ne=le>0?I/le:0;h(ne);const X=H.filter(ge=>ge.user_id===K);let G=0;X.forEach(ge=>{const de=new Date(ge.chamou_em).getTime(),we=new Date(ge.finalizou_em).getTime();G+=(we-de)/1e3});const F=X.length,Se=F>0?G/F:0;g(F),l(Se),p([{id:K,name:Y,count:F,avgTimeSeconds:Se}])},S=D=>{const Y=Math.floor(D/60),K=Math.floor(D%60);return`${Y}m ${K.toString().padStart(2,"0")}s`},A=D=>Math.floor(D/60);return i?u.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center space-y-4 text-ios-subtext",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-ios-primary"}),"Calculando comparativo da equipe..."]}):u.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[u.jsx("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-4",children:u.jsxs("div",{children:[u.jsx("h2",{className:"text-3xl font-bold text-ios-text tracking-tight",children:"Desempenho Dirio"}),u.jsxs("p",{className:"text-ios-subtext font-medium mt-1",children:["Estatsticas de hoje (",new Date().toLocaleDateString("pt-BR"),")"]})]})}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"bg-white rounded-[32px] p-8 shadow-sm border border-gray-100 relative overflow-hidden group hover:shadow-float transition-all duration-300",children:[u.jsx("div",{className:"absolute right-0 top-0 w-32 h-32 bg-blue-50 rounded-full blur-2xl transform translate-x-10 -translate-y-10"}),u.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[u.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-50 text-blue-500 flex items-center justify-center",children:u.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),u.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider",children:"Seus Atendimentos"})]}),u.jsxs("div",{className:"flex items-baseline gap-2",children:[u.jsx("span",{className:"text-5xl font-black text-ios-text tracking-tight",children:m}),u.jsx("span",{className:"text-xl font-medium text-gray-400",children:"pacientes"})]}),u.jsx("p",{className:"text-sm text-gray-400 mt-2 font-medium",children:"Finalizados com sucesso hoje"})]}),u.jsxs("div",{className:"bg-white rounded-[32px] p-8 shadow-sm border border-gray-100 relative overflow-hidden group hover:shadow-float transition-all duration-300",children:[u.jsx("div",{className:"absolute right-0 top-0 w-32 h-32 bg-green-50 rounded-full blur-2xl transform translate-x-10 -translate-y-10"}),u.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[u.jsx("div",{className:"w-10 h-10 rounded-xl bg-green-50 text-green-600 flex items-center justify-center",children:u.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),u.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider",children:"Seu Tempo Mdio"})]}),u.jsxs("div",{className:"flex items-baseline gap-2",children:[u.jsx("span",{className:"text-5xl font-black text-ios-text tracking-tight",children:A(r)}),u.jsx("span",{className:"text-xl font-medium text-gray-400",children:"minutos"})]}),u.jsxs("div",{className:"text-sm text-gray-400 mt-2 font-medium",children:[r%60>0?`e ${Math.floor(r%60)} segundos`:"exatos"," por paciente"]})]})]}),u.jsxs("div",{className:"bg-white rounded-[32px] p-8 shadow-sm border border-gray-100",children:[u.jsx("h3",{className:"text-lg font-bold text-ios-text mb-6",children:"Comparativo com a Equipe"}),u.jsxs("div",{className:"space-y-6",children:[y.map(D=>{const K=(d>0?d:1)*2;let H=D.avgTimeSeconds/K*100;H<5&&(H=5),H>100&&(H=100);let I="bg-ios-primary",le="";return D.avgTimeSeconds<=d?(I="bg-green-500",le=`Voc est ${Math.floor(d-D.avgTimeSeconds)}s mais rpido que a mdia da equipe.`):(I="bg-red-400",le=`Ateno: Voc est ${Math.floor(D.avgTimeSeconds-d)}s acima da mdia da equipe hoje.`),d===0&&(I="bg-gray-300",le="Ainda no h dados suficientes da equipe para comparao.",H=0),u.jsxs("div",{className:"group",children:[u.jsxs("div",{className:"flex justify-between items-end mb-2",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:"w-10 h-10 rounded-full bg-ios-primary/10 text-ios-primary text-sm font-bold flex items-center justify-center border border-ios-primary/20",children:b.charAt(0).toUpperCase()}),u.jsxs("div",{children:[u.jsxs("span",{className:"font-bold text-gray-800 block",children:[b," (Voc)"]}),u.jsxs("span",{className:"text-xs text-gray-400 font-medium",children:["Mdia da Equipe hoje: ",S(d)]})]})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("span",{className:"block font-bold text-gray-900",children:S(D.avgTimeSeconds)}),u.jsx("span",{className:"text-[10px] text-gray-400 font-medium uppercase",children:"Sua Mdia"})]})]}),u.jsxs("div",{className:"relative w-full h-4 bg-gray-100 rounded-full overflow-hidden border border-gray-200 mt-3",children:[d>0&&u.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-gray-400 z-10",style:{left:"50%"},title:"Mdia da Equipe"}),u.jsx("div",{style:{width:`${H}%`},className:`h-full rounded-full ${I} transition-all duration-1000 ease-out shadow-sm`})]}),u.jsxs("div",{className:"flex justify-between mt-1 text-[10px] text-gray-400 font-medium uppercase tracking-wider",children:[u.jsx("span",{children:"0m"}),u.jsx("span",{children:"Mdia da Equipe"}),u.jsxs("span",{children:[A(d*2),"m+"]})]}),u.jsx("p",{className:`text-xs mt-3 text-right font-medium ${D.avgTimeSeconds<=d?"text-green-600":"text-red-500"}`,children:le})]},D.id)}),y.length===0&&u.jsxs("div",{className:"text-center py-12 flex flex-col items-center justify-center text-gray-400",children:[u.jsx("div",{className:"w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center mb-4 text-2xl",children:""}),u.jsx("p",{className:"font-medium",children:"Sem dados suficientes."}),u.jsx("p",{className:"text-xs mt-1",children:"Finalize atendimentos para gerar o comparativo."})]})]})]})]})},mb=({appointment:i,onBack:n})=>{var j,T,E,S,A,D,Y,K,H,I,le;const[r,l]=V.useState(!0),[d,h]=V.useState({razao_social:"",cnpj:""}),[m,g]=V.useState([]);V.useEffect(()=>{y()},[i]);const y=async()=>{var ne;l(!0);try{if(i.unidade){const{data:X}=await W.from("unidades").select("empresaid").eq("id",i.unidade).single();if(X&&X.empresaid){const{data:G}=await W.from("clientes").select("nome_fantasia, cnpj").eq("id",X.empresaid).single();G&&h({razao_social:G.nome_fantasia,cnpj:G.cnpj})}}if((ne=i.colaboradores)!=null&&ne.setor&&i.unidade){const X=i.colaboradores.setor,{data:G}=await W.from("setor").select("id").ilike("nome",X).maybeSingle();if(G){const{data:F}=await W.from("unidade_setor").select("id").eq("unidade_id",i.unidade).eq("setor_id",G.id).maybeSingle();if(F){const{data:Se}=await W.from("riscos_unidade").select("risco_id").eq("unidade_setor",F.id);if(Se&&Se.length>0){const ge=Se.map(we=>we.risco_id),{data:de}=await W.from("riscos").select("nome, tipo").in("id",ge);de&&g(de)}}}}}catch(X){console.error("Error fetching ASO data:",X)}finally{l(!1)}},p=()=>{window.print()};if(r)return u.jsx("div",{className:"flex items-center justify-center h-full",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})});const b=ne=>{const X=m.filter(G=>G.tipo===ne);return X.length===0?"Ausncia de riscos":X.map(G=>G.nome).join(", ")};return u.jsxs("div",{className:"min-h-screen bg-gray-100 py-8 relative",children:[u.jsxs("div",{className:"fixed top-4 right-4 flex gap-2 print:hidden z-50",children:[u.jsx("button",{onClick:n,className:"bg-gray-600 text-white px-4 py-2 rounded shadow hover:bg-gray-700",children:"Voltar"}),u.jsxs("button",{onClick:p,className:"bg-blue-600 text-white px-4 py-2 rounded shadow hover:bg-blue-700 flex items-center gap-2",children:[u.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"Imprimir"]})]}),u.jsxs("div",{className:"bg-white max-w-[21cm] mx-auto p-[1cm] shadow-lg print:shadow-none print:w-full print:max-w-none print:p-0 text-black font-serif text-sm",children:[u.jsx("style",{children:`
                @media print {
                    body * { visibility: hidden; }
                    #aso-content, #aso-content * { visibility: visible; }
                    #aso-content { position: absolute; left: 0; top: 0; width: 100%; }
                    @page { margin: 1cm; size: A4; }
                }
                .editable:empty:before {
                    content: attr(placeholder);
                    color: #999;
                }
            `}),u.jsxs("div",{id:"aso-content",className:"space-y-4",children:[u.jsxs("div",{className:"text-center border-b-2 border-black pb-2 mb-4",children:[u.jsx("h1",{className:"text-xl font-bold uppercase",children:"ASO - Atestado de Sade Ocupacional"}),u.jsx("h2",{className:"text-lg font-bold uppercase",children:((j=i.unidades)==null?void 0:j.nome_unidade)||"Unidade"})]}),u.jsxs("div",{className:"border border-black p-2",children:[u.jsx("h3",{className:"font-bold bg-gray-200 p-1 mb-2 text-center uppercase text-xs border-b border-black",children:"Empresa"}),u.jsxs("div",{className:"grid grid-cols-1 gap-1",contentEditable:!0,suppressContentEditableWarning:!0,children:[u.jsxs("p",{children:[u.jsx("strong",{children:"Razo Social:"})," ",d.razao_social||"________________________________"]}),u.jsxs("p",{children:[u.jsx("strong",{children:"CNPJ:"})," ",d.cnpj||"____________________"]})]})]}),u.jsxs("div",{className:"border border-black p-2",children:[u.jsx("h3",{className:"font-bold bg-gray-200 p-1 mb-2 text-center uppercase text-xs border-b border-black",children:"Funcionrio"}),u.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1",contentEditable:!0,suppressContentEditableWarning:!0,children:[u.jsxs("p",{className:"col-span-2",children:[u.jsx("strong",{children:"Nome:"})," ",(T=i.colaboradores)==null?void 0:T.nome]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Nascimento:"})," ",(E=i.colaboradores)!=null&&E.data_nascimento?new Date(i.colaboradores.data_nascimento).toLocaleDateString("pt-BR",{timeZone:"UTC"}):""]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Sexo:"})," ",((S=i.colaboradores)==null?void 0:S.sexo)==="M"?"Masculino":((A=i.colaboradores)==null?void 0:A.sexo)==="F"?"Feminino":(D=i.colaboradores)==null?void 0:D.sexo]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Cargo:"})," ",(K=(Y=i.colaboradores)==null?void 0:Y.cargos)==null?void 0:K.nome]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Setor:"})," ",(H=i.colaboradores)==null?void 0:H.setor]}),u.jsxs("p",{children:[u.jsx("strong",{children:"CPF:"})," ",(I=i.colaboradores)==null?void 0:I.cpf]})]})]}),u.jsxs("div",{className:"border border-black p-2 text-center",children:[u.jsx("h3",{className:"font-bold bg-gray-200 p-1 mb-2 uppercase text-xs border-b border-black",children:"Mdico Responsvel pelo PCMSO"}),u.jsxs("p",{contentEditable:!0,suppressContentEditableWarning:!0,children:[u.jsx("strong",{children:"Mariana Barros Innocente"}),"  CRM: 55279 - MG"]})]}),u.jsxs("div",{className:"border border-black p-2",children:[u.jsx("h3",{className:"font-bold bg-gray-200 p-1 mb-2 text-center uppercase text-xs border-b border-black",children:"Perigos / Fatores de Risco"}),u.jsxs("div",{className:"grid grid-cols-[100px_1fr] gap-y-1 text-xs",contentEditable:!0,suppressContentEditableWarning:!0,children:[u.jsx("div",{className:"font-bold border-r border-gray-300 pr-2",children:"Fsicos"}),u.jsx("div",{className:"pl-2",children:b(1)}),u.jsx("div",{className:"font-bold border-r border-gray-300 pr-2",children:"Qumicos"}),u.jsx("div",{className:"pl-2",children:b(2)}),u.jsx("div",{className:"font-bold border-r border-gray-300 pr-2",children:"Biolgicos"}),u.jsx("div",{className:"pl-2",children:b(5)}),u.jsx("div",{className:"font-bold border-r border-gray-300 pr-2",children:"Ergonmicos"}),u.jsx("div",{className:"pl-2",children:b(3)}),u.jsx("div",{className:"font-bold border-r border-gray-300 pr-2",children:"Acidentes"}),u.jsx("div",{className:"pl-2",children:b(4)})]})]}),u.jsxs("div",{className:"border border-black p-2",children:[u.jsx("div",{className:"text-[10px] text-justify mb-2 leading-tight",children:"EM CUMPRIMENTO S PORTARIAS NS 3214/78, 3164/82, 12/83, 24/94 E 08/96 NR7 DO MINISTRIO DO TRABALHO E EMPREGO PARA FINS DE EXAME:"}),u.jsx("div",{className:"font-bold text-center uppercase text-lg",contentEditable:!0,suppressContentEditableWarning:!0,children:i.tipo||"__________________"})]}),u.jsxs("div",{className:"border border-black p-2 min-h-[100px]",children:[u.jsx("h3",{className:"font-bold bg-gray-200 p-1 mb-2 text-center uppercase text-xs border-b border-black",children:"Avaliao Clnica e Exames Realizados"}),u.jsxs("div",{className:"text-sm space-y-1",contentEditable:!0,suppressContentEditableWarning:!0,children:[i.exames_snapshot&&i.exames_snapshot.length>0?i.exames_snapshot.map((ne,X)=>u.jsxs("div",{className:"flex gap-4 border-b border-dashed border-gray-300 py-1",children:[u.jsx("span",{className:"font-mono",children:new Date(i.data_atendimento).toLocaleDateString("pt-BR")}),u.jsx("span",{children:ne})]},X)):u.jsxs("div",{className:"flex gap-4 border-b border-dashed border-gray-300 py-1",children:[u.jsx("span",{className:"font-mono",children:new Date(i.data_atendimento).toLocaleDateString("pt-BR")}),u.jsx("span",{children:"Avaliao Clnica"})]}),u.jsx("div",{className:"h-4"}),u.jsx("div",{className:"h-4"})]})]}),u.jsxs("div",{className:"border border-black p-2",children:[u.jsx("h3",{className:"font-bold bg-gray-200 p-1 mb-2 text-center uppercase text-xs border-b border-black",children:"Parecer"}),u.jsxs("div",{className:"flex justify-around py-4",children:[u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("div",{className:"w-6 h-6 border border-black rounded-sm flex items-center justify-center"}),u.jsx("span",{className:"font-bold",children:"Apto para funo"})]}),u.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[u.jsx("div",{className:"w-6 h-6 border border-black rounded-sm flex items-center justify-center"}),u.jsx("span",{className:"font-bold",children:"Inapto para funo"})]})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-8 mt-12 pt-8",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"border-t border-black w-3/4 mx-auto pt-1 mb-1"}),u.jsx("p",{className:"font-bold text-xs uppercase",children:"Assinatura do Mdico"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"border-t border-black w-3/4 mx-auto pt-1 mb-1"}),u.jsx("p",{className:"font-bold text-xs uppercase",children:(le=i.colaboradores)==null?void 0:le.nome}),u.jsx("p",{className:"text-[10px] text-gray-500 uppercase",children:"Assinatura do Colaborador"})]})]}),u.jsxs("div",{className:"text-[10px] text-center text-gray-400 mt-8",children:["Gerado eletronicamente pelo sistema Gama Center em ",new Date().toLocaleDateString("pt-BR")]})]})]})]})},gb=()=>{const[i,n]=V.useState(null),[r,l]=V.useState("dashboard"),[d,h]=V.useState(!0),[m,g]=V.useState(null),[y,p]=V.useState(null);V.useEffect(()=>{W.auth.getSession().then(({data:{session:D}})=>{n(D),h(!1)});const{data:{subscription:A}}=W.auth.onAuthStateChange((D,Y)=>{n(Y)});return()=>A.unsubscribe()},[]);const b=async()=>{await W.auth.signOut()},j=()=>{g(null),l("novo")},T=A=>{g(A),l("novo")},E=A=>{p(A),l("aso")},S=()=>{switch(r){case"dashboard":return u.jsx(Ym,{});case"agenda":return u.jsx(Im,{onNewAppointment:j,onEditAppointment:T,onGenerateAso:E});case"novo":return u.jsx(ub,{initialAppointment:m,onCancel:()=>{g(null),l("agenda")}});case"chamada":return u.jsx(db,{});case"atendimento":return u.jsx(hb,{});case"stats":return u.jsx(fb,{});case"aso":return y?u.jsx(mb,{appointment:y,onBack:()=>{p(null),l("agenda")}}):u.jsx(Im,{onNewAppointment:j,onEditAppointment:T,onGenerateAso:E});default:return u.jsx(Ym,{})}};return d?u.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-ios-bg text-ios-primary font-medium animate-pulse",children:"Iniciando Gama OS..."}):i?u.jsx(rb,{activeTab:r,setActiveTab:l,onLogout:b,userId:i.user.id,children:S()}):u.jsx(ib,{onSuccess:()=>{window.location.reload()}})},ug=document.getElementById("root");if(!ug)throw new Error("Could not find root element to mount to");const pb=Tp.createRoot(ug);pb.render(u.jsx(bp.StrictMode,{children:u.jsx(gb,{})}));
